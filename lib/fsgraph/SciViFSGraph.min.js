var SciViFSGraph="object"==typeof SciViFSGraph?SciViFSGraph:{};SciViFSGraph.main=function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s="./src/index.ts")}({"./node_modules/call-bind/callBound.js":function(t,e,s){"use strict";var i=s("./node_modules/get-intrinsic/index.js"),n=s("./node_modules/call-bind/index.js"),r=n(i("String.prototype.indexOf"));t.exports=function(t,e){var s=i(t,!!e);return"function"==typeof s&&r(t,".prototype.")>-1?n(s):s}},"./node_modules/call-bind/index.js":function(t,e,s){"use strict";var i=s("./node_modules/function-bind/index.js"),n=s("./node_modules/get-intrinsic/index.js"),r=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||i.call(o,r),l=n("%Object.getOwnPropertyDescriptor%",!0),h=n("%Object.defineProperty%",!0),u=n("%Math.max%");if(h)try{h({},"a",{value:1})}catch(t){h=null}t.exports=function(t){var e=a(i,o,arguments);l&&h&&(l(e,"length").configurable&&h(e,"length",{value:1+u(0,t.length-(arguments.length-1))}));return e};var c=function(){return a(i,r,arguments)};h?h(t.exports,"apply",{value:c}):t.exports.apply=c},"./node_modules/define-properties/index.js":function(t,e,s){"use strict";var i=s("./node_modules/object-keys/index.js"),n="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,o=Array.prototype.concat,a=Object.defineProperty,l=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),h=function(t,e,s,i){var n;e in t&&("function"!=typeof(n=i)||"[object Function]"!==r.call(n)||!i())||(l?a(t,e,{configurable:!0,enumerable:!1,value:s,writable:!0}):t[e]=s)},u=function(t,e){var s=arguments.length>2?arguments[2]:{},r=i(e);n&&(r=o.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)h(t,r[a],e[r[a]],s[r[a]])};u.supportsDescriptors=!!l,t.exports=u},"./node_modules/es-abstract/2020/RequireObjectCoercible.js":function(t,e,s){"use strict";t.exports=s("./node_modules/es-abstract/5/CheckObjectCoercible.js")},"./node_modules/es-abstract/2020/ToString.js":function(t,e,s){"use strict";var i=s("./node_modules/get-intrinsic/index.js"),n=i("%String%"),r=i("%TypeError%");t.exports=function(t){if("symbol"==typeof t)throw new r("Cannot convert a Symbol value to a string");return n(t)}},"./node_modules/es-abstract/5/CheckObjectCoercible.js":function(t,e,s){"use strict";var i=s("./node_modules/get-intrinsic/index.js")("%TypeError%");t.exports=function(t,e){if(null==t)throw new i(e||"Cannot call method on "+t);return t}},"./node_modules/for-each/index.js":function(t,e,s){"use strict";var i=s("./node_modules/is-callable/index.js"),n=Object.prototype.toString,r=Object.prototype.hasOwnProperty;t.exports=function(t,e,s){if(!i(e))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=s),"[object Array]"===n.call(t)?function(t,e,s){for(var i=0,n=t.length;i<n;i++)r.call(t,i)&&(null==s?e(t[i],i,t):e.call(s,t[i],i,t))}(t,e,o):"string"==typeof t?function(t,e,s){for(var i=0,n=t.length;i<n;i++)null==s?e(t.charAt(i),i,t):e.call(s,t.charAt(i),i,t)}(t,e,o):function(t,e,s){for(var i in t)r.call(t,i)&&(null==s?e(t[i],i,t):e.call(s,t[i],i,t))}(t,e,o)}},"./node_modules/function-bind/implementation.js":function(t,e,s){"use strict";var i=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==n.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var s,r=i.call(arguments,1),o=Math.max(0,e.length-r.length),a=[],l=0;l<o;l++)a.push("$"+l);if(s=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var n=e.apply(this,r.concat(i.call(arguments)));return Object(n)===n?n:this}return e.apply(t,r.concat(i.call(arguments)))}),e.prototype){var h=function(){};h.prototype=e.prototype,s.prototype=new h,h.prototype=null}return s}},"./node_modules/function-bind/index.js":function(t,e,s){"use strict";var i=s("./node_modules/function-bind/implementation.js");t.exports=Function.prototype.bind||i},"./node_modules/get-intrinsic/index.js":function(t,e,s){"use strict";var i=SyntaxError,n=Function,r=TypeError,o=function(t){try{return n('"use strict"; return ('+t+").constructor;")()}catch(t){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(t){a=null}var l=function(){throw new r},h=a?function(){try{return arguments.callee,l}catch(t){try{return a(arguments,"callee").get}catch(t){return l}}}():l,u=s("./node_modules/has-symbols/index.js")(),c=Object.getPrototypeOf||function(t){return t.__proto__},d={},p="undefined"==typeof Uint8Array?void 0:c(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":u?c([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?c(c([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?c((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?c((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?c(""[Symbol.iterator]()):void 0,"%Symbol%":u?Symbol:void 0,"%SyntaxError%":i,"%ThrowTypeError%":h,"%TypedArray%":p,"%TypeError%":r,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},f=s("./node_modules/function-bind/index.js"),y=s("./node_modules/has/src/index.js"),_=f.call(Function.call,Array.prototype.concat),m=f.call(Function.apply,Array.prototype.splice),b=f.call(Function.call,String.prototype.replace),x=f.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,j=function(t,e){var s,n=t;if(y(v,n)&&(n="%"+(s=v[n])[0]+"%"),y(g,n)){var a=g[n];if(a===d&&(a=function t(e){var s;if("%AsyncFunction%"===e)s=o("async function () {}");else if("%GeneratorFunction%"===e)s=o("function* () {}");else if("%AsyncGeneratorFunction%"===e)s=o("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(s=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&(s=c(n.prototype))}return g[e]=s,s}(n)),void 0===a&&!e)throw new r("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:a}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new r('"allowMissing" argument must be a boolean');var s=function(t){var e=x(t,0,1),s=x(t,-1);if("%"===e&&"%"!==s)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===s&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return b(t,w,function(t,e,s,i){n[n.length]=s?b(i,E,"$1"):e||t}),n}(t),n=s.length>0?s[0]:"",o=j("%"+n+"%",e),l=o.name,h=o.value,u=!1,c=o.alias;c&&(n=c[0],m(s,_([0,1],c)));for(var d=1,p=!0;d<s.length;d+=1){var v=s[d],f=x(v,0,1),z=x(v,-1);if(('"'===f||"'"===f||"`"===f||'"'===z||"'"===z||"`"===z)&&f!==z)throw new i("property names with quotes must have matching quotes");if("constructor"!==v&&p||(u=!0),y(g,l="%"+(n+="."+v)+"%"))h=g[l];else if(null!=h){if(!(v in h)){if(!e)throw new r("base intrinsic for "+t+" exists, but the property is not available.");return}if(a&&d+1>=s.length){var S=a(h,v);h=(p=!!S)&&"get"in S&&!("originalValue"in S.get)?S.get:h[v]}else p=y(h,v),h=h[v];p&&!u&&(g[l]=h)}}return h}},"./node_modules/has-symbols/index.js":function(t,e,s){"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=s("./node_modules/has-symbols/shams.js");t.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},"./node_modules/has-symbols/shams.js":function(t,e,s){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),s=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(s))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},"./node_modules/has/src/index.js":function(t,e,s){"use strict";var i=s("./node_modules/function-bind/index.js");t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},"./node_modules/is-callable/index.js":function(t,e,s){"use strict";var i,n,r=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{i=Object.defineProperty({},"length",{get:function(){throw n}}),n={},o(function(){throw 42},null,i)}catch(t){t!==n&&(o=null)}else o=null;var a=/^\s*class\b/,l=function(t){try{var e=r.call(t);return a.test(e)}catch(t){return!1}},h=Object.prototype.toString,u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,c="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};t.exports=o?function(t){if(t===c)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{o(t,null,i)}catch(t){if(t!==n)return!1}return!l(t)}:function(t){if(t===c)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(u)return function(t){try{return!l(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(l(t))return!1;var e=h.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},"./node_modules/ngraph.events/index.js":function(t,e){t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],s=0;s<e.length;++s)if(t.hasOwnProperty(e[s]))throw new Error("Subject cannot be eventified, since it already has property '"+e[s]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(s,i,n){if("function"!=typeof i)throw new Error("callback is expected to be a function");var r=e[s];return r||(r=e[s]=[]),r.push({callback:i,ctx:n}),t},off:function(s,i){var n=void 0===s;if(n)return e=Object.create(null),t;if(e[s]){var r="function"!=typeof i;if(r)delete e[s];else for(var o=e[s],a=0;a<o.length;++a)o[a].callback===i&&o.splice(a,1)}return t},fire:function(s){var i,n=e[s];if(!n)return t;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var r=0;r<n.length;++r){var o=n[r];o.callback.apply(o.ctx,i)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},"./node_modules/ngraph.graph/index.js":function(t,e,s){t.exports=function(t){"uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);if("function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,s=[],h={},u=0,c=t.multigraph?function(t,e,s){var i=l(t,e),n=h.hasOwnProperty(i);if(n||A(t,e)){n||(h[i]=0);var r="@"+ ++h[i];i=l(t+r,e+r)}return new a(t,e,s,i)}:function(t,e,s){var i=l(t,e);return new a(t,e,s,i)},d=[],p=k,g=k,v=k,f=k,y={addNode:x,addLink:function(t,e,i){v();var n=w(t)||x(t),r=w(e)||x(e),a=c(t,e,i);s.push(a),o(n,a),t!==e&&o(r,a);return p(a,"add"),f(),a},removeLink:S,removeNode:E,getNode:w,getNodeCount:j,getLinkCount:z,getLinksCount:z,getNodesCount:j,getLinks:function(t){var e=w(t);return e?e.links:null},forEachNode:C,forEachLinkedNode:function(t,s,i){var n=w(t);if(n&&n.links&&"function"==typeof s)return i?function(t,s,i){for(var n=0;n<t.length;++n){var r=t[n];if(r.fromId===s&&i(e.get(r.toId),r))return!0}}(n.links,t,s):function(t,s,i){for(var n=0;n<t.length;++n){var r=t[n],o=r.fromId===s?r.toId:r.fromId;if(i(e.get(o),r))return!0}}(n.links,t,s)},forEachLink:function(t){var e,i;if("function"==typeof t)for(e=0,i=s.length;e<i;++e)t(s[e])},beginUpdate:v,endUpdate:f,clear:function(){v(),C(function(t){E(t.id)}),f()},hasLink:A,hasNode:w,getLink:A};return i(y),_=y.on,y.on=function(){return y.beginUpdate=v=O,y.endUpdate=f=M,p=m,g=b,y.on=_,_.apply(y,arguments)},y;var _;function m(t,e){d.push({link:t,changeType:e})}function b(t,e){d.push({node:t,changeType:e})}function x(t,s){if(void 0===t)throw new Error("Invalid node identifier");v();var i=w(t);return i?(i.data=s,g(i,"update")):(i=new r(t,s),g(i,"add")),e.set(t,i),f(),i}function w(t){return e.get(t)}function E(t){var s=w(t);if(!s)return!1;v();var i=s.links;if(i){s.links=null;for(var n=0;n<i.length;++n)S(i[n])}return e.delete(t),g(s,"remove"),f(),!0}function j(){return e.size}function z(){return s.length}function S(t){if(!t)return!1;var e=n(t,s);if(e<0)return!1;v(),s.splice(e,1);var i=w(t.fromId),r=w(t.toId);return i&&(e=n(t,i.links))>=0&&i.links.splice(e,1),r&&(e=n(t,r.links))>=0&&r.links.splice(e,1),p(t,"remove"),f(),!0}function A(t,e){var s,i=w(t);if(!i||!i.links)return null;for(s=0;s<i.links.length;++s){var n=i.links[s];if(n.fromId===t&&n.toId===e)return n}return null}function k(){}function O(){u+=1}function M(){0===(u-=1)&&d.length>0&&(y.fire("changed",d),d.length=0)}function C(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var s=e.values(),i=s.next();!i.done;){if(t(i.value))return!0;i=s.next()}}};var i=s("./node_modules/ngraph.events/index.js");function n(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var s,i=e.length;for(s=0;s<i;s+=1)if(e[s]===t)return s;return-1}function r(t,e){this.id=t,this.links=null,this.data=e}function o(t,e){t.links?t.links.push(e):t.links=[e]}function a(t,e,s,i){this.fromId=t,this.toId=e,this.data=s,this.id=i}function l(t,e){return t.toString()+"👉 "+e.toString()}},"./node_modules/node-polyglot/index.js":function(t,e,s){"use strict";var i=s("./node_modules/for-each/index.js"),n=s("./node_modules/node-polyglot/node_modules/warning/warning.js"),r=s("./node_modules/has/src/index.js"),o=s("./node_modules/string.prototype.trim/index.js"),a=function(t){n(!1,t)},l=String.prototype.replace,h=String.prototype.split,u="||||",c=function(t){var e=t%100,s=e%10;return 11!==e&&1===s?0:2<=s&&s<=4&&!(e>=12&&e<=14)?1:2},d={pluralTypes:{arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:c,chinese:function(){return 0},croatian:c,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:c,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function p(t,e){var s,n,r=(s=t.pluralTypeToLanguages,n={},i(s,function(t,e){i(t,function(t){n[t]=e})}),n);return r[e]||r[h.call(e,/-/,1)[0]]||r.en}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var v=/%\{(.*?)\}/g;function f(t,e,s,i,n){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var a=t,c=i||v,g=n||d,f="number"==typeof e?{smart_count:e}:e;if(null!=f.smart_count&&a){var y=h.call(a,u);a=o(y[function(t,e,s){return t.pluralTypes[p(t,e)](s)}(g,s||"en",f.smart_count)]||y[0])}return a=l.call(a,c,function(t,e){return r(f,e)&&null!=f[e]?f[e]:t})}function y(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var s=e.allowMissing?f:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:s,this.warn=e.warn||a,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",s=t&&t.suffix||"}";if(e===u||s===u)throw new RangeError('"'+u+'" token is reserved for pluralization');return new RegExp(g(e)+"(.*?)"+g(s),"g")}(e.interpolation),this.pluralRules=e.pluralRules||d}y.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},y.prototype.extend=function(t,e){i(t,function(t,s){var i=e?e+"."+s:s;"object"==typeof t?this.extend(t,i):this.phrases[i]=t},this)},y.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:i(t,function(t,s){var i=e?e+"."+s:s;"object"==typeof t?this.unset(t,i):delete this.phrases[i]},this)},y.prototype.clear=function(){this.phrases={}},y.prototype.replace=function(t){this.clear(),this.extend(t)},y.prototype.t=function(t,e){var s,i,n=null==e?{}:e;if("string"==typeof this.phrases[t])s=this.phrases[t];else if("string"==typeof n._)s=n._;else if(this.onMissingKey){i=(0,this.onMissingKey)(t,n,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+t+'"'),i=t;return"string"==typeof s&&(i=f(s,n,this.currentLocale,this.tokenRegex,this.pluralRules)),i},y.prototype.has=function(t){return r(this.phrases,t)},y.transformPhrase=function(t,e,s){return f(t,e,s)},t.exports=y},"./node_modules/node-polyglot/node_modules/warning/warning.js":function(t,e,s){"use strict";var i=function(){};i=function(t,e,s){var i=arguments.length;s=new Array(i>2?i-2:0);for(var n=2;n<i;n++)s[n-2]=arguments[n];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");t||function(t,e){var s=arguments.length;e=new Array(s>1?s-1:0);for(var i=1;i<s;i++)e[i-1]=arguments[i];var n=0,r="Warning: "+t.replace(/%s/g,function(){return e[n++]});"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(t){}}.apply(null,[e].concat(s))},t.exports=i},"./node_modules/object-keys/implementation.js":function(t,e,s){"use strict";var i;if(!Object.keys){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=s("./node_modules/object-keys/isArguments.js"),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),h=a.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,s="[object Function]"===r.call(t),i=o(t),a=e&&"[object String]"===r.call(t),d=[];if(!e&&!s&&!i)throw new TypeError("Object.keys called on a non-object");var g=h&&s;if(a&&t.length>0&&!n.call(t,0))for(var v=0;v<t.length;++v)d.push(String(v));if(i&&t.length>0)for(var f=0;f<t.length;++f)d.push(String(f));else for(var y in t)g&&"prototype"===y||!n.call(t,y)||d.push(String(y));if(l)for(var _=function(t){if("undefined"==typeof window||!p)return c(t);try{return c(t)}catch(t){return!1}}(t),m=0;m<u.length;++m)_&&"constructor"===u[m]||!n.call(t,u[m])||d.push(u[m]);return d}}t.exports=i},"./node_modules/object-keys/index.js":function(t,e,s){"use strict";var i=Array.prototype.slice,n=s("./node_modules/object-keys/isArguments.js"),r=Object.keys,o=r?function(t){return r(t)}:s("./node_modules/object-keys/implementation.js"),a=Object.keys;o.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return n(t)?a(i.call(t)):a(t)}):Object.keys=o;return Object.keys||o},t.exports=o},"./node_modules/object-keys/isArguments.js":function(t,e,s){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),s="[object Arguments]"===e;return s||(s="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),s}},"./node_modules/quadtree-lib/build/js/quadtree.min.js":function(t,e,s){var i,n,r;n=[],void 0===(r="function"==typeof(i=function(){return function(){function t(e){var s,i;if(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.maxElements=e.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!Number.isInteger(this.x)||!Number.isInteger(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");for(s in i=this,this.children={NW:{create:function(){return new t({x:i.x,y:i.y,width:Math.max(Math.floor(i.width/2),1),height:Math.max(Math.floor(i.height/2),1),maxElements:i.maxElements})},tree:null},NE:{create:function(){return new t({x:i.x+Math.max(Math.floor(i.width/2),1),y:i.y,width:Math.ceil(i.width/2),height:Math.max(Math.floor(i.height/2),1),maxElements:i.maxElements})},tree:null},SW:{create:function(){return new t({x:i.x,y:i.y+Math.max(Math.floor(i.height/2),1),width:Math.max(Math.floor(i.width/2),1),height:Math.ceil(i.height/2),maxElements:i.maxElements})},tree:null},SE:{create:function(){return new t({x:i.x+Math.max(Math.floor(i.width/2),1),y:i.y+Math.max(Math.floor(i.height/2),1),width:Math.ceil(i.width/2),height:Math.ceil(i.height/2),maxElements:i.maxElements})},tree:null}},this.children)this.children[s].get=function(){return null!=this.tree?this.tree:(this.tree=this.create(),this.tree)}}var e,s,i,n,r,o,a,l;return n=function(t){var e,s;return{x:Math.floor((null!=(e=t.width)?e:1)/2)+t.x,y:Math.floor((null!=(s=t.height)?s:1)/2)+t.y}},e=function(t,e){var s,i,n,r;return!(t.x>=e.x+(null!=(s=e.width)?s:1)||t.x+(null!=(i=t.width)?i:1)<=e.x||t.y>=e.y+(null!=(n=e.height)?n:1)||t.y+(null!=(r=t.height)?r:1)<=e.y)},s=function(t,e){var s;return s=n(e),t.x<s.x?t.y<s.y?"NW":"SW":t.y<s.y?"NE":"SE"},l=function(t){if("object"!=typeof t)throw new Error("Element must be an Object.");if(null==t.x||null==t.y)throw new Error("Coordinates properties are missing.");if((null!=t?t.width:void 0)<0||(null!=t?t.height:void 0)<0)throw new Error("Width and height must be positive integers.")},o=function(t){var e,s,i,n;return s=Math.max(Math.floor(t.width/2),1),i=Math.ceil(t.width/2),n=Math.max(Math.floor(t.height/2),1),e=Math.ceil(t.height/2),{NW:{x:t.x,y:t.y,width:s,height:n},NE:{x:t.x+s,y:t.y,width:i,height:n},SW:{x:t.x,y:t.y+n,width:s,height:e},SE:{x:t.x+s,y:t.y+n,width:i,height:e}}},i=function(t,s){var i,n,r,a;for(n in a=[],r=o(s))i=r[n],e(t,i)&&a.push(n);return a},r=function(t,e){var s;return(s=function(s){return t["_"+s]=t[s],Object.defineProperty(t,s,{set:function(t){return e.remove(this,!0),this["_"+s]=t,e.push(this)},get:function(){return this["_"+s]},configurable:!0})})("x"),s("y"),s("width"),s("height")},a=function(t){var e;return(e=function(e){if(null!=t["_"+e])return delete t[e],t[e]=t["_"+e],delete t["_"+e]})("x"),e("y"),e("width"),e("height")},t.prototype.clear=function(){var t,e;for(t in this.contents=[],this.oversized=[],this.size=0,e=[],this.children)e.push(this.children[t].tree=null);return e},t.prototype.push=function(t,e){return this.pushAll([t],e)},t.prototype.pushAll=function(t,e){var s,n,o,a,h,u,c,d,p,g,v,f,y,_,m,b,x,w,E,j;for(v=0,_=t.length;v<_;v++)g=t[v],l(g),e&&r(g,this);for(c=[{tree:this,elements:t}];c.length>0;){for(j=(x=c.shift()).tree,d={NW:null,NE:null,SW:null,SE:null},f=0,m=(u=x.elements).length;f<m;f++)if(h=u[f],j.size++,1!==(p=i(h,j)).length||1===j.width||1===j.height)j.oversized.push(h);else if(j.size-j.oversized.length<=j.maxElements)j.contents.push(h);else{for(a=p[0],E=j.children[a],null==d[a]&&(d[a]={tree:E.get(),elements:[]}),d[a].elements.push(h),y=0,b=(w=j.contents).length;y<b;y++)n=w[y],null==d[o=i(n,j)[0]]&&(d[o]={tree:j.children[o].get(),elements:[]}),d[o].elements.push(n);j.contents=[]}for(a in d)null!=(s=d[a])&&c.push(s)}return this},t.prototype.remove=function(t,e){var i,n;return l(t),(i=this.oversized.indexOf(t))>-1?(this.oversized.splice(i,1),this.size--,e||a(t),!0):(i=this.contents.indexOf(t))>-1?(this.contents.splice(i,1),this.size--,e||a(t),!0):!(null==(n=this.children[s(t,this)]).tree||!n.tree.remove(t,e)||(this.size--,0===n.tree.size&&(n.tree=null),0))},t.prototype.colliding=function(t,s){var n,r,o,a,h,u,c,d,p,g,v,f,y,_;for(null==s&&(s=e),l(t),h=[],o=[this];o.length>0;){for(u=0,p=(f=(_=o.shift()).oversized).length;u<p;u++)(r=f[u])!==t&&s(t,r)&&h.push(r);for(c=0,g=(y=_.contents).length;c<g;c++)(r=y[c])!==t&&s(t,r)&&h.push(r);for(0===(a=i(t,_)).length&&(a=[],t.x>=_.x+_.width&&a.push("NE"),t.y>=_.y+_.height&&a.push("SW"),a.length>0&&(1===a.length?a.push("SE"):a=["SE"])),d=0,v=a.length;d<v;d++)n=a[d],null!=_.children[n].tree&&o.push(_.children[n].tree)}return h},t.prototype.onCollision=function(t,s,n){var r,o,a,h,u,c,d,p,g,v,f,y,_;for(null==n&&(n=e),l(t),a=[this];a.length>0;){for(u=0,p=(f=(_=a.shift()).oversized).length;u<p;u++)(o=f[u])!==t&&n(t,o)&&s(o);for(c=0,g=(y=_.contents).length;c<g;c++)(o=y[c])!==t&&n(t,o)&&s(o);for(0===(h=i(t,_)).length&&(h=[],t.x>=_.x+_.width&&h.push("NE"),t.y>=_.y+_.height&&h.push("SW"),h.length>0&&(1===h.length?h.push("SE"):h=["SE"])),d=0,v=h.length;d<v;d++)r=h[d],null!=_.children[r].tree&&a.push(_.children[r].tree)}return null},t.prototype.get=function(t){return this.where(t)},t.prototype.where=function(t){var e,i,n,r,o,a,h,u,c,d,p,g,v;if("object"==typeof t&&(null==t.x||null==t.y))return this.find(function(e){var s,i;for(i in s=!0,t)t[i]!==e[i]&&(s=!1);return s});for(l(t),r=[],n=[this];n.length>0;){for(o=0,u=(d=(v=n.shift()).oversized).length;o<u;o++){for(h in i=d[o],e=!0,t)t[h]!==i[h]&&(e=!1);e&&r.push(i)}for(a=0,c=(p=v.contents).length;a<c;a++){for(h in i=p[a],e=!0,t)t[h]!==i[h]&&(e=!1);e&&r.push(i)}null!=(g=v.children[s(t,v)]).tree&&n.push(g.tree)}return r},t.prototype.each=function(t){var e,s,i,n,r,o,a,l,h,u;for(s=[this];s.length>0;){for(n=0,o=(l=(u=s.shift()).oversized).length;n<o;n++)i=l[n],"function"==typeof t&&t(i);for(r=0,a=(h=u.contents).length;r<a;r++)i=h[r],"function"==typeof t&&t(i);for(e in u.children)null!=u.children[e].tree&&s.push(u.children[e].tree)}return this},t.prototype.find=function(t){var e,s,i,n,r,o,a,l,h,u,c;for(s=[this],n=[];s.length>0;){for(r=0,a=(h=(c=s.shift()).oversized).length;r<a;r++)i=h[r],("function"==typeof t?t(i):void 0)&&n.push(i);for(o=0,l=(u=c.contents).length;o<l;o++)i=u[o],("function"==typeof t?t(i):void 0)&&n.push(i);for(e in c.children)null!=c.children[e].tree&&s.push(c.children[e].tree)}return n},t.prototype.filter=function(e){var s;return(s=function(i){var n,r,o,a,l,h,u,c,d,p,g;for(n in(r=new t({x:i.x,y:i.y,width:i.width,height:i.height,maxElements:i.maxElements})).size=0,i.children)null!=i.children[n].tree&&(r.children[n].tree=s(i.children[n].tree),r.size+=null!=(c=null!=(d=r.children[n].tree)?d.size:void 0)?c:0);for(a=0,h=(p=i.oversized).length;a<h;a++)o=p[a],(null==e||("function"==typeof e?e(o):void 0))&&r.oversized.push(o);for(l=0,u=(g=i.contents).length;l<u;l++)o=g[l],(null==e||("function"==typeof e?e(o):void 0))&&r.contents.push(o);return r.size+=r.oversized.length+r.contents.length,0===r.size?null:r})(this)},t.prototype.reject=function(t){return this.filter(function(e){return!("function"==typeof t?t(e):void 0)})},t.prototype.visit=function(t){var e,s,i;for(s=[this];s.length>0;)for(e in i=s.shift(),t.bind(i)(),i.children)null!=i.children[e].tree&&s.push(i.children[e].tree);return this},t.prototype.pretty=function(){var t,e,s,i,n,r,o;for(r="",s=function(t){var e,s,i;for(i="",e=s=t;s<=0?e<0:e>0;s<=0?++e:--e)i+="   ";return i},e=[{label:"ROOT",tree:this,level:0}];e.length>0;){for(t in r+=(i=s((o=e.shift()).level))+"| "+o.label+"\n"+i+"| ------------\n",o.tree.oversized.length>0&&(r+=i+"| * Oversized elements *\n"+i+"|   "+o.tree.oversized+"\n"),o.tree.contents.length>0&&(r+=i+"| * Leaf content *\n"+i+"|   "+o.tree.contents+"\n"),n=!1,o.tree.children)null!=o.tree.children[t].tree&&(n=!0,e.unshift({label:t,tree:o.tree.children[t].tree,level:o.level+1}));n&&(r+=i+"└──┐\n")}return r},t}()})?i.apply(e,n):i)||(t.exports=r)},"./node_modules/split.js/split.js":function(t,e,s){t.exports=function(){"use strict";var t=window,e=t.document,s="addEventListener",i="removeEventListener",n="getBoundingClientRect",r=function(){return!1},o=t.attachEvent&&!t[s],a=["","-webkit-","-moz-","-o-"].filter(function(t){var s=e.createElement("div");return s.style.cssText="width:"+t+"calc(9px)",!!s.style.length}).shift()+"calc",l=function(t){return"string"==typeof t||t instanceof String?e.querySelector(t):t};return function(h,u){var c,d,p,g;void 0===u&&(u={});var v=l(h[0]).parentNode,f=t.getComputedStyle(v).flexDirection,y=u.sizes||h.map(function(){return 100/h.length}),_=void 0!==u.minSize?u.minSize:100,m=Array.isArray(_)?_:h.map(function(){return _}),b=void 0!==u.gutterSize?u.gutterSize:10,x=void 0!==u.snapOffset?u.snapOffset:30,w=u.direction||"horizontal",E=u.cursor||("horizontal"===w?"ew-resize":"ns-resize"),j=u.gutter||function(t,s){var i=e.createElement("div");return i.className="gutter gutter-"+s,i},z=u.elementStyle||function(t,e,s){var i={};return"string"==typeof e||e instanceof String?i[t]=e:i[t]=o?e+"%":a+"("+e+"% - "+s+"px)",i},S=u.gutterStyle||function(t,e){return(s={})[t]=e+"px",s;var s};function A(t,e,s){var i=z(c,e,s);Object.keys(i).forEach(function(e){return t.style[e]=i[e]})}function k(t){var e=g[this.a],s=g[this.b],i=e.size+s.size;e.size=t/this.size*i,s.size=i-t/this.size*i,A(e.element,e.size,this.aGutterSize),A(s.element,s.size,this.bGutterSize)}function O(){var t=g[this.a].element,e=g[this.b].element;this.size=t[n]()[c]+e[n]()[c]+this.aGutterSize+this.bGutterSize,this.start=t[n]()[p]}function M(e){var n=g[this.a].element,o=g[this.b].element;!this.dragging&&u.onDragStart&&u.onDragStart(),e.preventDefault(),this.dragging=!0,this.move=function(t){var e;this.dragging&&((e="touches"in t?t.touches[0][d]-this.start:t[d]-this.start)<=g[this.a].minSize+x+this.aGutterSize?e=g[this.a].minSize+this.aGutterSize:e>=this.size-(g[this.b].minSize+x+this.bGutterSize)&&(e=this.size-(g[this.b].minSize+this.bGutterSize)),k.call(this,e),u.onDrag&&u.onDrag())}.bind(this),this.stop=function(){var e=g[this.a].element,s=g[this.b].element;this.dragging&&u.onDragEnd&&u.onDragEnd(),this.dragging=!1,t[i]("mouseup",this.stop),t[i]("touchend",this.stop),t[i]("touchcancel",this.stop),this.parent[i]("mousemove",this.move),this.parent[i]("touchmove",this.move),delete this.stop,delete this.move,e[i]("selectstart",r),e[i]("dragstart",r),s[i]("selectstart",r),s[i]("dragstart",r),e.style.userSelect="",e.style.webkitUserSelect="",e.style.MozUserSelect="",e.style.pointerEvents="",s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor=""}.bind(this),t[s]("mouseup",this.stop),t[s]("touchend",this.stop),t[s]("touchcancel",this.stop),this.parent[s]("mousemove",this.move),this.parent[s]("touchmove",this.move),n[s]("selectstart",r),n[s]("dragstart",r),o[s]("selectstart",r),o[s]("dragstart",r),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",this.gutter.style.cursor=E,this.parent.style.cursor=E,O.call(this)}"horizontal"===w?(c="width",d="clientX",p="left"):"vertical"===w&&(c="height",d="clientY",p="top");var C=[];function T(t){t.forEach(function(e,s){if(s>0){var i=C[s-1],n=g[i.a],r=g[i.b];n.size=t[s-1],r.size=e,A(n.element,n.size,i.aGutterSize),A(r.element,r.size,i.bGutterSize)}})}function N(){C.forEach(function(t){t.parent.removeChild(t.gutter),g[t.a].element.style[c]="",g[t.b].element.style[c]=""})}return g=h.map(function(t,e){var i,r={element:l(t),size:y[e],minSize:m[e]};if(e>0&&((i={a:e-1,b:e,dragging:!1,isFirst:1===e,isLast:e===h.length-1,direction:w,parent:v}).aGutterSize=b,i.bGutterSize=b,i.isFirst&&(i.aGutterSize=b/2),i.isLast&&(i.bGutterSize=b/2),"row-reverse"===f||"column-reverse"===f)){var a=i.a;i.a=i.b,i.b=a}if(!o&&e>0){var u=j(e,w);!function(t,e){var s=S(c,e);Object.keys(s).forEach(function(e){return t.style[e]=s[e]})}(u,b),u[s]("mousedown",M.bind(i)),u[s]("touchstart",M.bind(i)),v.insertBefore(u,r.element),i.gutter=u}0===e||e===h.length-1?A(r.element,r.size,b/2):A(r.element,r.size,b);var d=r.element[n]()[c];return d<r.minSize&&(r.minSize=d),e>0&&C.push(i),r}),o?{setSizes:T,destroy:N}:{setSizes:T,getSizes:function(){return g.map(function(t){return t.size})},collapse:function(t){if(t===C.length){var e=C[t-1];O.call(e),o||k.call(e,e.size-e.bGutterSize)}else{var s=C[t];O.call(s),o||k.call(s,s.aGutterSize)}},destroy:N}}}()},"./node_modules/string.prototype.trim/implementation.js":function(t,e,s){"use strict";var i=s("./node_modules/es-abstract/2020/RequireObjectCoercible.js"),n=s("./node_modules/es-abstract/2020/ToString.js"),r=s("./node_modules/call-bind/callBound.js")("String.prototype.replace"),o=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=n(i(this));return r(r(t,o,""),a,"")}},"./node_modules/string.prototype.trim/index.js":function(t,e,s){"use strict";var i=s("./node_modules/call-bind/index.js"),n=s("./node_modules/define-properties/index.js"),r=s("./node_modules/string.prototype.trim/implementation.js"),o=s("./node_modules/string.prototype.trim/polyfill.js"),a=s("./node_modules/string.prototype.trim/shim.js"),l=i(o());n(l,{getPolyfill:o,implementation:r,shim:a}),t.exports=l},"./node_modules/string.prototype.trim/polyfill.js":function(t,e,s){"use strict";var i=s("./node_modules/string.prototype.trim/implementation.js");t.exports=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:i}},"./node_modules/string.prototype.trim/shim.js":function(t,e,s){"use strict";var i=s("./node_modules/define-properties/index.js"),n=s("./node_modules/string.prototype.trim/polyfill.js");t.exports=function(){var t=n();return i(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},"./src/@types/Color.ts":function(t,e,s){"use strict";function i(t){const e=Math.max(t.r,t.g,t.b),s=e-Math.min(t.r,t.g,t.b),i={h:0,s:0,v:0,a:t.a};return i.v=e,i.s=0==e?0:s/e,s>0&&(e==t.r?i.h=60*(t.g-t.b)/s:e==t.g?i.h=60*((t.b-t.r)/s+2):e==t.b&&(i.h=60*((t.r-t.g)/s+4))),i}function n(t){const e=t.v*t.s,s=e*(1-Math.abs(t.h/60%2-1)),i=t.v-e;let n;return(n=t.h>=0&&t.h<60?{r:e,g:s,b:0,a:t.a}:t.h>=60&&t.h<120?{r:s,g:e,b:0,a:t.a}:t.h>=120&&t.h<180?{r:0,g:e,b:s,a:t.a}:t.h>=180&&t.h<240?{r:0,g:s,b:e,a:t.a}:t.h>=240&&t.h<300?{r:s,g:0,b:e,a:t.a}:{r:e,g:0,b:s,a:t.a}).r+=i,n.g+=i,n.b+=i,n}function r(t){return`rgba(${255*t.r}, ${255*t.g}, ${255*t.b}, ${t.a?t.a:1})`}function o(t){return r(n(t))}function a(t,e){const s=i(t);return s.s+=e,s.s>1&&(s.s=1),s.s<0&&(s.s=0),n(s)}s.r(e),s.d(e,"rgba_to_hsva",function(){return i}),s.d(e,"hsva_to_rgba",function(){return n}),s.d(e,"rgba_stringify",function(){return r}),s.d(e,"hsva_stringify",function(){return o}),s.d(e,"makeContrast",function(){return a})},"./src/@types/GUI.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"id_prefix",function(){return i});const i="scivi_fsgraph"},"./src/@types/Graph.ts":function(t,e,s){"use strict";var i;s.r(e),s.d(e,"GraphControlling",function(){return i}),function(t){t.getFirstState=function(t){return t[Object.keys(t)[0]]}}(i||(i={}))},"./src/CanvasManager.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"CanvasManager",function(){return h});var i=s("./node_modules/quadtree-lib/build/js/quadtree.min.js"),n=s("./src/Renderers/_ShaderCompiler.ts"),r=s("./src/Math/vec2.ts"),o=s("./src/Math/mat3.ts"),a=s("./src/InputManager.ts"),l=s("./src/@types/Color.ts");class h{constructor(t){this.graph_view=null,this.graph_view_configuration=null,this.gl=null,this.controller=t,this.gl_canvas=document.createElement("canvas");try{this.gl=this.gl_canvas.getContext("webgl",{premultipliedAlpha:!1})}catch(t){this.gl=null,console.error("Can't create webgl context")}this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.ALWAYS),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND),this.gl.enable(this.gl.CULL_FACE),this.inputManager=new a.InputManager,this.camera_pos=new r.default([0,0]),this.zoom_direction=new r.default([0,0]),this.cursor_pos_Scene=new r.default([0,0]),this.PV=o.default.identity.copy(),this.PV_inv=o.default.identity.copy(),this.P=o.default.identity.copy(),this.S=o.default.identity.copy(),this.toggled_node=null}bindCanvas(t){return this.canvas=t,this.inputManager.bindCanvas(t,this.detectObjectsUnderCursor.bind(this)),this.context2D=this.canvas.getContext("2d",{alpha:!1}),!0}bindGraph(t){const e=this.graph_view_configuration;if(e){e.link_renderer.clearObjects(),Object.keys(e.node_renderer_per_group).forEach(t=>e.node_renderer_per_group[t].clearObjects()),this.scale_factor=e.scroll_range.default,this.drawn_nodes=[],this.drawn_links=[],this.graph_view=this.makeGraphView(t.graph,this.graph_view_configuration),this.graph_view.quad_tree.clear();const s=Object.keys(this.graph_view.nodes).map(t=>this.graph_view.nodes[t]);this.graph_view.quad_tree.pushAll(s.map(t=>this.makeAABB(t))),Object.keys(this.graph_view.node_groups).forEach(t=>{this.graph_view.node_groups[t].forEach(s=>{e.node_renderer_per_group[t].addObject(s)})}),this.graph_view.links.forEach(t=>{e.link_renderer.addObject(t)}),this.inputManager.bindScene(this.graph_view)}}bindViewConfiguration(t){this.graph_view_configuration=t,t.link_renderer.bindContext(this.gl,n.ShaderCompiler_default),Object.keys(t.node_renderer_per_group).forEach(e=>{t.node_renderer_per_group[e].bindContext(this.gl,n.ShaderCompiler_default)})}translateGraphView(t){this.camera_pos.x+=t.x*this.graph_view_configuration.scene_size,this.camera_pos.y+=t.y*this.graph_view_configuration.scene_size}scaleGraphView(t,e){t>0?this.scale_factor/=h.dScale:this.scale_factor*=h.dScale,this.scale_factor<1&&(this.scale_factor=1),this.zoom_direction.xy=this.cursor_pos_Scene.xy,console.log(this.cursor_pos_Scene.x+" "+this.cursor_pos_Scene.y)}rotateGraphView(){}layoutGraph(t){t.layout(this.graph_view,this.graph_view_configuration.scene_size)}HideNode(t){const e=t.id,s=this.graph_view.nodes[e],i=s.group;this.graph_view_configuration.node_renderer_per_group[i].deleteObject(s),s.is_hidden=!0;const n=this.graph_view_configuration.link_renderer;this.graph_view.links.forEach(t=>{t.from!=s&&t.to!=s||n.deleteObject(t)})}ShowNode(t){const e=t.id,s=this.graph_view.nodes[e],i=s.group;this.graph_view_configuration.node_renderer_per_group[i].addObject(s),s.is_hidden=!1;const n=this.graph_view_configuration.link_renderer;this.graph_view.links.forEach(t=>{(t.from==s&&!t.to.is_hidden||t.to==s&&!t.from.is_hidden)&&n.addObject(t)})}ToggleNode(t){const e=this.graph_view.nodes[t.id];this.toggled_node&&t.id==this.toggled_node.node_logic_model.id?(this.DeselectAdjacentNodes(this.toggled_node),this.toggled_node.is_toggled=!1,this.toggled_node=null,this.controller("OnToggleOffNode",{node:t})):(this.toggled_node&&(this.DeselectAdjacentNodes(this.toggled_node),this.toggled_node.is_toggled=!1,this.controller("OnToggleOffNode",{node:t})),e.is_toggled=!0,this.toggled_node=e,this.SelectAdjacentNodes(e),this.controller("OnToggleOnNode",{node:t}))}SelectNode(t){const e=t.id,s=this.graph_view.nodes[e];s.is_selected=!0,s.zOrder++,this.toggled_node=s,this.SelectAdjacentNodes(s),this.controller("OnSelectNode",{node:t})}DeselectNode(t){const e=t.id,s=this.graph_view.nodes[e];s.is_selected=!1,s.zOrder--,this.toggled_node=null,this.DeselectAdjacentNodes(s),this.controller("OnDeselectNode",{node:t})}HoverOnNode(t){const e=t.id,s=this.graph_view.nodes[e];s.is_hovered=!0,s.zOrder++,this.SelectAdjacentNodes(s)}HoverOffNode(t){const e=t.id,s=this.graph_view.nodes[e];s.is_hovered=!1,s.zOrder--,this.DeselectAdjacentNodes(s)}fitToScreen(){}get scaleFactor(){return this.scale_factor}update(){const t={x:0,y:0,width:this.canvas.clientWidth,height:this.canvas.clientHeight},e=t.width/t.height,s=this.graph_view_configuration;h.resizeCanvasFramebuffer(this.canvas,t.width,t.height),h.resizeCanvasFramebuffer(this.gl_canvas,t.width*h.samples_count,t.height*h.samples_count),this.gl.viewport(0,0,t.width*h.samples_count,t.height*h.samples_count);const i=1/e/s.scene_size,n=1/s.scene_size;let r=this.camera_pos.x*i,a=this.camera_pos.y*n;this.P.init([i,0,0,0,n,0,r,a,1]);const l=this.scale_factor,u=-this.zoom_direction.x*l+this.zoom_direction.x,c=-this.zoom_direction.y*l+this.zoom_direction.y;this.S.init([l,0,0,0,l,0,u,c,1]),o.default.product(this.P,this.S,this.PV),this.PV_inv.init(this.PV.all()),this.PV_inv.inverse(),this.drawn_nodes=Object.keys(this.graph_view.nodes).map(t=>this.graph_view.nodes[t]),this.drawn_links=this.graph_view.links,this.render()}SceneToClient(t){this.PV.multiplyVec2(t,t),t.x=(t.x+1)*this.canvas.clientWidth/2,t.y=(1-t.y)*this.canvas.clientHeight/2}ClientToScene(t){const e=this.canvas.getBoundingClientRect();t.x=2*(t.x-e.left)/e.width-1,t.y=2*(t.y-e.top)/e.height-1,t.y*=-1,this.PV_inv.multiplyVec2(t,t)}detectObjectsUnderCursor(t){this.cursor_pos_Scene.x=t.x,this.cursor_pos_Scene.y=t.y,this.ClientToScene(this.cursor_pos_Scene);const e={x:this.cursor_pos_Scene.x,y:this.cursor_pos_Scene.y,width:1,height:1};return this.graph_view.quad_tree.colliding(e)}render(){const t=this.graph_view_configuration;this.drawn_nodes.forEach(e=>{if(e.is_toggled||e.is_selected||e.is_hovered||e.selected_adjacent_vertex_count>0)e.color=Object(l.makeContrast)(e.color,1),e.zOrder++;else{const s=t.node_colors_per_group[e.group];e.color=Object(l.hsva_to_rgba)(s),e.zOrder--}}),this.drawn_nodes.forEach(e=>{t.node_renderer_per_group[e.group].updateObject(e)}),this.drawn_links.forEach(e=>{t.link_renderer.updateObject(e)}),t.link_renderer.sortObjects(),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),t.link_renderer.render(this.PV),Object.keys(t.node_renderer_per_group).forEach(e=>{t.node_renderer_per_group[e].render(this.PV)}),this.context2D.clearRect(0,0,this.canvas.width,this.canvas.height),this.context2D.drawImage(this.gl_canvas,0,0,this.canvas.width,this.canvas.height),this.drawLabels()}drawLabels(){const t=this.graph_view_configuration.label_font_size,e={r:0,g:0,b:0},s=this.graph_view_configuration.label_painter,i=new r.default,n=this.drawn_nodes.filter(t=>!t.is_hidden&&(t.is_toggled||t.is_selected||t.is_hovered||t.selected_adjacent_vertex_count>0));n.forEach(r=>{i.x=0,i.y=0,n.forEach(t=>{const e=t.position.x-r.position.x,s=t.position.y-r.position.y,n=Math.sqrt(e*e+s*s);n>0&&(i.x+=e/n,i.y+=s/n)});const o=i.y/i.x;i.x>0&&o>1||i.x<0&&o<-1?(i.x=0,i.y=1):o<=1&&o>-1?(i.y=0,i.x>0?i.x=1:i.x=-1):(i.x>0&&o<-1||i.x<0&&o>1)&&(i.x=0,i.y=-1);const a=-i.x,l=-i.y;i.y=r.position.y+l*r.size,i.x=r.position.x+a*r.size,this.SceneToClient(i);const h=this.context2D.measureText(r.label).width+10;i.x+=a*(h/2),i.y-=l*t,this.drawLabel(r.label,{x:i.x,y:i.y},e,t,5,s(r.color),!0)})}drawLabel(t,e,s,i,n,r,o){this.context2D.font=i+"px sans-serif";const a=this.context2D.measureText(t).width,h=a+2*n,u=i+2*n;this.context2D.fillStyle=Object(l.rgba_stringify)(r),this.context2D.fillRect(e.x-h/2,e.y-u/2,h,u),this.context2D.fillStyle=Object(l.rgba_stringify)(s),this.context2D.fillText(t,e.x-a/2,e.y+n),o&&this.context2D.strokeRect(e.x-h/2,e.y-u/2,h,u)}static resizeCanvasFramebuffer(t,e,s){t.width===e&&t.height===s||(t.width=e,t.height=s)}makeGraphView(t,e){const s={},n={},r={},o=[],a=new i({width:e.scene_size,height:e.scene_size,maxElements:2}),l={nodes:s,node_groups:n,links:o,node_links:r,graph_logic_model:t,quad_tree:a,onDrag:u.bind(this),onDragEnd:null,onZoom:c.bind(this)};return t.forEachNode(t=>{const i=t.data.group,o=this.makeNodeView(t,l,e.node_colors_per_group[i],e.node_sizer,e.scene_size);return n[i]||(n[i]=[]),s[t.id]=o,n[i][t.id]=o,r[t.id]=[],!1}),t.forEachLink(s=>{const i=t.getNode(s.fromId),a=t.getNode(s.toId),l=i.data.group,h=a.data.group,u=n[l][i.id],c=n[h][a.id],d=this.makeLinkView(u,c,s,e.link_sizer,e.link_painter);return o.push(d),r[s.fromId].push(d),!1}),l}makeNodeView(t,e,s,i,n){const o=t.data.weight?t.data.weight:1;return{group:t.data.group,position:new r.default([120*Math.random()-60,120*Math.random()-60]),color:Object(l.hsva_to_rgba)(s),is_hovered:!1,is_selected:!1,is_toggled:!1,selected_adjacent_vertex_count:0,is_hidden:!1,size:i(o),label:t.data.label,node_logic_model:t,graph_view:e,zOrder:0,speed:n}}makeLinkView(t,e,s,i,n){const r=s.data.weight?s.data.weight:1;return{from:t,to:e,size:i(t.size,e.size,r),zOrder:0,is_toggled:!1,is_drawn:!0,painter:n}}makeAABB(t){return{x:t.position.x-t.size,y:t.position.y-t.size,width:2*t.size,height:2*t.size,scene_object:t,onClick:d.bind(this),onDrag:p.bind(this),onDragEnd:g.bind(this),onEnter:v.bind(this),onLeave:f.bind(this)}}SelectAdjacentNodes(t){this.graph_view.node_links[t.node_logic_model.id].forEach(t=>{t.zOrder++;const e=t.to;e.zOrder++,e.selected_adjacent_vertex_count++})}DeselectAdjacentNodes(t){this.graph_view.node_links[t.node_logic_model.id].forEach(t=>{t.zOrder--;const e=t.to;e.selected_adjacent_vertex_count--,e.zOrder--})}}function u(t,e){this.translateGraphView(e),this.update()}function c(t,e,s){this.scaleGraphView(e,s),this.update()}function d(t,e){const s=this,i=t.scene_object;e.shiftKey&&0==e.button?i.is_selected?s.DeselectNode(i.node_logic_model):s.SelectNode(i.node_logic_model):0==e.button?s.ToggleNode(i.node_logic_model):2==e.button&&(i.color.r=Math.random(),i.color.g=Math.random(),i.color.b=Math.random()),s.update()}function p(t,e){const s=t.scene_object;s.position.x+=e.x*s.speed/this.scaleFactor,s.position.y+=e.y*s.speed/this.scaleFactor,this.update()}function g(t){const e=t,s=e.scene_object,i=s.graph_view.quad_tree;i.remove(e),e.x=s.position.x-s.size,e.y=s.position.y-s.size,i.push(e)}function v(t){const e=t.scene_object;this.HoverOnNode(e.node_logic_model),this.update()}function f(t){const e=t.scene_object;this.HoverOffNode(e.node_logic_model),this.update()}h.dScale=1.25,h.samples_count=2},"./src/GUI.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"GUI",function(){return p});var i=s("./node_modules/split.js/split.js"),n=s("./src/CanvasManager.ts"),r=s("./src/@types/Graph.ts"),o=s("./src/@types/GUI.ts"),a=r.GraphControlling.getFirstState;const l=o.id_prefix+"_graph_view",h=o.id_prefix+"_canvas",u=o.id_prefix+"_rotate_bar",c=o.id_prefix+"_state_bar",d=o.id_prefix+"_tabs";o.id_prefix;class p{constructor(t){this.canvas_manager=new n.CanvasManager(this.CanvasManagerController.bind(this))}build(t,e,s){if(this.gui_configuration=e,this.translator=s,t.innerHTML=`\n        <aside id=${l} class="split split-horizontal">\n            <div id=${u} class="ui-slider-handle">\n                <div id=${u+"handle"} class="ui-slider-handle"></div>\n            </div>\n            <canvas id=${h} tabindex=0></canvas>\n             <div id=${c}>\n                <div id=${c+"handle"} class=ui-slider-handle"></div>\n             </div>\n            <div id=${c+"labels"}></div>\n        </aside>`,Object.keys(e).length>0){const n=document.createElement("aside");n.className="split split-horizontal",n.id=d;const r=document.createElement("ul");n.appendChild(r),Object.keys(e).forEach(t=>{const e=document.createElement("li"),i="#"+t;e.innerHTML=`<a id=${o.id_prefix+t+"_link"} href=${i}>${s.apply(i)}</a>`,r.appendChild(e)}),Object.keys(e).forEach(t=>{const e=document.createElement("div");e.id=t,n.appendChild(e)}),t.appendChild(n),i(["#"+l,"#"+d],{gutterSize:8,cursor:"col-resize",sizes:[55,45],onDrag:()=>this.canvas_manager.update()}),$("#"+d).tabs({heightStyle:"fill"})}this.initGraphViewPanel(),Object.keys(e).forEach(t=>{const i=document.getElementById(t);e[t].build(i,this.TabsController.bind(this),s)}),document.body.onresize=(()=>this.canvas_manager.update())}bindGraph(t,e){this.bound_graph=t,this.fillStateBar(),this.canvas_manager.bindViewConfiguration(e),this.setState(a(t).label)}initGraphViewPanel(){const t=document.getElementById(l);t.style.display="flex",t.style.flexDirection="column";const e=document.getElementById(u);e.style.marginTop="0.5rem",e.style.marginBottom="0.5rem",e.style.marginLeft="2rem",e.style.marginRight="2rem";const s=$("#"+u+"handle");$("#"+u).slider({min:-180,max:180,value:0,step:5,slide:(t,e)=>{const i=e.value||0;s.text(`${i}°`)},create:()=>s.text("0°")});const i=document.getElementById(h);i.style.border="solid white 1px",i.style.flex="1 1 auto",i.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation()},this.canvas_manager.bindCanvas(i)}fillStateBar(){const t=Object.keys(this.bound_graph).length,e=100/t,s=document.getElementById(c);s.style.marginTop="0.5rem",s.style.marginRight=`${e/2}%`,s.style.marginLeft=`${e/2}%`;$("#"+c+"handle");$("#"+c).slider({min:0,max:t-1,value:0,step:1,slide:(t,e)=>{const s=Object.keys(this.bound_graph)[e.value||0];this.setState(s)}});const i=document.getElementById(c+"labels");Object.keys(this.bound_graph).forEach(t=>{const s=document.createElement("div");s.style.display="inline-block",s.style.textAlign="center",s.innerHTML=`<span>|</span><br /><label>${t}</label>`,s.classList.add("scivi_fsgraph_stateline_label"),s.style.width=`${e}%`,i.appendChild(s)})}CanvasManagerController(t,e){switch(t){case"OnToggleOnNode":this.gui_configuration.node_info_tab&&this.gui_configuration.node_info_tab.fill({graph:this.active_state,node:e.node});break;case"OnToggleOffNode":this.gui_configuration.node_info_tab&&this.gui_configuration.node_info_tab.clear();break;case"OnSelectNode":this.gui_configuration.node_list_tab&&this.gui_configuration.node_list_tab.onSelectedNode(e.node);break;case"OnDeselectNode":this.gui_configuration.node_list_tab&&this.gui_configuration.node_list_tab.onDeselectedNode(e.node)}}TabsController(t,e){switch(t){case"layout":this.canvas_manager.layoutGraph(e.builder);break;case"SelectNode":this.canvas_manager.SelectNode(e.node);break;case"DeselectNode":this.canvas_manager.DeselectNode(e.node);break;case"ShowNode":this.canvas_manager.ShowNode(e.node);break;case"HideNode":this.canvas_manager.HideNode(e.node)}this.canvas_manager.update()}setState(t){this.canvas_manager.bindGraph(this.bound_graph[t]),this.active_state=this.bound_graph[t],this.gui_configuration.node_list_tab&&this.gui_configuration.node_list_tab.fill(this.active_state),this.gui_configuration.filters_tab&&this.gui_configuration.filters_tab.fill(this.active_state),this.canvas_manager.update()}}},"./src/GraphSerializer.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"GraphSerializer",function(){return r});var i=s("./node_modules/ngraph.graph/index.js"),n=s.n(i);class r{fromJSON(t){function e(t,e){t.beginUpdate();const s=e.nodes,i=e.edges;for(let e of s){const s=e.id;let i={label:e.label?e.label:"",group:e.group?e.group:0};Object.keys(e).forEach(t=>{"id"!=t&&"group"!=t&&"label"!=t&&(i[t]=e[t])}),t.addNode(s,i)}for(let e of i){const s=e.source,i=e.target;let n={};Object.keys(e).forEach(t=>{"source"!=t&&"target"!=t&&(n[t]=e[t])}),t.addLink(s,i,n)}t.endUpdate()}let s={};const i=t.states;if(null!=i)for(let t of i){const i=t.label;s[i]={label:i,graph:n()()},e(s[i].graph,t)}else s[0]={label:"0",graph:n()()},e(s[0].graph,t);return s}}r.default_group_index=0},"./src/InputManager.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"InputManager",function(){return n});var i=s("./src/Math/tsm.ts");class n{constructor(){this.hovered_objects=[],this.cursor_pos=new i.vec2([0,0]),this.old_cursor_pos=new i.vec2([0,0]),this.cursor_offset=new i.vec2([0,0])}bindCanvas(t,e){this.canvas=t,document.onmousedown=this.onMouseDown.bind(this),document.onmouseup=this.onMouseUp.bind(this),document.onmousemove=this.onMouseMove.bind(this),this.canvas.onwheel=this.onCanvasScroll.bind(this),this.canvas.ondblclick=this.onDblCLick.bind(this),this.object_detector=e}bindScene(t){this.scene=t}onMouseDown(t){const e=this.canvas.getBoundingClientRect();if(t.clientX>e.left&&t.clientX<e.right&&t.clientY>e.top&&t.clientY<e.bottom&&(this.old_cursor_pos.xy=[t.clientX,t.clientY],this.cursor_pos.xy=this.old_cursor_pos.xy,this.mouse_moved=!1,this.mouse_pressed=!0,this.hovered_objects.length>1)){this.hovered_objects=this.hovered_objects.reverse();for(let t=1;t<this.hovered_objects.length;t++)this.hovered_objects[t].onLeave&&this.hovered_objects[t].onLeave(this.hovered_objects[t]);this.hovered_objects.splice(1)}}onMouseUp(t){this.mouse_pressed&&!this.mouse_moved?this.hovered_objects.length>0&&this.hovered_objects[0].onClick&&this.hovered_objects[0].onClick(this.hovered_objects[0],t):this.mouse_pressed&&this.mouse_moved&&this.hovered_objects.length>0&&this.hovered_objects[0].onDragEnd&&(this.hovered_objects[0].onDragEnd(this.hovered_objects[0]),this.hovered_objects=this.object_detector(this.cursor_pos)),this.mouse_moved=!1,this.mouse_pressed=!1}onMouseMove(t){const e=this.canvas.width/this.canvas.height;if(this.cursor_pos.xy=[t.clientX,t.clientY],this.mouse_pressed)this.cursor_offset.x=2*(this.cursor_pos.x-this.old_cursor_pos.x)*n.mouse_sensitivity*e/this.canvas.width,this.cursor_offset.y=-2*(this.cursor_pos.y-this.old_cursor_pos.y)*n.mouse_sensitivity/this.canvas.height,this.hovered_objects.length>0&&this.hovered_objects[0].onDrag?this.hovered_objects[0].onDrag(this.hovered_objects[0],this.cursor_offset):0==this.hovered_objects.length&&this.scene.onDrag&&this.scene.onDrag(this.scene,this.cursor_offset),this.old_cursor_pos.x=this.cursor_pos.x,this.old_cursor_pos.y=this.cursor_pos.y,this.mouse_moved=!0;else{const t=this.object_detector(this.cursor_pos);this.hovered_objects.filter(e=>-1==t.indexOf(e)).forEach(t=>t.onLeave?t.onLeave(t):{}),t.filter(t=>-1==this.hovered_objects.indexOf(t)).forEach(t=>t.onEnter?t.onEnter(t):{}),this.hovered_objects=t}}onDblCLick(t){this.hovered_objects.length>0&&this.hovered_objects[0].onDblClick&&this.hovered_objects[0].onDblClick(this.hovered_objects[0],t)}onCanvasScroll(t){this.scene.onZoom&&this.scene.onZoom(this.scene,t.deltaY/100,this.cursor_pos)}}n.mouse_sensitivity=1},"./src/LayoutBuilders/LayoutBuilder_Circle.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"LayoutBuilder_Circle",function(){return i});class i{constructor(t){this.ranges=t}layout(t,e){const s=this.ranges.R.value,i=Object.keys(t.node_groups).sort((e,s)=>t.nodes[s].length-t.nodes[e].length),n=s/i.length;let r=s,o=[];return t.quad_tree.each(t=>o.push(t)),t.quad_tree.clear(),i.forEach(e=>{let s=0;const i=t.node_groups[e],o=Object.keys(i),a=2*Math.PI/o.length;o.forEach(t=>{const e=i[t];e.position.x=r*Math.cos(s),e.position.y=r*Math.sin(s),s+=a}),r-=n}),o.forEach(t=>{const e=t.scene_object;t.x=e.position.x-e.size,t.y=e.position.y-e.size}),t.quad_tree.pushAll(o),!0}getParamsNames(){return["R"]}setConfiguration(t){this.ranges=t}getConfiguration(){return this.ranges}}},"./src/LayoutBuilders/LayoutBuilder_FruchtermanReingold.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"LayoutBuilder_FruchtermanReingold",function(){return n});var i=s("./src/Math/tsm.ts");class n{constructor(t){this.ranges=t}layout(t,e){const s=e+20,n=this.ranges.iterations_count.value,r=this.ranges.optimal_vertex_distance.value,o=this.ranges.is_bounding.value,a=Object.keys(t.nodes).length,l=r*Math.sqrt(s/a);let h=10*Math.sqrt(a);const u=(t,e,s)=>t*t/l,c=(t,e,s)=>l*l/t;let d=[];t.quad_tree.each(t=>d.push(t)),t.quad_tree.clear();const p={};Object.keys(t.nodes).forEach(e=>{p[e]=new i.vec2([0,0]);const n=s,r=2*Math.PI/a;let o=0;Object.keys(t.nodes).forEach(e=>{t.nodes[e].position.x=n*Math.cos(o),t.nodes[e].position.y=n*Math.sin(o),o+=r})});const g=new i.vec2;for(let e=0;e<n&&h>1e-5;e++)Object.keys(t.nodes).forEach(e=>{const s=t.nodes[e];Object.keys(t.nodes).forEach(n=>{if(e!=n){const r=t.nodes[n];i.vec2.difference(s.position,r.position,g);let o=g.length();const a=c(o,s.size,r.size);p[n].x-=g.x/o*a,p[n].y-=g.y/o*a,p[e].x+=g.x/o*a,p[e].y+=g.y/o*a}})}),t.links.forEach(t=>{const e=t.from,s=t.to;i.vec2.difference(e.position,s.position,g);let n=g.length();const r=Math.min(u(n,e.size,s.size),n/2);p[s.node_logic_model.id].x+=g.x/n*r,p[s.node_logic_model.id].y+=g.y/n*r,p[e.node_logic_model.id].x-=g.x/n*r,p[e.node_logic_model.id].y-=g.y/n*r}),Object.keys(t.nodes).forEach(e=>{const i=t.nodes[e];let n=p[e].length();n>0&&(console.log(n),i.position.x+=p[e].x/n*Math.min(h,n),i.position.y+=p[e].y/n*Math.min(h,n),o&&(i.position.x=Math.min(s,Math.max(-s,i.position.x)),i.position.y=Math.min(s,Math.max(-s,i.position.y)))),p[e].xy=[0,0]}),h*=.9;return d.forEach(t=>{const e=t.scene_object;t.x=e.position.x-e.size,t.y=e.position.y-e.size}),t.quad_tree.pushAll(d),!0}getParamsNames(){return["iterations_count","optimal_vertex_distance"]}getConfiguration(){return this.ranges}setConfiguration(t){this.ranges=t}}},"./src/Math/constants.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"epsilon",function(){return i});const i=1e-5},"./src/Math/mat2.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return r});var i=s("./src/Math/vec2.ts"),n=s("./src/Math/constants.ts");class r{constructor(t){this.values=new Float32Array(4),void 0!==t&&this.init(t)}at(t){return this.values[t]}init(t){for(let e=0;e<4;e++)this.values[e]=t[e];return this}reset(){for(let t=0;t<4;t++)this.values[t]=0}copy(t){t||(t=new r);for(let e=0;e<4;e++)t.values[e]=this.values[e];return t}all(){const t=[];for(let e=0;e<4;e++)t[e]=this.values[e];return t}row(t){return[this.values[2*t+0],this.values[2*t+1]]}col(t){return[this.values[t],this.values[t+2]]}equals(t,e=n.epsilon){for(let s=0;s<4;s++)if(Math.abs(this.values[s]-t.at(s))>e)return!1;return!0}determinant(){return this.values[0]*this.values[3]-this.values[2]*this.values[1]}setIdentity(){return this.values[0]=1,this.values[1]=0,this.values[2]=0,this.values[3]=1,this}transpose(){const t=this.values[1];return this.values[1]=this.values[2],this.values[2]=t,this}inverse(){let t=this.determinant();if(!t)return null;t=1/t;const e=this.values[0];return this.values[0]=t*this.values[3],this.values[1]=t*-this.values[1],this.values[2]=t*-this.values[2],this.values[3]=t*e,this}multiply(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3];return this.values[0]=e*t.at(0)+s*t.at(2),this.values[1]=e*t.at(1)+s*t.at(3),this.values[2]=i*t.at(0)+n*t.at(2),this.values[3]=i*t.at(1)+n*t.at(3),this}rotate(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3],r=Math.sin(t),o=Math.cos(t);return this.values[0]=e*o+s*r,this.values[1]=e*-r+s*o,this.values[2]=i*o+n*r,this.values[3]=i*-r+n*o,this}multiplyVec2(t,e){const s=t.x,n=t.y;return e?(e.xy=[s*this.values[0]+n*this.values[1],s*this.values[2]+n*this.values[3]],e):new i.default([s*this.values[0]+n*this.values[1],s*this.values[2]+n*this.values[3]])}scale(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3],r=t.x,o=t.y;return this.values[0]=e*r,this.values[1]=s*o,this.values[2]=i*r,this.values[3]=n*o,this}static product(t,e,s){const i=t.at(0),n=t.at(1),o=t.at(2),a=t.at(3);return s?(s.init([i*e.at(0)+n*e.at(2),i*e.at(1)+n*e.at(3),o*e.at(0)+a*e.at(2),o*e.at(1)+a*e.at(3)]),s):new r([i*e.at(0)+n*e.at(2),i*e.at(1)+n*e.at(3),o*e.at(0)+a*e.at(2),o*e.at(1)+a*e.at(3)])}}r.identity=(new r).setIdentity()},"./src/Math/mat3.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return l});var i=s("./src/Math/mat4.ts"),n=s("./src/Math/quat.ts"),r=s("./src/Math/vec2.ts"),o=s("./src/Math/vec3.ts"),a=s("./src/Math/constants.ts");class l{constructor(t){this.values=new Float32Array(9),void 0!==t&&this.init(t)}at(t){return this.values[t]}init(t){for(let e=0;e<9;e++)this.values[e]=t[e];return this}reset(){for(let t=0;t<9;t++)this.values[t]=0}copy(t){t||(t=new l);for(let e=0;e<9;e++)t.values[e]=this.values[e];return t}all(){const t=[];for(let e=0;e<9;e++)t[e]=this.values[e];return t}row(t){return[this.values[3*t+0],this.values[3*t+1],this.values[3*t+2]]}col(t){return[this.values[t],this.values[t+3],this.values[t+6]]}equals(t,e=a.epsilon){for(let s=0;s<9;s++)if(Math.abs(this.values[s]-t.at(s))>e)return!1;return!0}determinant(){const t=this.values[0],e=this.values[1],s=this.values[2],i=this.values[3],n=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8];return t*(l*n-r*a)+e*(-l*i+r*o)+s*(a*i-n*o)}setIdentity(){return this.values[0]=1,this.values[1]=0,this.values[2]=0,this.values[3]=0,this.values[4]=1,this.values[5]=0,this.values[6]=0,this.values[7]=0,this.values[8]=1,this}transpose(){const t=this.values[1],e=this.values[2],s=this.values[5];return this.values[1]=this.values[3],this.values[2]=this.values[6],this.values[3]=t,this.values[5]=this.values[7],this.values[6]=e,this.values[7]=s,this}inverse(){const t=this.values[0],e=this.values[1],s=this.values[2],i=this.values[3],n=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8],h=l*n-r*a,u=-l*i+r*o,c=a*i-n*o;let d=t*h+e*u+s*c;return d?(d=1/d,this.values[0]=h*d,this.values[1]=(-l*e+s*a)*d,this.values[2]=(r*e-s*n)*d,this.values[3]=u*d,this.values[4]=(l*t-s*o)*d,this.values[5]=(-r*t+s*i)*d,this.values[6]=c*d,this.values[7]=(-a*t+e*o)*d,this.values[8]=(n*t-e*i)*d,this):null}multiply(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3],r=this.values[4],o=this.values[5],a=this.values[6],l=this.values[7],h=this.values[8],u=t.at(0),c=t.at(1),d=t.at(2),p=t.at(3),g=t.at(4),v=t.at(5),f=t.at(6),y=t.at(7),_=t.at(8);return this.values[0]=u*e+c*n+d*a,this.values[1]=u*s+c*r+d*l,this.values[2]=u*i+c*o+d*h,this.values[3]=p*e+g*n+v*a,this.values[4]=p*s+g*r+v*l,this.values[5]=p*i+g*o+v*h,this.values[6]=f*e+y*n+_*a,this.values[7]=f*s+y*r+_*l,this.values[8]=f*i+y*o+_*h,this}multiplyVec2(t,e){const s=t.x,i=t.y;return e?(e.xy=[s*this.values[0]+i*this.values[3]+this.values[6],s*this.values[1]+i*this.values[4]+this.values[7]],e):new r.default([s*this.values[0]+i*this.values[3]+this.values[6],s*this.values[1]+i*this.values[4]+this.values[7]])}multiplyVec3(t,e){const s=t.x,i=t.y,n=t.z;return e?(e.xyz=[s*this.values[0]+i*this.values[3]+n*this.values[6],s*this.values[1]+i*this.values[4]+n*this.values[7],s*this.values[2]+i*this.values[5]+n*this.values[8]],e):new o.default([s*this.values[0]+i*this.values[3]+n*this.values[6],s*this.values[1]+i*this.values[4]+n*this.values[7],s*this.values[2]+i*this.values[5]+n*this.values[8]])}toMat4(t){return t?(t.init([this.values[0],this.values[1],this.values[2],0,this.values[3],this.values[4],this.values[5],0,this.values[6],this.values[7],this.values[8],0,0,0,0,1]),t):new i.default([this.values[0],this.values[1],this.values[2],0,this.values[3],this.values[4],this.values[5],0,this.values[6],this.values[7],this.values[8],0,0,0,0,1])}toQuat(){const t=this.values[0],e=this.values[1],s=this.values[2],i=this.values[3],r=this.values[4],o=this.values[5],a=this.values[6],l=this.values[7],h=this.values[8],u=t-r-h,c=r-t-h,d=h-t-r;let p=0,g=t+r+h;u>g&&(g=u,p=1),c>g&&(g=c,p=2),d>g&&(g=d,p=3);const v=.5*Math.sqrt(g+1),f=.25/v,y=new n.default;switch(p){case 0:y.w=v,y.x=(o-l)*f,y.y=(a-s)*f,y.z=(e-i)*f;break;case 1:y.w=(o-l)*f,y.x=v,y.y=(e+i)*f,y.z=(a+s)*f;break;case 2:y.w=(a-s)*f,y.x=(e+i)*f,y.y=v,y.z=(o+l)*f;break;case 3:y.w=(e-i)*f,y.x=(a+s)*f,y.y=(o+l)*f,y.z=v}return y}rotate(t,e){let s=e.x,i=e.y,n=e.z,r=Math.sqrt(s*s+i*i+n*n);if(!r)return null;1!==r&&(s*=r=1/r,i*=r,n*=r);const o=Math.sin(t),a=Math.cos(t),l=1-a,h=this.values[0],u=this.values[1],c=this.values[2],d=this.values[4],p=this.values[5],g=this.values[6],v=this.values[8],f=this.values[9],y=this.values[10],_=s*s*l+a,m=i*s*l+n*o,b=n*s*l-i*o,x=s*i*l-n*o,w=i*i*l+a,E=n*i*l+s*o,j=s*n*l+i*o,z=i*n*l-s*o,S=n*n*l+a;return this.values[0]=h*_+d*m+v*b,this.values[1]=u*_+p*m+f*b,this.values[2]=c*_+g*m+y*b,this.values[3]=h*x+d*w+v*E,this.values[4]=u*x+p*w+f*E,this.values[5]=c*x+g*w+y*E,this.values[6]=h*j+d*z+v*S,this.values[7]=u*j+p*z+f*S,this.values[8]=c*j+g*z+y*S,this}static product(t,e,s){const i=t.at(0),n=t.at(1),r=t.at(2),o=t.at(3),a=t.at(4),h=t.at(5),u=t.at(6),c=t.at(7),d=t.at(8),p=e.at(0),g=e.at(1),v=e.at(2),f=e.at(3),y=e.at(4),_=e.at(5),m=e.at(6),b=e.at(7),x=e.at(8);return s?(s.init([p*i+g*o+v*u,p*n+g*a+v*c,p*r+g*h+v*d,f*i+y*o+_*u,f*n+y*a+_*c,f*r+y*h+_*d,m*i+b*o+x*u,m*n+b*a+x*c,m*r+b*h+x*d]),s):new l([p*i+g*o+v*u,p*n+g*a+v*c,p*r+g*h+v*d,f*i+y*o+_*u,f*n+y*a+_*c,f*r+y*h+_*d,m*i+b*o+x*u,m*n+b*a+x*c,m*r+b*h+x*d])}}l.identity=(new l).setIdentity()},"./src/Math/mat4.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return a});var i=s("./src/Math/mat3.ts"),n=s("./src/Math/vec3.ts"),r=s("./src/Math/vec4.ts"),o=s("./src/Math/constants.ts");class a{constructor(t){this.values=new Float32Array(16),void 0!==t&&this.init(t)}at(t){return this.values[t]}init(t){for(let e=0;e<16;e++)this.values[e]=t[e];return this}reset(){for(let t=0;t<16;t++)this.values[t]=0}copy(t){t||(t=new a);for(let e=0;e<16;e++)t.values[e]=this.values[e];return t}all(){const t=[];for(let e=0;e<16;e++)t[e]=this.values[e];return t}row(t){return[this.values[4*t+0],this.values[4*t+1],this.values[4*t+2],this.values[4*t+3]]}col(t){return[this.values[t],this.values[t+4],this.values[t+8],this.values[t+12]]}equals(t,e=o.epsilon){for(let s=0;s<16;s++)if(Math.abs(this.values[s]-t.at(s))>e)return!1;return!0}determinant(){const t=this.values[0],e=this.values[1],s=this.values[2],i=this.values[3],n=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8],h=this.values[9],u=this.values[10],c=this.values[11],d=this.values[12],p=this.values[13],g=this.values[14],v=this.values[15];return(t*r-e*n)*(u*v-c*g)-(t*o-s*n)*(h*v-c*p)+(t*a-i*n)*(h*g-u*p)+(e*o-s*r)*(l*v-c*d)-(e*a-i*r)*(l*g-u*d)+(s*a-i*o)*(l*p-h*d)}setIdentity(){return this.values[0]=1,this.values[1]=0,this.values[2]=0,this.values[3]=0,this.values[4]=0,this.values[5]=1,this.values[6]=0,this.values[7]=0,this.values[8]=0,this.values[9]=0,this.values[10]=1,this.values[11]=0,this.values[12]=0,this.values[13]=0,this.values[14]=0,this.values[15]=1,this}transpose(){const t=this.values[1],e=this.values[2],s=this.values[3],i=this.values[6],n=this.values[7],r=this.values[11];return this.values[1]=this.values[4],this.values[2]=this.values[8],this.values[3]=this.values[12],this.values[4]=t,this.values[6]=this.values[9],this.values[7]=this.values[13],this.values[8]=e,this.values[9]=i,this.values[11]=this.values[14],this.values[12]=s,this.values[13]=n,this.values[14]=r,this}inverse(){const t=this.values[0],e=this.values[1],s=this.values[2],i=this.values[3],n=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8],h=this.values[9],u=this.values[10],c=this.values[11],d=this.values[12],p=this.values[13],g=this.values[14],v=this.values[15],f=t*r-e*n,y=t*o-s*n,_=t*a-i*n,m=e*o-s*r,b=e*a-i*r,x=s*a-i*o,w=l*p-h*d,E=l*g-u*d,j=l*v-c*d,z=h*g-u*p,S=h*v-c*p,A=u*v-c*g;let k=f*A-y*S+_*z+m*j-b*E+x*w;return k?(k=1/k,this.values[0]=(r*A-o*S+a*z)*k,this.values[1]=(-e*A+s*S-i*z)*k,this.values[2]=(p*x-g*b+v*m)*k,this.values[3]=(-h*x+u*b-c*m)*k,this.values[4]=(-n*A+o*j-a*E)*k,this.values[5]=(t*A-s*j+i*E)*k,this.values[6]=(-d*x+g*_-v*y)*k,this.values[7]=(l*x-u*_+c*y)*k,this.values[8]=(n*S-r*j+a*w)*k,this.values[9]=(-t*S+e*j-i*w)*k,this.values[10]=(d*b-p*_+v*f)*k,this.values[11]=(-l*b+h*_-c*f)*k,this.values[12]=(-n*z+r*E-o*w)*k,this.values[13]=(t*z-e*E+s*w)*k,this.values[14]=(-d*m+p*y-g*f)*k,this.values[15]=(l*m-h*y+u*f)*k,this):null}multiply(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3],r=this.values[4],o=this.values[5],a=this.values[6],l=this.values[7],h=this.values[8],u=this.values[9],c=this.values[10],d=this.values[11],p=this.values[12],g=this.values[13],v=this.values[14],f=this.values[15];let y=t.at(0),_=t.at(1),m=t.at(2),b=t.at(3);return this.values[0]=y*e+_*r+m*h+b*p,this.values[1]=y*s+_*o+m*u+b*g,this.values[2]=y*i+_*a+m*c+b*v,this.values[3]=y*n+_*l+m*d+b*f,y=t.at(4),_=t.at(5),m=t.at(6),b=t.at(7),this.values[4]=y*e+_*r+m*h+b*p,this.values[5]=y*s+_*o+m*u+b*g,this.values[6]=y*i+_*a+m*c+b*v,this.values[7]=y*n+_*l+m*d+b*f,y=t.at(8),_=t.at(9),m=t.at(10),b=t.at(11),this.values[8]=y*e+_*r+m*h+b*p,this.values[9]=y*s+_*o+m*u+b*g,this.values[10]=y*i+_*a+m*c+b*v,this.values[11]=y*n+_*l+m*d+b*f,y=t.at(12),_=t.at(13),m=t.at(14),b=t.at(15),this.values[12]=y*e+_*r+m*h+b*p,this.values[13]=y*s+_*o+m*u+b*g,this.values[14]=y*i+_*a+m*c+b*v,this.values[15]=y*n+_*l+m*d+b*f,this}multiplyVec3(t){const e=t.x,s=t.y,i=t.z;return new n.default([this.values[0]*e+this.values[4]*s+this.values[8]*i+this.values[12],this.values[1]*e+this.values[5]*s+this.values[9]*i+this.values[13],this.values[2]*e+this.values[6]*s+this.values[10]*i+this.values[14]])}multiplyVec4(t,e){e||(e=new r.default);const s=t.x,i=t.y,n=t.z,o=t.w;return e.x=this.values[0]*s+this.values[4]*i+this.values[8]*n+this.values[12]*o,e.y=this.values[1]*s+this.values[5]*i+this.values[9]*n+this.values[13]*o,e.z=this.values[2]*s+this.values[6]*i+this.values[10]*n+this.values[14]*o,e.w=this.values[3]*s+this.values[7]*i+this.values[11]*n+this.values[15]*o,e}toMat3(){return new i.default([this.values[0],this.values[1],this.values[2],this.values[4],this.values[5],this.values[6],this.values[8],this.values[9],this.values[10]])}toInverseMat3(){const t=this.values[0],e=this.values[1],s=this.values[2],n=this.values[4],r=this.values[5],o=this.values[6],a=this.values[8],l=this.values[9],h=this.values[10],u=h*r-o*l,c=-h*n+o*a,d=l*n-r*a;let p=t*u+e*c+s*d;return p?(p=1/p,new i.default([u*p,(-h*e+s*l)*p,(o*e-s*r)*p,c*p,(h*t-s*a)*p,(-o*t+s*n)*p,d*p,(-l*t+e*a)*p,(r*t-e*n)*p])):null}translate(t){const e=t.x,s=t.y,i=t.z;return this.values[12]+=this.values[0]*e+this.values[4]*s+this.values[8]*i,this.values[13]+=this.values[1]*e+this.values[5]*s+this.values[9]*i,this.values[14]+=this.values[2]*e+this.values[6]*s+this.values[10]*i,this.values[15]+=this.values[3]*e+this.values[7]*s+this.values[11]*i,this}scale(t){const e=t.x,s=t.y,i=t.z;return this.values[0]*=e,this.values[1]*=e,this.values[2]*=e,this.values[3]*=e,this.values[4]*=s,this.values[5]*=s,this.values[6]*=s,this.values[7]*=s,this.values[8]*=i,this.values[9]*=i,this.values[10]*=i,this.values[11]*=i,this}rotate(t,e){let s=e.x,i=e.y,n=e.z,r=Math.sqrt(s*s+i*i+n*n);if(!r)return null;1!==r&&(s*=r=1/r,i*=r,n*=r);const o=Math.sin(t),a=Math.cos(t),l=1-a,h=this.values[0],u=this.values[1],c=this.values[2],d=this.values[3],p=this.values[4],g=this.values[5],v=this.values[6],f=this.values[7],y=this.values[8],_=this.values[9],m=this.values[10],b=this.values[11],x=s*s*l+a,w=i*s*l+n*o,E=n*s*l-i*o,j=s*i*l-n*o,z=i*i*l+a,S=n*i*l+s*o,A=s*n*l+i*o,k=i*n*l-s*o,O=n*n*l+a;return this.values[0]=h*x+p*w+y*E,this.values[1]=u*x+g*w+_*E,this.values[2]=c*x+v*w+m*E,this.values[3]=d*x+f*w+b*E,this.values[4]=h*j+p*z+y*S,this.values[5]=u*j+g*z+_*S,this.values[6]=c*j+v*z+m*S,this.values[7]=d*j+f*z+b*S,this.values[8]=h*A+p*k+y*O,this.values[9]=u*A+g*k+_*O,this.values[10]=c*A+v*k+m*O,this.values[11]=d*A+f*k+b*O,this}static frustum(t,e,s,i,n,r){const o=e-t,l=i-s,h=r-n;return new a([2*n/o,0,0,0,0,2*n/l,0,0,(e+t)/o,(i+s)/l,-(r+n)/h,-1,0,0,-r*n*2/h,0])}static perspective(t,e,s,i){const n=s*Math.tan(t*Math.PI/360),r=n*e;return a.frustum(-r,r,-n,n,s,i)}static orthographic(t,e,s,i,n,r){const o=e-t,l=i-s,h=r-n;return new a([2/o,0,0,0,0,2/l,0,0,0,0,-2/h,0,-(t+e)/o,-(i+s)/l,-(r+n)/h,1])}static lookAt(t,e,s=n.default.up){if(t.equals(e))return this.identity;const i=n.default.difference(t,e).normalize(),r=n.default.cross(s,i).normalize(),o=n.default.cross(i,r).normalize();return new a([r.x,o.x,i.x,0,r.y,o.y,i.y,0,r.z,o.z,i.z,0,-n.default.dot(r,t),-n.default.dot(o,t),-n.default.dot(i,t),1])}static product(t,e,s){const i=t.at(0),n=t.at(1),r=t.at(2),o=t.at(3),l=t.at(4),h=t.at(5),u=t.at(6),c=t.at(7),d=t.at(8),p=t.at(9),g=t.at(10),v=t.at(11),f=t.at(12),y=t.at(13),_=t.at(14),m=t.at(15),b=e.at(0),x=e.at(1),w=e.at(2),E=e.at(3),j=e.at(4),z=e.at(5),S=e.at(6),A=e.at(7),k=e.at(8),O=e.at(9),M=e.at(10),C=e.at(11),T=e.at(12),N=e.at(13),R=e.at(14),F=e.at(15);return s?(s.init([b*i+x*l+w*d+E*f,b*n+x*h+w*p+E*y,b*r+x*u+w*g+E*_,b*o+x*c+w*v+E*m,j*i+z*l+S*d+A*f,j*n+z*h+S*p+A*y,j*r+z*u+S*g+A*_,j*o+z*c+S*v+A*m,k*i+O*l+M*d+C*f,k*n+O*h+M*p+C*y,k*r+O*u+M*g+C*_,k*o+O*c+M*v+C*m,T*i+N*l+R*d+F*f,T*n+N*h+R*p+F*y,T*r+N*u+R*g+F*_,T*o+N*c+R*v+F*m]),s):new a([b*i+x*l+w*d+E*f,b*n+x*h+w*p+E*y,b*r+x*u+w*g+E*_,b*o+x*c+w*v+E*m,j*i+z*l+S*d+A*f,j*n+z*h+S*p+A*y,j*r+z*u+S*g+A*_,j*o+z*c+S*v+A*m,k*i+O*l+M*d+C*f,k*n+O*h+M*p+C*y,k*r+O*u+M*g+C*_,k*o+O*c+M*v+C*m,T*i+N*l+R*d+F*f,T*n+N*h+R*p+F*y,T*r+N*u+R*g+F*_,T*o+N*c+R*v+F*m])}}a.identity=(new a).setIdentity()},"./src/Math/quat.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return a});var i=s("./src/Math/mat3.ts"),n=s("./src/Math/mat4.ts"),r=s("./src/Math/vec3.ts"),o=s("./src/Math/constants.ts");class a{constructor(t){this.values=new Float32Array(4),void 0!==t&&(this.xyzw=t)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}get w(){return this.values[3]}get xy(){return[this.values[0],this.values[1]]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}get xyzw(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set z(t){this.values[2]=t}set w(t){this.values[3]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}set xyz(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}set xyzw(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3]}at(t){return this.values[t]}reset(){for(let t=0;t<4;t++)this.values[t]=0}copy(t){t||(t=new a);for(let e=0;e<4;e++)t.values[e]=this.values[e];return t}roll(){const t=this.x,e=this.y,s=this.z,i=this.w;return Math.atan2(2*(t*e+i*s),i*i+t*t-e*e-s*s)}pitch(){const t=this.x,e=this.y,s=this.z,i=this.w;return Math.atan2(2*(e*s+i*t),i*i-t*t-e*e+s*s)}yaw(){return Math.asin(2*(this.x*this.z-this.w*this.y))}equals(t,e=o.epsilon){for(let s=0;s<4;s++)if(Math.abs(this.values[s]-t.at(s))>e)return!1;return!0}setIdentity(){return this.x=0,this.y=0,this.z=0,this.w=1,this}calculateW(){const t=this.x,e=this.y,s=this.z;return this.w=-Math.sqrt(Math.abs(1-t*t-e*e-s*s)),this}inverse(){const t=a.dot(this,this);if(!t)return this.xyzw=[0,0,0,0],this;const e=t?1/t:0;return this.x*=-e,this.y*=-e,this.z*=-e,this.w*=e,this}conjugate(){return this.values[0]*=-1,this.values[1]*=-1,this.values[2]*=-1,this}length(){const t=this.x,e=this.y,s=this.z,i=this.w;return Math.sqrt(t*t+e*e+s*s+i*i)}normalize(t){t||(t=this);const e=this.x,s=this.y,i=this.z,n=this.w;let r=Math.sqrt(e*e+s*s+i*i+n*n);return r?(r=1/r,t.x=e*r,t.y=s*r,t.z=i*r,t.w=n*r,t):(t.x=0,t.y=0,t.z=0,t.w=0,t)}add(t){for(let e=0;e<4;e++)this.values[e]+=t.at(e);return this}multiply(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3],r=t.x,o=t.y,a=t.z,l=t.w;return this.x=e*l+n*r+s*a-i*o,this.y=s*l+n*o+i*r-e*a,this.z=i*l+n*a+e*o-s*r,this.w=n*l-e*r-s*o-i*a,this}multiplyVec3(t,e){e||(e=new r.default);const s=t.x,i=t.y,n=t.z,o=this.x,a=this.y,l=this.z,h=this.w,u=h*s+a*n-l*i,c=h*i+l*s-o*n,d=h*n+o*i-a*s,p=-o*s-a*i-l*n;return e.x=u*h+p*-o+c*-l-d*-a,e.y=c*h+p*-a+d*-o-u*-l,e.z=d*h+p*-l+u*-a-c*-o,e}toMat3(t){t||(t=new i.default);const e=this.x,s=this.y,n=this.z,r=this.w,o=e+e,a=s+s,l=n+n,h=e*o,u=e*a,c=e*l,d=s*a,p=s*l,g=n*l,v=r*o,f=r*a,y=r*l;return t.init([1-(d+g),u+y,c-f,u-y,1-(h+g),p+v,c+f,p-v,1-(h+d)]),t}toMat4(t){t||(t=new n.default);const e=this.x,s=this.y,i=this.z,r=this.w,o=e+e,a=s+s,l=i+i,h=e*o,u=e*a,c=e*l,d=s*a,p=s*l,g=i*l,v=r*o,f=r*a,y=r*l;return t.init([1-(d+g),u+y,c-f,0,u-y,1-(h+g),p+v,0,c+f,p-v,1-(h+d),0,0,0,0,1]),t}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}static sum(t,e,s){return s||(s=new a),s.x=t.x+e.x,s.y=t.y+e.y,s.z=t.z+e.z,s.w=t.w+e.w,s}static product(t,e,s){s||(s=new a);const i=t.x,n=t.y,r=t.z,o=t.w,l=e.x,h=e.y,u=e.z,c=e.w;return s.x=i*c+o*l+n*u-r*h,s.y=n*c+o*h+r*l-i*u,s.z=r*c+o*u+i*h-n*l,s.w=o*c-i*l-n*h-r*u,s}static cross(t,e,s){s||(s=new a);const i=t.x,n=t.y,r=t.z,o=t.w,l=e.x,h=e.y,u=e.z,c=e.w;return s.x=o*u+r*c+i*h-n*l,s.y=o*c-i*l-n*h-r*u,s.z=o*l+i*c+n*u-r*h,s.w=o*h+n*c+r*l-i*u,s}static shortMix(t,e,s,i){if(i||(i=new a),s<=0)return i.xyzw=t.xyzw,i;if(s>=1)return i.xyzw=e.xyzw,i;let n=a.dot(t,e);const r=e.copy();let o,l;if(n<0&&(r.inverse(),n=-n),n>.9999)o=1-s,l=0+s;else{const t=Math.sqrt(1-n*n),e=Math.atan2(t,n),i=1/t;o=Math.sin((1-s)*e)*i,l=Math.sin((0+s)*e)*i}return i.x=o*t.x+l*r.x,i.y=o*t.y+l*r.y,i.z=o*t.z+l*r.z,i.w=o*t.w+l*r.w,i}static mix(t,e,s,i){i||(i=new a);const n=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w;if(Math.abs(n)>=1)return i.xyzw=t.xyzw,i;const r=Math.acos(n),o=Math.sqrt(1-n*n);if(Math.abs(o)<.001)return i.x=.5*t.x+.5*e.x,i.y=.5*t.y+.5*e.y,i.z=.5*t.z+.5*e.z,i.w=.5*t.w+.5*e.w,i;const l=Math.sin((1-s)*r)/o,h=Math.sin(s*r)/o;return i.x=t.x*l+e.x*h,i.y=t.y*l+e.y*h,i.z=t.z*l+e.z*h,i.w=t.w*l+e.w*h,i}static fromAxisAngle(t,e,s){s||(s=new a),e*=.5;const i=Math.sin(e);return s.x=t.x*i,s.y=t.y*i,s.z=t.z*i,s.w=Math.cos(e),s}}a.identity=(new a).setIdentity()},"./src/Math/tsm.ts":function(t,e,s){"use strict";s.r(e);var i=s("./src/Math/mat2.ts");s.d(e,"mat2",function(){return i.default});var n=s("./src/Math/mat3.ts");s.d(e,"mat3",function(){return n.default});var r=s("./src/Math/mat4.ts");s.d(e,"mat4",function(){return r.default});var o=s("./src/Math/quat.ts");s.d(e,"quat",function(){return o.default});var a=s("./src/Math/vec2.ts");s.d(e,"vec2",function(){return a.default});var l=s("./src/Math/vec3.ts");s.d(e,"vec3",function(){return l.default});var h=s("./src/Math/vec4.ts");s.d(e,"vec4",function(){return h.default})},"./src/Math/vec2.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return r});var i=s("./src/Math/vec3.ts"),n=s("./src/Math/constants.ts");class r{constructor(t){this.values=new Float32Array(2),void 0!==t&&(this.xy=t)}get x(){return this.values[0]}get y(){return this.values[1]}get xy(){return[this.values[0],this.values[1]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}at(t){return this.values[t]}reset(){this.x=0,this.y=0}copy(t){return t||(t=new r),t.x=this.x,t.y=this.y,t}negate(t){return t||(t=this),t.x=-this.x,t.y=-this.y,t}equals(t,e=n.epsilon){return!(Math.abs(this.x-t.x)>e)&&!(Math.abs(this.y-t.y)>e)}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.x,e=this.y;return t*t+e*e}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}divide(t){return this.x/=t.x,this.y/=t.y,this}scale(t,e){return e||(e=this),e.x*=t,e.y*=t,e}normalize(t){t||(t=this);let e=this.length();return 1===e?this:0===e?(t.x=0,t.y=0,t):(e=1/e,t.x*=e,t.y*=e,t)}multiplyMat2(t,e){return e||(e=this),t.multiplyVec2(this,e)}multiplyMat3(t,e){return e||(e=this),t.multiplyVec2(this,e)}static cross(t,e,s){s||(s=new i.default);const n=t.x,r=t.y,o=e.x,a=n*e.y-r*o;return s.x=0,s.y=0,s.z=a,s}static dot(t,e){return t.x*e.x+t.y*e.y}static distance(t,e){return Math.sqrt(this.squaredDistance(t,e))}static squaredDistance(t,e){const s=e.x-t.x,i=e.y-t.y;return s*s+i*i}static direction(t,e,s){s||(s=new r);const i=t.x-e.x,n=t.y-e.y;let o=Math.sqrt(i*i+n*n);return 0===o?(s.x=0,s.y=0,s):(o=1/o,s.x=i*o,s.y=n*o,s)}static mix(t,e,s,i){i||(i=new r);const n=t.x,o=t.y,a=e.x,l=e.y;return i.x=n+s*(a-n),i.y=o+s*(l-o),i}static sum(t,e,s){return s||(s=new r),s.x=t.x+e.x,s.y=t.y+e.y,s}static difference(t,e,s){return s||(s=new r),s.x=t.x-e.x,s.y=t.y-e.y,s}static product(t,e,s){return s||(s=new r),s.x=t.x*e.x,s.y=t.y*e.y,s}static quotient(t,e,s){return s||(s=new r),s.x=t.x/e.x,s.y=t.y/e.y,s}}r.zero=new r([0,0]),r.one=new r([1,1])},"./src/Math/vec3.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return r});var i=s("./src/Math/quat.ts"),n=s("./src/Math/constants.ts");class r{constructor(t){this.values=new Float32Array(3),void 0!==t&&(this.xyz=t)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}get xy(){return[this.values[0],this.values[1]]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set z(t){this.values[2]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}set xyz(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}at(t){return this.values[t]}reset(){this.x=0,this.y=0,this.z=0}copy(t){return t||(t=new r),t.x=this.x,t.y=this.y,t.z=this.z,t}negate(t){return t||(t=this),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}equals(t,e=n.epsilon){return!(Math.abs(this.x-t.x)>e)&&(!(Math.abs(this.y-t.y)>e)&&!(Math.abs(this.z-t.z)>e))}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.x,e=this.y,s=this.z;return t*t+e*e+s*s}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}scale(t,e){return e||(e=this),e.x*=t,e.y*=t,e.z*=t,e}normalize(t){t||(t=this);let e=this.length();return 1===e?this:0===e?(t.x=0,t.y=0,t.z=0,t):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t)}multiplyByMat3(t,e){return e||(e=this),t.multiplyVec3(this,e)}multiplyByQuat(t,e){return e||(e=this),t.multiplyVec3(this,e)}toQuat(t){t||(t=new i.default);const e=new r,s=new r;return e.x=Math.cos(.5*this.x),s.x=Math.sin(.5*this.x),e.y=Math.cos(.5*this.y),s.y=Math.sin(.5*this.y),e.z=Math.cos(.5*this.z),s.z=Math.sin(.5*this.z),t.x=s.x*e.y*e.z-e.x*s.y*s.z,t.y=e.x*s.y*e.z+s.x*e.y*s.z,t.z=e.x*e.y*s.z-s.x*s.y*e.z,t.w=e.x*e.y*e.z+s.x*s.y*s.z,t}static cross(t,e,s){s||(s=new r);const i=t.x,n=t.y,o=t.z,a=e.x,l=e.y,h=e.z;return s.x=n*h-o*l,s.y=o*a-i*h,s.z=i*l-n*a,s}static dot(t,e){const s=t.x,i=t.y,n=t.z;return s*e.x+i*e.y+n*e.z}static distance(t,e){e.x,t.x,e.y,t.y,e.z,t.z;return Math.sqrt(this.squaredDistance(t,e))}static squaredDistance(t,e){const s=e.x-t.x,i=e.y-t.y,n=e.z-t.z;return s*s+i*i+n*n}static direction(t,e,s){s||(s=new r);const i=t.x-e.x,n=t.y-e.y,o=t.z-e.z;let a=Math.sqrt(i*i+n*n+o*o);return 0===a?(s.x=0,s.y=0,s.z=0,s):(a=1/a,s.x=i*a,s.y=n*a,s.z=o*a,s)}static mix(t,e,s,i){return i||(i=new r),i.x=t.x+s*(e.x-t.x),i.y=t.y+s*(e.y-t.y),i.z=t.z+s*(e.z-t.z),i}static sum(t,e,s){return s||(s=new r),s.x=t.x+e.x,s.y=t.y+e.y,s.z=t.z+e.z,s}static difference(t,e,s){return s||(s=new r),s.x=t.x-e.x,s.y=t.y-e.y,s.z=t.z-e.z,s}static product(t,e,s){return s||(s=new r),s.x=t.x*e.x,s.y=t.y*e.y,s.z=t.z*e.z,s}static quotient(t,e,s){return s||(s=new r),s.x=t.x/e.x,s.y=t.y/e.y,s.z=t.z/e.z,s}}r.zero=new r([0,0,0]),r.one=new r([1,1,1]),r.up=new r([0,1,0]),r.right=new r([1,0,0]),r.forward=new r([0,0,1])},"./src/Math/vec4.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"default",function(){return n});var i=s("./src/Math/constants.ts");class n{constructor(t){this.values=new Float32Array(4),void 0!==t&&(this.xyzw=t)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}get w(){return this.values[3]}get xy(){return[this.values[0],this.values[1]]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}get xyzw(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set z(t){this.values[2]=t}set w(t){this.values[3]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}set xyz(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}set xyzw(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3]}get r(){return this.values[0]}get g(){return this.values[1]}get b(){return this.values[2]}get a(){return this.values[3]}get rg(){return[this.values[0],this.values[1]]}get rgb(){return[this.values[0],this.values[1],this.values[2]]}get rgba(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set r(t){this.values[0]=t}set g(t){this.values[1]=t}set b(t){this.values[2]=t}set a(t){this.values[3]=t}set rg(t){this.values[0]=t[0],this.values[1]=t[1]}set rgb(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}set rgba(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3]}at(t){return this.values[t]}reset(){this.x=0,this.y=0,this.z=0,this.w=0}copy(t){return t||(t=new n),t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,t}negate(t){return t||(t=this),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=-this.w,t}equals(t,e=i.epsilon){return!(Math.abs(this.x-t.x)>e)&&(!(Math.abs(this.y-t.y)>e)&&(!(Math.abs(this.z-t.z)>e)&&!(Math.abs(this.w-t.w)>e)))}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.x,e=this.y,s=this.z,i=this.w;return t*t+e*e+s*s+i*i}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}scale(t,e){return e||(e=this),e.x*=t,e.y*=t,e.z*=t,e.w*=t,e}normalize(t){t||(t=this);let e=this.length();return 1===e?this:0===e?(t.x*=0,t.y*=0,t.z*=0,t.w*=0,t):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e,t)}multiplyMat4(t,e){return e||(e=this),t.multiplyVec4(this,e)}static mix(t,e,s,i){return i||(i=new n),i.x=t.x+s*(e.x-t.x),i.y=t.y+s*(e.y-t.y),i.z=t.z+s*(e.z-t.z),i.w=t.w+s*(e.w-t.w),i}static sum(t,e,s){return s||(s=new n),s.x=t.x+e.x,s.y=t.y+e.y,s.z=t.z+e.z,s.w=t.w+e.w,s}static difference(t,e,s){return s||(s=new n),s.x=t.x-e.x,s.y=t.y-e.y,s.z=t.z-e.z,s.w=t.w-e.w,s}static product(t,e,s){return s||(s=new n),s.x=t.x*e.x,s.y=t.y*e.y,s.z=t.z*e.z,s.w=t.w*e.w,s}static quotient(t,e,s){return s||(s=new n),s.x=t.x/e.x,s.y=t.y/e.y,s.z=t.z/e.z,s.w=t.w/e.w,s}}n.zero=new n([0,0,0,1]),n.one=new n([1,1,1,1])},"./src/Renderers/CircleNodeRenderer.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"CircleNodeRenderer",function(){return o});var i=s("./src/Renderers/_Utils.ts");const n=8*Float32Array.BYTES_PER_ELEMENT,r=Uint16Array.BYTES_PER_ELEMENT;class o{constructor(){this.default_max_objects_count=64,this.vertex_shader_source="\n        attribute vec2 a_vertexPos;    \n        attribute vec2 a_uv;     \n        attribute vec4 a_color;\n        uniform mat3 u_pv;\n        varying vec2 v_uv;\n        varying vec4 v_color;\n\n        void main(void)\n        {\n            v_color = a_color;\n            v_uv = a_uv;\n            gl_Position = vec4(u_pv * vec3(a_vertexPos, 1), 1);\n        }",this.fragment_shader_source="\n        precision mediump float;\n        varying vec2 v_uv;\n        varying vec4 v_color;\n        const float inEdgeBorderR = 0.85;\n        const float outEdgeBorderR = 0.95;\n        const float maxR = 1.0;\n\n        void main(void) {\n            float d = length(v_uv);\n            vec4 borderColor = vec4(0, 0, 0, 1);\n            if (d < inEdgeBorderR)\n                gl_FragColor = v_color;\n            else if (d < outEdgeBorderR)\n            {\n                float coeff = smoothstep(inEdgeBorderR, outEdgeBorderR, d);\n                gl_FragColor = mix(v_color, borderColor, coeff);\n            }\n            else if (d < maxR)\n            {\n                gl_FragColor = borderColor;\n            }\n            else discard;         \n        }",this.shader_source={vertex_shader:this.vertex_shader_source,fragment_shader:this.fragment_shader_source,attributes:["a_vertexPos","a_color","a_uv"],uniforms:["u_pv"]},this.geometry={vertices:new Float32Array(4*n*this.default_max_objects_count),indices:new Uint16Array(6*r*this.default_max_objects_count),objects_count:0,max_objects_count:this.default_max_objects_count},this.offsets=new Map,this.gl=null,this.program=null,this.objects=[]}render(t){this.gl.useProgram(this.program.program),this.gl.uniformMatrix3fv(this.program.uniforms.u_pv,!1,t.all()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.geometry.vertices,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.vertexAttribPointer(this.program.attributes.a_vertexPos,2,this.gl.FLOAT,!1,n,0),this.gl.enableVertexAttribArray(this.program.attributes.a_uv),this.gl.vertexAttribPointer(this.program.attributes.a_uv,2,this.gl.FLOAT,!1,n,2*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(this.program.attributes.a_color),this.gl.vertexAttribPointer(this.program.attributes.a_color,4,this.gl.FLOAT,!1,n,4*Float32Array.BYTES_PER_ELEMENT),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.geometry.indices,this.gl.DYNAMIC_DRAW),this.gl.drawElements(this.gl.TRIANGLES,6*this.geometry.objects_count,this.gl.UNSIGNED_SHORT,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.disableVertexAttribArray(this.program.attributes.a_uv),this.gl.disableVertexAttribArray(this.program.attributes.a_color)}bindContext(t,e){this.program&&(this.gl.deleteProgram(this.program),this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo)),this.gl=t,this.ibo=t.createBuffer(),this.vbo=t.createBuffer(),this.program=e.compile(t,this.shader_source)}addObject(t){if(this.geometry.objects_count==this.geometry.max_objects_count){const t=this.geometry;t.vertices=Object(i.resizeFloat32Array)(2*t.vertices.length,t.vertices),t.indices=Object(i.resizeUint16Array)(2*t.indices.length,t.indices),t.max_objects_count*=2}const e=t;if(!this.offsets.has(e)){const s=this.geometry.objects_count;this.offsets.set(e,s);const i=o.makeVerticesArray(e),n=o.makeIndicesArray(4*s);this.geometry.vertices.set(i,32*s),this.geometry.indices.set(n,6*s),this.objects.push(t),this.geometry.objects_count++}}clearObjects(){this.offsets.clear(),this.geometry.objects_count=0,this.objects=[]}deleteObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),s=this.geometry.objects_count-1;if(this.offsets.delete(e),t!=s&&(this.offsets.set(this.objects[s],t),this.objects[t]=this.objects[s],this.geometry.vertices.copyWithin(32*t,32*s,32*s+32)),this.objects.pop(),this.geometry.objects_count--,this.geometry.objects_count>this.default_max_objects_count&&this.geometry.objects_count<=this.geometry.max_objects_count/2){const t=this.geometry;t.vertices=Object(i.resizeFloat32Array)(t.vertices.length/2,t.vertices),t.indices=Object(i.resizeUint16Array)(t.indices.length/2,t.indices),t.max_objects_count/=2}}}updateObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),s=o.makeVerticesArray(e);this.geometry.vertices.set(s,32*t)}}sortObjects(){}static makeVerticesArray(t){const e=t.color;return[t.position.x-t.size,t.position.y-t.size,-1,-1,e.r,e.g,e.b,e.a,t.position.x+t.size,t.position.y-t.size,1,-1,e.r,e.g,e.b,e.a,t.position.x+t.size,t.position.y+t.size,1,1,e.r,e.g,e.b,e.a,t.position.x-t.size,t.position.y+t.size,-1,1,e.r,e.g,e.b,e.a]}static makeIndicesArray(t){return[t,1+t,2+t,t,2+t,3+t]}}},"./src/Renderers/OrientedStraightLinkRenderer.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"OrientedStraightLinkRenderer",function(){return a});var i=s("./src/Renderers/_Utils.ts"),n=s("./src/@types/Color.ts");const r=6*Float32Array.BYTES_PER_ELEMENT,o=Uint16Array.BYTES_PER_ELEMENT;class a{constructor(){this.default_max_objects_count=64,this.vertex_shader_source="\n        attribute vec2 a_vertexPos;\n        attribute vec4 a_color;\n        uniform mat3 u_pv;\n        varying vec4 v_color;\n\n        void main(void)\n        {\n            v_color = a_color;\n            gl_Position = vec4(u_pv * vec3(a_vertexPos, 1), 1);\n        }",this.fragment_shader_source="\n        precision mediump float;\n        varying vec4 v_color;\n\n        void main(void) {\n            gl_FragColor = v_color;\n        }",this.shader_source={vertex_shader:this.vertex_shader_source,fragment_shader:this.fragment_shader_source,attributes:["a_vertexPos","a_color"],uniforms:["u_pv"]},this.geometry={vertices:new Float32Array(7*r*this.default_max_objects_count),indices:new Uint16Array(9*o*this.default_max_objects_count),objects_count:0,max_objects_count:this.default_max_objects_count},this.offsets=new Map,this.objects=[]}bindContext(t,e){this.program&&(this.gl.deleteProgram(this.program.program),this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo)),this.gl=t,this.ibo=t.createBuffer(),this.vbo=t.createBuffer(),this.program=e.compile(t,this.shader_source)}render(t){this.gl.enableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.enableVertexAttribArray(this.program.attributes.a_color),this.gl.useProgram(this.program.program),this.gl.uniformMatrix3fv(this.program.uniforms.u_pv,!1,t.all()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.geometry.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.geometry.indices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.program.attributes.a_vertexPos,2,this.gl.FLOAT,!1,r,0),this.gl.vertexAttribPointer(this.program.attributes.a_color,4,this.gl.FLOAT,!1,r,2*Float32Array.BYTES_PER_ELEMENT),this.gl.drawElements(this.gl.TRIANGLES,9*this.geometry.objects_count,this.gl.UNSIGNED_SHORT,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.disableVertexAttribArray(this.program.attributes.a_color)}addObject(t){if(this.geometry.objects_count==this.geometry.max_objects_count){const t=this.geometry;t.vertices=Object(i.resizeFloat32Array)(2*t.vertices.length,t.vertices),t.indices=Object(i.resizeUint16Array)(2*t.indices.length,t.indices),t.max_objects_count*=2}const e=t,s=this.geometry.objects_count;this.offsets.set(e,s),this.objects.push(e);const n=a.makeVerticesArray(e),r=a.makeIndicesArray(7*s);this.geometry.vertices.set(n,42*s),this.geometry.indices.set(r,9*s),this.geometry.objects_count++}clearObjects(){this.offsets.clear(),this.geometry.objects_count=0,this.objects=[]}deleteObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),s=this.geometry.objects_count-1;if(this.offsets.delete(e),t!=s&&(this.offsets.set(this.objects[s],t),this.objects[t]=this.objects[s],this.geometry.vertices.copyWithin(42*t,42*s,42*s+42)),this.objects.pop(),this.geometry.objects_count--,this.geometry.objects_count>this.default_max_objects_count&&this.geometry.objects_count<=this.geometry.max_objects_count/2){const t=this.geometry;t.vertices=Object(i.resizeFloat32Array)(t.vertices.length/2,t.vertices),t.indices=Object(i.resizeUint16Array)(t.indices.length/2,t.indices),t.max_objects_count/=2}const n=this.objects.indexOf(e);this.objects.splice(n,1)}}updateObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),s=a.makeVerticesArray(e);this.geometry.vertices.set(s,42*t)}}sortObjects(){const t=[...this.objects];t.sort((t,e)=>t.zOrder-e.zOrder);const e=new Float32Array(this.geometry.vertices);for(let s=0;s<this.objects.length;s++){const i=t[s],n=this.offsets.get(i);for(let t=0;t<42;t++)e[42*s+t]=this.geometry.vertices[42*n+t];this.offsets.set(i,s)}this.geometry.vertices=e,this.objects=t}static makeVerticesArray(t){const e=t.from,s=t.to,i=s.position.y-e.position.y,r=s.position.x-e.position.x,o=Math.sqrt(i*i+r*r),a=r/o,l=i/o,h=a*t.size,u=l*t.size;let c=t.painter(e.color),d=t.painter(s.color);(e.is_hovered||e.is_selected)&&(s.is_hovered||s.is_selected||s.selected_adjacent_vertex_count>0)&&((c=Object(n.makeContrast)(c,0)).a=1,(d=Object(n.makeContrast)(d,0)).a=1);const p=s.size+5*t.size;return[e.position.x+e.size*a-u,e.position.y+e.size*l+h,c.r,c.g,c.b,c.a,e.position.x+e.size*a+u,e.position.y+e.size*l-h,c.r,c.g,c.b,c.a,s.position.x-p*a+u,s.position.y-p*l-h,d.r,d.g,d.b,d.a,s.position.x-p*a-u,s.position.y-p*l+h,d.r,d.g,d.b,d.a,s.position.x-s.size*a,s.position.y-s.size*l,d.r,d.g,d.b,d.a,s.position.x-p*a-4*u,s.position.y-p*l+4*h,d.r,d.g,d.b,d.a,s.position.x-p*a+4*u,s.position.y-p*l-4*h,d.r,d.g,d.b,d.a]}static makeIndicesArray(t){return[t,1+t,2+t,t,2+t,3+t,t+4,t+5,t+6]}}},"./src/Renderers/StraightLinkRenderer.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"StraightLinkRenderer",function(){return a});var i=s("./src/Renderers/_Utils.ts"),n=s("./src/@types/Color.ts");const r=6*Float32Array.BYTES_PER_ELEMENT,o=Uint16Array.BYTES_PER_ELEMENT;class a{constructor(){this.default_max_objects_count=64,this.vertex_shader_source="\n        attribute vec2 a_vertexPos;\n        attribute vec4 a_color;\n        uniform mat3 u_pv;\n        varying vec4 v_color;\n\n        void main(void)\n        {\n            v_color = a_color;\n            gl_Position = vec4(u_pv * vec3(a_vertexPos, 1), 1);\n        }",this.fragment_shader_source="\n        precision mediump float;\n        varying vec4 v_color;\n\n        void main(void) {\n            gl_FragColor = v_color;\n        }",this.shader_source={vertex_shader:this.vertex_shader_source,fragment_shader:this.fragment_shader_source,attributes:["a_vertexPos","a_color"],uniforms:["u_pv"]},this.geometry={vertices:new Float32Array(4*r*this.default_max_objects_count),indices:new Uint16Array(6*o*this.default_max_objects_count),objects_count:0,max_objects_count:this.default_max_objects_count},this.offsets=new Map,this.geometry.vertices.fill(0),this.objects=[]}bindContext(t,e){this.program&&(this.gl.deleteProgram(this.program.program),this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo)),this.gl=t,this.ibo=t.createBuffer(),this.vbo=t.createBuffer(),this.program=e.compile(t,this.shader_source)}render(t){this.gl.enableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.enableVertexAttribArray(this.program.attributes.a_color),this.gl.useProgram(this.program.program),this.gl.uniformMatrix3fv(this.program.uniforms.u_pv,!1,t.all()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.geometry.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.geometry.indices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.program.attributes.a_vertexPos,2,this.gl.FLOAT,!1,r,0),this.gl.vertexAttribPointer(this.program.attributes.a_color,4,this.gl.FLOAT,!1,r,2*Float32Array.BYTES_PER_ELEMENT),this.gl.drawElements(this.gl.TRIANGLES,6*this.geometry.objects_count,this.gl.UNSIGNED_SHORT,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.disableVertexAttribArray(this.program.attributes.a_color)}addObject(t){if(this.geometry.objects_count==this.geometry.max_objects_count){const t=this.geometry;t.vertices=Object(i.resizeFloat32Array)(2*t.vertices.length,t.vertices),t.indices=Object(i.resizeUint16Array)(2*t.indices.length,t.indices),t.max_objects_count*=2}const e=t,s=this.geometry.objects_count;this.offsets.set(e,s);const n=a.makeVerticesArray(e),r=a.makeIndicesArray(4*s);this.geometry.vertices.set(n,24*s),this.geometry.indices.set(r,6*s),this.geometry.objects_count=this.objects.push(e)}clearObjects(){this.offsets.clear(),this.geometry.objects_count=0,this.objects=[]}deleteObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),s=this.geometry.objects_count-1;if(this.offsets.delete(e),t!=s&&(this.offsets.set(this.objects[s],t),this.objects[t]=this.objects[s],this.geometry.vertices.copyWithin(24*t,24*s,24*s+24)),this.objects.pop(),this.geometry.objects_count--,this.geometry.objects_count>this.default_max_objects_count&&this.geometry.objects_count<=this.geometry.max_objects_count/2){const t=this.geometry;t.vertices=Object(i.resizeFloat32Array)(t.vertices.length/2,t.vertices),t.indices=Object(i.resizeUint16Array)(t.indices.length/2,t.indices),t.max_objects_count/=2}}}updateObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),s=a.makeVerticesArray(e);this.geometry.vertices.set(s,24*t)}}sortObjects(){const t=[...this.objects];t.sort((t,e)=>t.zOrder-e.zOrder);const e=new Float32Array(this.geometry.vertices);for(let s=0;s<this.objects.length;s++){const i=t[s],n=this.offsets.get(i);for(let t=0;t<24;t++)e[24*s+t]=this.geometry.vertices[24*n+t];this.offsets.set(i,s)}this.geometry.vertices=e,this.objects=t}static makeVerticesArray(t){const e=t.from,s=t.to,i=s.position.y-e.position.y,r=s.position.x-e.position.x,o=Math.sqrt(i*i+r*r),a=i/o,l=r/o*t.size,h=a*t.size;let u=t.painter(e.color),c=t.painter(s.color);return(e.is_hovered||e.is_selected)&&(s.is_hovered||s.is_selected||s.selected_adjacent_vertex_count>0)&&((u=Object(n.makeContrast)(u,0)).a=1,(c=Object(n.makeContrast)(c,0)).a=1),[e.position.x-h,e.position.y+l,u.r,u.g,u.b,u.a,e.position.x+h,e.position.y-l,u.r,u.g,u.b,u.a,s.position.x+h,s.position.y-l,c.r,c.g,c.b,c.a,s.position.x-h,s.position.y+l,c.r,c.g,c.b,c.a]}static makeIndicesArray(t){return[t,1+t,2+t,t,2+t,3+t]}}},"./src/Renderers/_ShaderCompiler.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"ShaderCompiler_default",function(){return n});class i{compile(t,e){const s=t.createShader(t.VERTEX_SHADER);t.shaderSource(s,e.vertex_shader),t.compileShader(s);let n=t.getShaderParameter(s,t.COMPILE_STATUS);if(!n)return alert(t.getShaderInfoLog(s)),null;const r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e.fragment_shader),t.compileShader(r),!(n=t.getShaderParameter(r,t.COMPILE_STATUS)))return t.deleteShader(s),alert(t.getShaderInfoLog(r)),null;const o=t.createProgram();return t.attachShader(o,s),t.attachShader(o,r),t.linkProgram(o),(n=t.getProgramParameter(o,t.LINK_STATUS))?{program:o,attributes:i.getAttributeLocations(t,o,e.attributes),uniforms:i.getUniformLocations(t,o,e.uniforms)}:null}static getAttributeLocations(t,e,s){let i={};for(let n=0;n<s.length;++n){let r=s[n],o=-1;if(-1===(o=t.getAttribLocation(e,r)))throw new Error("Program doesn't have required attribute: "+r);i[s[n]]=o}return i}static getUniformLocations(t,e,s){let i={};for(let n=0;n<s.length;++n){let r=s[n];{let o=t.getUniformLocation(e,r);if(null===o)throw new Error("Program doesn't have required uniform: "+r);i[s[n]]=o}}return i}}const n=new i},"./src/Renderers/_Utils.ts":function(t,e,s){"use strict";function i(t,e){let s=new Float32Array(t);if(t>e.length)s.set(e,0);else for(let i=0;i<t;++i)s[i]=e[i];return s}function n(t,e){let s=new Uint16Array(t);if(t>e.length)s.set(e,0);else for(let i=0;i<t;++i)s[i]=e[i];return s}s.r(e),s.d(e,"resizeFloat32Array",function(){return i}),s.d(e,"resizeUint16Array",function(){return n})},"./src/Tabs/FiltersTab.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"FiltersTab",function(){return u});var i=s("./src/@types/GUI.ts");const n=i.id_prefix+"_filters_tab_node_threshold_max",r=i.id_prefix+"_filters_tab_node_threshold_min",o=i.id_prefix+"_filters_tab_node_threshold_slider",a=i.id_prefix+"_filters_tab_link_threshold_max",l=i.id_prefix+"_filters_tab_link_threshold_min",h=i.id_prefix+"_filters_tab_link_threshold_slider";class u{constructor(t){this.container=null,this.controller=null,this.translator=null,this.node_weight_range_setting={min:0,max:1,step:.1},this.link_weight_range_setting={min:0,max:1,step:.1},this.node_weight_range={min:0,max:1},this.link_weight_range={min:0,max:1}}build(t,e,s){this.container=t,this.controller=e,this.translator=s,this.container.style.height="100%";{const t=document.createElement("div");{const e=document.createElement("p");e.innerHTML=`${s.apply("LOC_NODE_THRESHOLD")}\n                               <input type="number" id="${r}">\n                                —\n                                <input type="number" id="${n}">`,t.appendChild(e)}const e=document.createElement("div");e.id=o,t.appendChild(e),this.container.appendChild(t)}{const t=document.createElement("div");{const e=document.createElement("p");e.innerHTML=`${s.apply("LOC_LINK_THRESHOLD")}\n                               <input type="number" id="${l}">\n                                —\n                                <input type="number" id="${a}">`,t.appendChild(e)}const e=document.createElement("div");e.id=h,t.appendChild(e),this.container.appendChild(t)}}clear(){this.node_weight_range_setting.min=0,this.node_weight_range_setting.max=1,this.node_weight_range_setting.step=.1,this.link_weight_range_setting.min=0,this.link_weight_range_setting.max=1,this.link_weight_range_setting.step=.1,this.node_weight_range.min=0,this.node_weight_range.max=1,this.link_weight_range.min=0,this.link_weight_range.max=1,this.UpdateRanges()}fill(t){const e=t;this.node_weight_range_setting.max=-1/0,this.node_weight_range_setting.min=1/0,this.node_weight_range_setting.step=0,e.graph.forEachNode(t=>{const e=t.data.weight;return e&&(e>this.node_weight_range_setting.max&&(this.node_weight_range_setting.max=e),e<this.node_weight_range_setting.min&&(this.node_weight_range_setting.min=e)),!1}),this.node_weight_range_setting.step=(this.node_weight_range_setting.max-this.node_weight_range_setting.min)/e.graph.getNodesCount(),this.link_weight_range_setting.max=-1/0,this.link_weight_range_setting.min=1/0,this.link_weight_range_setting.step=0,e.graph.forEachLink(t=>{const e=t.data.weight;return e&&(e>this.link_weight_range_setting.max&&(this.link_weight_range_setting.max=e),e<this.link_weight_range_setting.min&&(this.link_weight_range_setting.min=e)),!1}),this.link_weight_range_setting.step=(this.link_weight_range_setting.max-this.link_weight_range_setting.min)/e.graph.getLinksCount(),this.node_weight_range.min=this.node_weight_range_setting.min,this.node_weight_range.max=this.node_weight_range_setting.max,this.link_weight_range.min=this.link_weight_range_setting.min,this.link_weight_range.max=this.link_weight_range_setting.max,this.UpdateRanges()}UpdateRanges(){{const t=document.getElementById(r);t.min=String(this.node_weight_range_setting.min),t.max=String(this.node_weight_range_setting.max),t.step=String(this.node_weight_range_setting.step),t.value=String(this.node_weight_range.min);const e=document.getElementById(n);e.min=String(this.node_weight_range_setting.min),e.max=String(this.node_weight_range_setting.max),e.step=String(this.node_weight_range_setting.step),e.value=String(this.node_weight_range.max);const s=$("#"+o);t.onchange=(()=>{console.assert(isNaN(parseFloat(t.value))),this.node_weight_range.min=parseFloat(t.value),s.slider({values:[this.node_weight_range.min,this.node_weight_range.max]}),this.controller("filter_nodes",{min:this.node_weight_range.min,max:this.node_weight_range.max})}),e.onchange=(()=>{console.assert(isNaN(parseFloat(e.value))),this.node_weight_range.max=parseFloat(e.value),s.slider({values:[this.node_weight_range.min,this.node_weight_range.max]}),this.controller("filter_nodes",{min:this.node_weight_range.min,max:this.node_weight_range.max})}),s.slider({range:!0,min:this.node_weight_range_setting.min,max:this.node_weight_range_setting.max,step:this.node_weight_range_setting.step,values:[this.node_weight_range.min,this.node_weight_range.max],slide:(s,i)=>{this.node_weight_range.min=i.values[0],this.node_weight_range.max=i.values[1],t.value=String(this.node_weight_range.min),e.value=String(this.node_weight_range.max)}})}{const t=document.getElementById(l);t.min=String(this.link_weight_range_setting.min),t.max=String(this.link_weight_range_setting.max),t.step=String(this.link_weight_range_setting.step),t.value=String(this.link_weight_range.min);const e=document.getElementById(a);e.min=String(this.link_weight_range_setting.min),e.max=String(this.link_weight_range_setting.max),e.step=String(this.link_weight_range_setting.step),e.value=String(this.link_weight_range.max);const s=$("#"+h);t.onchange=(()=>{console.assert(isNaN(parseFloat(t.value))),this.link_weight_range.min=parseFloat(t.value),s.slider({values:[this.link_weight_range.min,this.link_weight_range.max]}),this.controller("filter_links",{min:this.link_weight_range.min,max:this.link_weight_range.max})}),e.onchange=(()=>{console.assert(isNaN(parseFloat(e.value))),this.link_weight_range.max=parseFloat(e.value),s.slider({values:[this.link_weight_range.min,this.link_weight_range.max]}),this.controller("filter_links",{min:this.link_weight_range.min,max:this.link_weight_range.max})}),s.slider({range:!0,min:this.link_weight_range_setting.min,max:this.link_weight_range_setting.max,step:this.link_weight_range_setting.step,values:[this.link_weight_range.min,this.link_weight_range.max],slide:(s,i)=>{this.link_weight_range.min=i.values[0],this.link_weight_range.max=i.values[1],t.value=String(this.link_weight_range.min),e.value=String(this.link_weight_range.max)}})}}}},"./src/Tabs/NodeInfoTab.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"NodeInfoTab",function(){return i});class i{constructor(t){this.container=null,this.controller=null,this.translator=null}build(t,e,s){this.container=t,this.controller=e,this.translator=s,this.container.style.height="100%",this.clear()}clear(){this.container.innerHTML=`<p>${this.translator.apply("LOC_NO_SELECTED_NODE")}</p>`}fill(t){const e=t.graph,s=t.node;this.container.innerHTML="";const i=document.createElement("div");{const t=document.createElement("input");t.type="text",t.style.fontWeight="bold",t.style.width="300px",t.style.marginRight="5px";const e=document.createElement("button");e.className="scivi_button",e.innerText=this.translator.apply("LOC_CHANGE"),e.onclick=(e=>this.controller("ChangeNodeName",{node_id:s.id,new_name:t.value})),i.appendChild(t),i.appendChild(e)}{const t=document.createElement("ul");t.style.listStyleType="disc",s.data&&Object.keys(s.data).forEach(e=>{const i=document.createElement("li");i.innerText=`${e}: ${s.data[e]}`,t.appendChild(i)}),i.appendChild(t)}const n=document.createElement("div");n.innerHTML=`<label>${this.translator.apply("#out_links_text")}</label>`;{const t=document.createElement("ul");t.style.listStyleType="disc",s.links.filter(t=>t.fromId==s.id).forEach(s=>{const i=document.createElement("li");i.innerText=`${e.graph.getNode(s.toId).data.label}`,t.appendChild(i)}),n.appendChild(t)}this.container.appendChild(i),this.container.appendChild(n)}}},"./src/Tabs/NodeListTab.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"NodeListTab",function(){return l});var i,n=s("./src/@types/GUI.ts");!function(t){t[t.NoFilter=0]="NoFilter",t[t.SubstringFilter=1]="SubstringFilter",t[t.StringFilter=2]="StringFilter",t[t.RegExpFilter=3]="RegExpFilter"}(i||(i={}));const r=n.id_prefix+"_node_list_tab_filter_panel",o=n.id_prefix+"_node_list_tab_header",a=n.id_prefix+"_node_list_tab_content";class l{constructor(t){this.container=null,this.controller=null,this.translator=null,this.bound_graph=null,this.filter_string=""}build(t,e,s){this.container=t,this.controller=e,this.translator=s,this.container.style.height="100%";const i=document.createElement("div");i.id=r;{const t=document.createElement("button");t.className="scivi_button",t.innerText=s.apply("LOC_NOT"),t.onclick=(()=>{this.m_not=!this.m_not,this.m_not?t.classList.add("pushed"):t.classList.remove("pushed"),this.updateList()}),i.appendChild(t)}{const t=document.createElement("input");t.type="text",t.style.marginRight="5px",t.width=200,t.oninput=(()=>{this.filter_string=t.value,this.updateList()}),i.appendChild(t)}{const t=document.createElement("button");t.className="scivi_button",t.innerText=s.apply("LOC_FINDSTRING"),t.onclick=(()=>{}),i.appendChild(t)}{const t=document.createElement("button");t.className="scivi_button",t.innerText=s.apply("LOC_FINDREGEXP"),t.onclick=(()=>{}),i.appendChild(t)}this.container.appendChild(i);const n=document.createElement("div");n.id=o,n.style.marginTop="5px";{const t=document.createElement("div"),e=document.createElement("span");e.innerText=s.apply("LOC_VISIBLE"),e.style.textAlign="center",e.style.width="auto",e.style.display="inline-block";const i=document.createElement("span");i.innerText=s.apply("LOC_SELECTED"),i.style.textAlign="center",i.style.width="auto",i.style.display="inline-block",i.style.marginLeft="10px",t.appendChild(e),t.appendChild(i),n.appendChild(t)}{const t=document.createElement("button");t.innerText=this.translator.apply("LOC_ALL"),t.className="scivi_button",t.style.width="auto",t.style.textAlign="center",t.onclick=this.ShowAllFilteredNodes;const e=document.createElement("button");e.innerText=this.translator.apply("LOC_NONE"),e.className="scivi_button",e.style.width="auto",e.style.textAlign="center",e.onclick=this.HideAllFilteredNodes,n.appendChild(t),n.appendChild(e)}{const t=document.createElement("button");t.innerText=this.translator.apply("LOC_ALL"),t.className="scivi_button",t.style.width="auto",t.style.textAlign="center",t.style.marginLeft="17px",t.onclick=this.SelectAllFilteredNodes;const e=document.createElement("button");e.innerText=this.translator.apply("LOC_NONE"),e.className="scivi_button",e.style.width="auto",e.style.textAlign="center",e.onclick=this.DeselectAllFilteredNodes,n.appendChild(t),n.appendChild(e)}this.container.appendChild(n);const l=document.createElement("div");l.id=a,this.container.appendChild(l),this.clear()}clear(){document.getElementById(a).innerHTML=`<p>${this.translator.apply("LOC_NO_GRAPH")}</p>`,this.bound_graph=null}fill(t){this.bound_graph=t,this.updateList()}onSelectedNode(t){document.getElementById("node_info"+t.id).getElementsByTagName("input")[1].checked=!0}onDeselectedNode(t){document.getElementById("node_info"+t.id).getElementsByTagName("input")[1].checked=!1}updateList(){if(this.bound_graph){const t=document.getElementById(a);t.innerHTML="";const e=this.filter_string.length>0;this.bound_graph.graph.forEachNode(s=>(e&&!this.matchStr(s.data.label,this.filter_string,i.SubstringFilter)||this.postNodeInfo(t,s),!1))}}matchStr(t,e,s){if(null===e||0===e.length)return!0;switch(s){case i.NoFilter:return!0;case i.SubstringFilter:return this.m_not?-1===t.indexOf(e):-1!==t.indexOf(e);case i.StringFilter:return this.m_not?t!==e:t===e;case i.RegExpFilter:return this.m_not?null===t.match(e):null!==t.match(e)}return!1}postNodeInfo(t,e){const s=document.createElement("li");s.id="node_info"+e.id,s.style.listStyleType="none";const i=document.createElement("input");i.type="checkbox",i.style.marginLeft="18px",i.checked=!0,i.onclick=(()=>{i.checked?this.controller("ShowNode",{node:e}):this.controller("HideNode",{node:e})});const n=document.createElement("input");n.type="checkbox",n.style.marginLeft="55px",n.style.marginRight="18px",n.onclick=(()=>{n.checked?this.controller("SelectNode",{node:e}):this.controller("DeselectNode",{node:e})});const r=document.createElement("span");return r.style.fontWeight="normal",r.innerText=e.data.label,s.appendChild(i),s.appendChild(n),s.appendChild(r),t.appendChild(s),!1}ShowAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[0];e.checked=!0,e.onclick.apply(e)})}HideAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[0];e.checked=!1,e.onclick.apply(e)})}SelectAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[1];e.checked=!0,e.onclick.apply(e)})}DeselectAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[1];e.checked=!1,e.onclick.apply(e)})}}},"./src/Tabs/SettingsTab.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"SettingsTab",function(){return m});var i=s("./src/@types/GUI.ts");const n=i.id_prefix+"_settings_tab_node_alpha_label",r=i.id_prefix+"_settings_tab_node_alpha_slider",o=i.id_prefix+"_settings_tab_link_alpha_label",a=i.id_prefix+"_settings_tab_link_alpha_slider",l=i.id_prefix+"_settings_tab_node_size_label",h=i.id_prefix+"_settings_tab_node_size_slider",u=i.id_prefix+"_settings_tab_link_size_label",c=i.id_prefix+"_settings_tab_link_size_slider",d=i.id_prefix+"_settings_tab_node_font_size_input",p=i.id_prefix+"_settings_tab_layout_builder_selector",g=i.id_prefix+"_settings_tab_layout_builder_configuration",v=i.id_prefix+"_settings_tab_build_layout_button",f=i.id_prefix+"_settings_tab_fit_to_screen_button",y=i.id_prefix+"_settings_tab_calc_modularity_button",_=i.id_prefix+"_settings_tab_graph_export_button";class m{constructor(t){this.container=null,this.controller=null,this.translator=null,this.layouts=t?t.Layouts:{}}build(t,e,s){this.container=t,this.controller=e,this.translator=s,this.container.style.height="100%";const i=document.createElement("div");{const t=document.createElement("div");{const e=document.createElement("div");e.innerHTML=`${s.apply("LOC_PASSIVETEXTALPHA")}`;const i=document.createElement("span");i.id=n,e.appendChild(i);const o=document.createElement("div");o.id=r,o.style.margin="10px",t.appendChild(e),t.appendChild(o)}const e=document.createElement("div");{const t=document.createElement("div");t.innerHTML=`${s.apply("LOC_PASSIVEEDGEALPHA")}`;const i=document.createElement("span");i.id=o,t.appendChild(i);const n=document.createElement("div");n.id=a,n.style.margin="10px",e.appendChild(t),e.appendChild(n)}i.appendChild(t),i.appendChild(e)}this.container.appendChild(i),b(this.container),$("#"+r).slider({min:0,max:1,step:.01,value:1,slide:(t,e)=>{const s=e.value||0;document.getElementById(n).innerText=String(s)},create:()=>{}}),$("#"+a).slider({min:0,max:1,step:.01,value:1,slide:(t,e)=>{const s=e.value||0;document.getElementById(o).innerText=String(s)},create:()=>{}});const m=document.createElement("div");{const t=document.createElement("div");{const e=document.createElement("div");e.innerHTML=`${s.apply("LOC_NODE_SIZE_TEXT")}`;const i=document.createElement("span");i.id=l,e.appendChild(i);const n=document.createElement("div");n.id=h,n.style.margin="10px",t.appendChild(e),t.appendChild(n)}const e=document.createElement("div");{const t=document.createElement("div");t.innerHTML=`${s.apply("LOC_LINK_SIZE_TEXT")}`;const i=document.createElement("span");i.id=u,t.appendChild(i);const n=document.createElement("div");n.id=c,n.style.margin="10px",e.appendChild(t),e.appendChild(n)}m.appendChild(t),m.appendChild(e)}this.container.appendChild(m),b(this.container),$("#"+h).slider({range:!0,min:0,max:1,step:.01,values:[0,1],slide:(t,e)=>{const s=e.values[0],i=e.values[1];document.getElementById(l).innerText=`[${s};${i}]`},create:()=>{document.getElementById(l).innerText="[0;1]"}}),$("#"+c).slider({range:!0,min:0,max:1,step:.01,values:[0,1],slide:(t,e)=>{const s=e.values[0],i=e.values[1];document.getElementById(u).innerText=`[${s};${i}]`},create:()=>{document.getElementById(u).innerText="[0;1]"}});const x=document.createElement("div");x.style.display="flex",x.style.alignItems="center";{const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.flex="1";{const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="space-between";const i=document.createElement("span");i.innerText=s.apply("LOC_NODEFONT");const n=document.createElement("input");n.id=d,n.style.width="70px",n.type="number",n.min="5",n.max="50",n.value="24",n.required=!0,e.appendChild(i),e.appendChild(n),t.appendChild(e)}const e=document.createElement("button");e.className="scivi_button",e.innerText=s.apply("LOC_APPLY"),e.style.marginLeft="10px",x.appendChild(t),x.appendChild(e)}if(this.container.appendChild(x),b(this.container),Object.keys(this.layouts).length>0){const t=document.createElement("div");{const e=document.createElement("select");e.id=p,e.name=p;const i=document.createElement("ul");i.id=g,i.style.margin="10px 10px",e.onchange=(()=>{i.innerHTML="";const t=this.layouts[e.value].getConfiguration();t&&Object.keys(t).forEach(e=>{const s=t[e],n=document.createElement("li");n.style.listStyleType="none",n.innerHTML=`${this.translator.apply("#"+e+"_text")}: `;const r=document.createElement("input");r.className="layout_input",r.id=e,r.type="number",r.max=String(s.max),r.min=String(s.min),r.step=String(s.step),r.value=String(s.default),n.appendChild(r),i.appendChild(n)})});const n=document.createElement("button");n.id=v,n.innerText=s.apply("LOC_BUILD_LAYOUT"),n.className="scivi_button",n.onclick=(()=>{const t=this.layouts[e.value].getConfiguration();Object.keys(t).forEach(e=>{const s=document.getElementById(e);t[e].value=parseFloat(s.value)}),this.controller("layout",{builder:this.layouts[e.value]})}),t.appendChild(e),t.appendChild(i),t.appendChild(n)}this.container.appendChild(t),b(this.container),this.fillLayouts()}const w=document.createElement("div");{const t=document.createElement("button");t.className="scivi_button",t.innerText=s.apply("LOC_FIT_TO_SCREEN"),t.id=f;const e=document.createElement("button");e.className="scivi_button",e.innerText=s.apply("LOC_CALC_MODULARITY"),e.id=y;const i=document.createElement("button");i.className="scivi_button",i.innerText=s.apply("LOC_SAVE_GRAPH"),i.id=_,w.appendChild(t),w.appendChild(e),w.appendChild(i)}this.container.appendChild(w),b(this.container);const E=document.createElement("button");E.className="scivi_button",E.innerText=s.apply("LOC_HELP"),this.container.appendChild(E)}clear(){}fill(t){}fillLayouts(){const t=document.getElementById(p);document.getElementById(g);Object.keys(this.layouts).forEach(e=>{const s=document.createElement("option");s.value=e,s.innerText=this.translator.apply("#"+e),e==Object.keys(this.layouts)[0]&&(s.selected=!0),t.appendChild(s)})}}function b(t){t.appendChild(document.createElement("br")),t.appendChild(document.createElement("hr")),t.appendChild(document.createElement("br"))}},"./src/Translator.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"Translator",function(){return n}),s.d(e,"getOrCreateTranslatorInstance",function(){return o});var i=s("./node_modules/node-polyglot/index.js");class n{constructor(t="ru"){this._locale=t,this._instance=new i({allowMissing:!1,locale:t})}extend(t){return this._instance.extend(t[this._locale]),this}apply(t){return this._instance.t(t)}}let r;function o(t=""){return r||(r=new n(t)),r}},"./src/index.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"getParameterByName",function(){return v});var i=s("./src/Translator.ts");s.d(e,"Translator",function(){return i.Translator}),s.d(e,"getOrCreateTranslatorInstance",function(){return i.getOrCreateTranslatorInstance});var n=s("./src/GUI.ts");s.d(e,"GUI",function(){return n.GUI});var r=s("./src/GraphSerializer.ts");s.d(e,"GraphSerializer",function(){return r.GraphSerializer});var o=s("./src/Renderers/CircleNodeRenderer.ts");s.d(e,"CircleNodeRenderer",function(){return o.CircleNodeRenderer});var a=s("./src/Renderers/OrientedStraightLinkRenderer.ts");s.d(e,"OrientedStraightLinkRenderer",function(){return a.OrientedStraightLinkRenderer});var l=s("./src/Renderers/StraightLinkRenderer.ts");s.d(e,"StraightLinkRenderer",function(){return l.StraightLinkRenderer});var h=s("./src/LayoutBuilders/LayoutBuilder_Circle.ts");s.d(e,"LayoutBuilder_Circle",function(){return h.LayoutBuilder_Circle});var u=s("./src/LayoutBuilders/LayoutBuilder_FruchtermanReingold.ts");s.d(e,"LayoutBuilder_FruchtermanReingold",function(){return u.LayoutBuilder_FruchtermanReingold});var c=s("./src/Tabs/NodeInfoTab.ts");s.d(e,"NodeInfoTab",function(){return c.NodeInfoTab});var d=s("./src/Tabs/NodeListTab.ts");s.d(e,"NodeListTab",function(){return d.NodeListTab});var p=s("./src/Tabs/SettingsTab.ts");s.d(e,"SettingsTab",function(){return p.SettingsTab});var g=s("./src/Tabs/FiltersTab.ts");function v(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var s=new RegExp(`[?&]${t}(=([^&#]*)|&|#|$)`).exec(e);if(s)return s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):""}s.d(e,"FiltersTab",function(){return g.FiltersTab})}});