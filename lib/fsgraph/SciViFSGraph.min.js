var SciViFSGraph="object"==typeof SciViFSGraph?SciViFSGraph:{};SciViFSGraph.main=function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/index.ts")}({"./node_modules/call-bind/callBound.js":function(t,e,n){"use strict";var s=n("./node_modules/get-intrinsic/index.js"),i=n("./node_modules/call-bind/index.js"),r=i(s("String.prototype.indexOf"));t.exports=function(t,e){var n=s(t,!!e);return"function"==typeof n&&r(t,".prototype.")>-1?i(n):n}},"./node_modules/call-bind/index.js":function(t,e,n){"use strict";var s=n("./node_modules/function-bind/index.js"),i=n("./node_modules/get-intrinsic/index.js"),r=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||s.call(o,r),l=i("%Object.getOwnPropertyDescriptor%",!0),h=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(h)try{h({},"a",{value:1})}catch(t){h=null}t.exports=function(t){var e=a(s,o,arguments);l&&h&&(l(e,"length").configurable&&h(e,"length",{value:1+u(0,t.length-(arguments.length-1))}));return e};var c=function(){return a(s,r,arguments)};h?h(t.exports,"apply",{value:c}):t.exports.apply=c},"./node_modules/chroma.ts/dist/index.es.js":function(t,e,n){"use strict";n.r(e),n.d(e,"Color",function(){return z}),n.d(e,"CubeHelix",function(){return C}),n.d(e,"Scale",function(){return J}),n.d(e,"analyze",function(){return nt}),n.d(e,"average",function(){return H}),n.d(e,"bezier",function(){return W}),n.d(e,"black",function(){return j}),n.d(e,"blend",function(){return Y}),n.d(e,"brewer",function(){return A}),n.d(e,"cmyk",function(){return R}),n.d(e,"color",function(){return E}),n.d(e,"contrast",function(){return Q}),n.d(e,"css",function(){return L}),n.d(e,"cubehelix",function(){return O}),n.d(e,"deltaE",function(){return et}),n.d(e,"distance",function(){return tt}),n.d(e,"gl",function(){return P}),n.d(e,"hcg",function(){return F}),n.d(e,"hsi",function(){return I}),n.d(e,"hsl",function(){return B}),n.d(e,"hsv",function(){return D}),n.d(e,"kelvin",function(){return U}),n.d(e,"lab",function(){return G}),n.d(e,"lch",function(){return T}),n.d(e,"limits",function(){return st}),n.d(e,"mix",function(){return N}),n.d(e,"num",function(){return $}),n.d(e,"random",function(){return M}),n.d(e,"rgb",function(){return q}),n.d(e,"scale",function(){return X}),n.d(e,"scales",function(){return Z}),n.d(e,"w3cx11",function(){return k}),n.d(e,"white",function(){return S}),n.d(e,"xyz",function(){return V});const{abs:s,atan2:i,cos:r,floor:o,log:a,min:l,max:h,round:u,sign:c,sin:d,sqrt:p,cbrt:g,PI:f,hypot:v}=Math;function m(t,e,n){return t+(e-t)*n}function y(t,e=0,n=1){return t<e?e:t>n?n:t}function _(t,e,n,i=1e-8){let r,o=e;for(;n--&&s(r=t(o))>i;){const e=(t(o+i)-r)/i;console.log("fx / dfdx",r/e,"fx",r,"x",o),o-=r/e}return o}const b=2*f,x=f/180,w=180/f;function E(...t){return t[0]instanceof z?t[0]:t.length>1&&"string"==typeof t[t.length-1]?ot(t.slice(0,t.length-1),t[t.length-1]):Array.isArray(t[0])?ot(t[0]):ot(t)}class z{constructor(t,e,n,s=1){this.r=t,this.g=e,this.b=n,this.a=s}mix(t,e,n="rgb"){return N(this,t,e,n)}rgb(t=!0,e=!0){const n=n=>(t&&(n=u(n)),e&&(n=y(n,0,255)),n),{r:s,g:i,b:r}=this;return[n(s),n(i),n(r)]}rgba(t=!0,e=!0){const n=n=>(t&&(n=u(n)),e&&(n=y(n,0,255)),n),{r:s,g:i,b:r,a:o}=this;return[n(s),n(i),n(r),o]}hex(t="rgb"){const{r:e,g:n,b:s,a:i}=this;return function(t,e,n,s,i="rgb"){t=y(u(t),0,255),e=y(u(e),0,255),n=y(u(n),0,255);const r=(t<<16|e<<8|n).toString(16).padStart(6,"0"),o=u(255*y(s)).toString(16).padStart(2,"0");return"#"+("argb"==i?o+r:"rgba"==i?r+o:r)}(e,n,s,i,t)}hsl(){const{r:t,g:e,b:n}=this;return function(t,e,n){const[s,i,r]=jt(t/255,e/255,n/255),o=(r+i)/2;let a;a=r==i?0:o<.5?(r-i)/(r+i):(r-i)/(2-r-i);return[s,a,o]}(t,e,n)}hsv(){const{r:t,g:e,b:n}=this;return function(t,e,n){const[s,i,r]=jt(t,e,n),o=r-i;return[s,0==r?0:o/r,r/255]}(t,e,n)}hcg(){const{r:t,g:e,b:n}=this;return function(t,e,n){const[s,i,r]=jt(t,e,n),o=(r-i)/255;return[s,o,o<1?i/255/(1-o):0]}(t,e,n)}css(t="rgb"){if("rgb"==t){const{r:t,g:e,b:n,a:s}=this;return function(t,e,n,s=1){return s>=1?"rgb("+[t,e,n].map(u).join(",")+")":"rgba("+[t,e,n].map(u).join(",")+","+s+")"}(t,e,n,s)}if("hsl"==t)return function([t,e,n],s){const i=s<1?"hsla":"hsl";return i+"("+_t(t)+","+_t(100*e)+"%,"+_t(100*n)+"%"+("hsla"==i?","+_t(s):"")+")"}(this.hsl(),this.alpha());throw new Error}name(t=!1){const e=this.num(),n=Object.keys(k).find(t=>k[t]==e);if(!n&&t){const[t,e,n]=this.lab();return(s=Object.keys(k))[Bt(s,s=>{const[i,r,o]=$(k[s]).lab();return-v(t-i,e-r,n-o)})]}var s;return n}cmyk(){const{r:t,g:e,b:n}=this;return function(t,e,n){const s=1-h(t/=255,e/=255,n/=255);return 1==s?[0,0,0,1]:[(1-t-s)/(1-s),(1-e-s)/(1-s),(1-n-s)/(1-s),s]}(t,e,n)}gl(){const{r:t,g:e,b:n,a:s}=this;return[t/255,e/255,n/255,s]}luminance(t){const{r:e,g:n,b:s,a:i}=this,[,r]=Tt(e,n,s);if(void 0===t)return r;const o=(t,e,n)=>(n-t)/(e-t);return t>r?N(this,S,o(r,1,t),"xyz").alpha(i):N(j,this,o(0,r,t),"xyz").alpha(i)}temperature(){const{r:t,g:e,b:n}=this;return s=t,i=e,r=n,console.log(r-s),i+r<158.61?(console.log("0 < t < 20"),u(100*_(t=>i-(-155.25485562709179-.44596950469579133*(t-2)+104.49216199393888*a(t-2)),15,4))):r-s<0?(console.log("20 < t < 66"),u(100*_(t=>r-(.8274096064007395*(t-10)-254.76935184120902+115.67994401066147*a(t-10)),43,4))):(console.log("0 < t < 400, start= "+(-1.4*(s+i)+755)),u(100*_(t=>s-(351.97690566805693+.114206453784165*(t-55)-40.25366309332127*a(t-55)),-1.4*(s+i)+755,8)));var s,i,r}set(t,e){const[n,s]=t.split("."),i=this[n](),r=n.indexOf(s);if(-1==r)throw new Error("invalid channel");return i[r]="number"==typeof e?e:e(i[r]),E(i,n).alpha(this.a)}clipped(){const{r:t,g:e,b:n}=this;return!(0<=t&&t<=255&&0<=e&&e<=255&&0<=n&&n<=255)}textColor(){return this.luminance()>.5?j:S}alpha(t){if(void 0===t)return this.a;const{r:e,g:n,b:s}=this;return q(e,n,s,t)}darker(t=1){const[e,n,s]=this.lab();return G(e-Ot*t,n,s,this.alpha())}brighter(t=1){return this.darker(-t)}saturate(t=1){const[e,n,s]=this.lch();return T(e,h(0,n+t*Ot),s,this.alpha())}desaturate(t=1){return this.saturate(-t)}premultiplied(){const{r:t,g:e,b:n,a:s}=this;return q(t*s,e*s,n*s,s)}hsi(){const{r:t,g:e,b:n}=this;return function(t,e,n){const s=t/255,r=e/255,o=n/255,a=(s+r+o)/3;if(s==r&&r==o)return[0,0,a];{const t=.5*(2*s-r-o),e=p(3)/2*(r-o),n=i(e,t),h=l(s,r,o),u=1-h/a;return[(n<0?2*f+n:n)*w,u,a]}}(t,e,n)}lab(){const{r:t,g:e,b:n}=this;return Ft(t,e,n)}num(t="rgb"){const{r:e,g:n,b:s,a:i}=this;return function(t,e,n,s=1,i="rgb"){const r=u(t)<<16|u(e)<<8|u(n);return"rgb"===i?r:"rgba"===i?r<<8|u(255*s)<<24:u(255*s)<<24|r}(e,n,s,i,t)}lch(){const{r:t,g:e,b:n}=this;return function(t,e,n){const[s,r,o]=Ft(t,e,n);return function(t,e,n){const s=v(e,n),r=(i(n,e)*w+360)%360;return[t,s,r]}(s,r,o)}(t,e,n)}xyz(){const{r:t,g:e,b:n}=this;return Tt(t,e,n)}equals(t){const{r:e,g:n,b:s,a:i}=this,{r:r,g:o,b:a,a:l}=t;return e==r&&n==o&&s==a&&i==l}hashCode(){return this.num("rgba")}toSource(){const{r:t,g:e,b:n,a:s}=this;return"chroma.rgb("+t+", "+e+", "+n+(1===s?")":", "+s+")")}}z.prototype.toString=z.prototype.css,z.prototype.kelvin=z.prototype.temperature;const j=new z(0,0,0,1),S=new z(255,255,255,1),A={OrRd:[16775148,16705736,16635038,16628612,16551257,15689032,14102559,11730944,8323072],PuBu:[16775163,15525874,13685222,10927579,7645647,3576e3,356528,285325,145496],BuPu:[16252157,14740724,12571622,10403034,9213638,9202609,8929693,8458108,5046347],Oranges:[16774635,16705230,16634018,16625259,16616764,15821075,14239745,10892803,8333060],BuGn:[16252157,15070713,13429990,10082505,6734500,4304502,2329413,27948,17435],YlOrBr:[16777189,16775100,16704401,16696399,16685353,15495188,13388802,10040324,6694150],YlGn:[16777189,16252089,14282915,11394446,7915129,4303709,2327619,26679,17705],Reds:[16774640,16703698,16563105,16552562,16476746,15678252,13309981,10817301,6750221],RdPu:[16775155,16638173,16565696,16424885,16214177,14496919,11403646,7995767,4784234],Greens:[16252149,15070688,13101504,10607003,7652470,4303709,2329413,27948,17435],YlGnBu:[16777177,15595697,13101492,8375739,4306628,1937856,2252456,2438292,531800],Purples:[16579581,15724021,14342891,12369372,10394312,8420794,6967715,5515151,4128893],GnBu:[16252144,14742491,13429701,11066805,8113348,5157843,2854078,551084,540801],Greys:[16777215,15790320,14277081,12434877,9868950,7566195,5395026,2434341,0],YlOrRd:[16777164,16772512,16701814,16691788,16616764,16535082,14883356,12386342,8388646],PuRd:[16250105,15196655,13941210,13210823,14640560,15149450,13505110,9961539,6750239],Blues:[16251903,14609399,13032431,10406625,7057110,4362950,2191797,545180,536683],PuBuGn:[16775163,15524592,13685222,10927579,6793679,3576e3,164234,93273,83510],Viridis:[4456788,4728695,4147850,3237774,2524047,2071946,7130714,11984427,16705573],Spectral:[10355010,13975119,16018755,16625249,16703627,16777151,15136152,11263396,6734501,3311805,6180770],RdYlGn:[10813478,14102567,16018755,16625249,16703627,16777151,14282635,10934634,6733155,1742928,26679],RdBu:[6750239,11671595,14049357,16033154,16636871,16250871,13755888,9618910,4428739,2188972,340065],PiYG:[9306450,12917629,14579630,15840986,16638191,16250871,15136208,12116358,8371265,5083681,2581529],PRGn:[4194379,7744131,10055851,12756431,15193320,16250871,14282963,10935200,5942881,1800247,17435],RdYlBu:[10813478,14102567,16018755,16625249,16703632,16777151,14742520,11262441,7646673,4552116,3225237],BrBG:[5517317,9195786,12550445,14664317,16181443,16119285,13101797,8441281,3512207,91742,15408],RdGy:[6750239,11671595,14049357,16033154,16636871,16777215,14737632,12237498,8882055,5066061,1710618],PuOr:[8338184,11753478,14713364,16627811,16703670,16250871,14211819,11709394,8418220,5515144,2949195],Set2:[6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947],Accent:[8374655,12496596,16629894,16777113,3697840,15729279,12540695,6710886],Set1:[14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607,10066329],Set3:[9294791,16777139,12499674,16482418,8434131,16626786,11787881,16567781,14277081,12353725,13429701,16772463],Dark2:[1810039,14245634,7696563,15149450,6727198,15117058,10909213,6710886],Paired:[10931939,2062516,11722634,3383340,16489113,14883356,16629615,16744192,13284054,6962586,16777113,11622696],Pastel2:[11789005,16633260,13358568,16042724,15136201,16773806,15852236,13421772],Pastel1:[16495790,11783651,13429701,14601188,16701862,16777164,15063229,16636652,15921906]},k={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflower:6591981,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,laserlemon:16777044,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrod:16448210,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,maroon2:8323072,maroon3:11546720,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,purple2:8323199,purple3:10494192,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function O(t=300,e=-1.5,n=1,s=1,i=[0,1]){const r=t=>r.at(t);return Object.getOwnPropertyNames(C.prototype).forEach(t=>r[t]=C.prototype[t]),r.start(t),r.rotations(e),r.hue(n),r.gamma(s),r.lightness(i),r}class C{start(t){return void 0===t?this._start:(this._start=t,this)}rotations(t){return void 0===t?this._rotations:(this._rotations=t,this)}gamma(t){return void 0===t?this._gamma:(this._gamma=t,this)}hue(t){return void 0===t?this._hue:(this._hue=Array.isArray(t)?t:[t,t],this)}lightness(t){return void 0===t?this._lightness:(this._lightness=Array.isArray(t)?t:[t,t],this)}scale(){return X(this)}at(t){const e=b*((this._start+120)/360+this._rotations*t),n=m(this._lightness[0],this._lightness[1],t)**this._gamma,s=m(this._hue[0],this._hue[1],t)*n*(1-n)/2,i=r(e),o=d(e);return q([255*(n+s*(-.14861*i+1.78277*o)),255*(n+s*(-.29227*i-.90649*o)),255*(n+s*(1.97294*i)),1])}}function M(t=Math.random){return $(16777216*t()|0)}function N(t,e,n=.5,s="rgb"){const i=E(t),r=E(e),o=it[s]&&it[s](i,r,n,s);if(!o)throw new Error("color mode "+s+" is not supported");return o.alpha(m(i.alpha(),r.alpha(),n))}function L(t){const[e,n,s,i]=yt(t);return new z(e,n,s,i)}function R(...t){return ot(t,"cmyk")}function P(...t){return ot(t,"gl")}function F(...t){return ot(t,"hcg")}function T(...t){return ot(t,"lch")}function I(...t){return ot(t,"hsi")}function B(...t){return ot(t,"hsl")}function D(...t){return ot(t,"hsv")}function U(t){const[e,n,s]=wt(t);return new z(e,n,s)}function G(...t){return ot(t,"lab")}function $(t){const[e,n,s]=ht(t);return new z(e,n,s)}function q(...t){return ot(t,"rgb")}function V(...t){return ot(t,"xyz")}function H(t,e="rgb"){const n=t.map(t=>E(t));if("lrgb"==e)return function(t){let e=0,n=0,s=0,i=0;for(const r of t){const[t,o,a,l]=r.rgba(!1,!1);e+=t**2,n+=o**2,s+=a**2,i+=l}return new z(p(e)/t.length,p(n)/t.length,p(s)/t.length,i/t.length)}(n);if("num"==e){let t=0,e=0;for(const s of n)t+=s.num(),e+=s.alpha();return $(t/n.length).alpha(e/n.length)}const s=[0,0,0];let o=0,a=0,l=0;for(const t of n){const n=t[e]();l+=t.alpha();for(let t=0;t<s.length;t++)if("h"==e.charAt(t)){const e=n[t]*x;o+=r(e),a+=d(e)}else s[t]+=n[t]}for(let t=0;t<s.length;t++)if("h"==e.charAt(t)){const e=i(a/n.length,o/n.length)*w;s[t]=(e+360)%360}else s[t]=s[t]/n.length;return ot(s,e).alpha(l/n.length)}function W(...t){const e=function t(e){const n=e.map(t=>E(t));const[s,i,r,o]=n.map(t=>t.lab());if(2==e.length)return t=>G([0,1,2].map(e=>m(s[e],i[e],t)));if(3==e.length){const t=(t,e,n,s)=>(1-s)**2*t+2*(1-s)*s*e+s**2*n;return e=>G([0,1,2].map(n=>t(s[n],i[n],r[n],e)))}if(4==e.length){const t=(t,e,n,s,i)=>(1-i)**3*t+3*(1-i)**2*i*e+3*(1-i)*i**2*n+i**3*s;return e=>G([0,1,2].map(n=>t(s[n],i[n],r[n],o[n],e)))}if(5==e.length){const e=t(n.slice(0,3)),s=t(n.slice(2,5));return t=>t<.5?e(2*t):s(2*(t-.5))}throw new Error}(Array.isArray(t[0])?t[0]:t);return e.scale=C.prototype.scale,e}function Y(t,e,n){if(!K[n])throw new Error("unknown blend mode "+n);return K[n](t,e)}const K={normal:Et(zt((t,e)=>t)),multiply:Et(zt((t,e)=>t*e/255)),screen:Et(zt(function(t,e){return 255*(1-(1-t/255)*(1-e/255))})),overlay:Et(zt(function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))})),darken:Et(zt(l)),lighten:Et(zt(h)),dodge:Et(zt(function(t,e){if(255==t)return 255;return 255*l(1,e/255/(1-t/255))})),burn:Et(zt(function(t,e){return 255*(1-(1-e/255)/(t/255))}))};function X(...t){const e=t=>e._at(t);return Object.getOwnPropertyNames(J.prototype).forEach(t=>e[t]=J.prototype[t]),Array.isArray(t[0])&&(t=t[0]),1==t.length&&"string"==typeof t[0]&&(t=A[t[0]]),e._init("function"==typeof t[0]?t[0]:t.map(t=>E(t))),e}class J{classes(t){if(void 0===t)return this._classes;if(Array.isArray(t))this._classes=t,this.domain(t[0],t[t.length-1]);else{if(t%1!=0||t<1)throw new Error("invalid classes param");this._classes=st(this.domain(),"e",t)}return this}domain(...t){if(void 0===t[0])return"function"!=typeof this._colors?this._pos.map(t=>m(this._min,this._max,t)):[this._min,this._max];if(this._min=t[0],this._max=t[t.length-1],2==t.length)"function"!=typeof this._colors&&(this._pos=this._colors.map((t,e)=>e/(this._colors.length-1)));else{if("function"==typeof this._colors||t.length!=this._colors.length)throw new Error("invalid domain "+t);this._pos=t.map(t=>(function(t,e,n){return(n-t)/(e-t)})(this._min,this._max,t))}return this}mode(t){return void 0===t?this._mode:(this._mode=t,this._resetCache(),this)}out(t){return this._out=t,this}correctLightness(t=!0){if(this._correctLightness!=t){this._resetCache();const e=this._colors;if(t&&"function"!=typeof e){let t=0;for(let n=1;n<e.length;n++){const s=e[n].lab()[0]-e[n-1].lab()[0];if(0==t)t=s;else if(t*s<0)throw new Error("scale color lightnesses must be monotonic")}}}return this._correctLightness=t,this}padding(t,e=t){return t?(this._paddingLeft=t,this._paddingRight=e,this):[this._paddingLeft,this._paddingRight]}colors(t,e="hex"){let n;if(void 0===t)n=this._colors.slice();else if(1==t)n=[this._color((this._min+this._max)/2)];else if(t>1)n=Array.from({length:t},(e,n)=>this._color(m(this._min,this._max,n/(t-1))));else{let t;n=(t=this._classes&&this._classes.length>2?Array.from({length:this._classes.length-1},(t,e)=>.5*(this._classes[e]+this._classes[e+1])):this.domain()).map(t=>this._color(t))}return"color"!=e?n.map(t=>t[e]()):n}cache(t){return void 0===t?!!this._cache:(this._cache=t?this._cache||new Map:void 0,this)}gamma(t){return void 0===t?this._gamma:(this._gamma=t,this)}_at(t){const e=this._color(t);return this._out?e[this._out]():e}_init(t){this._colors=t,"function"!=typeof t&&(this._pos=t.map((e,n)=>n/(t.length-1))),this._mode="rgb",this.domain(0,1),this._paddingLeft=0,this._paddingRight=0,this._correctLightness=!1,this._cache=new Map,this._gamma=1}_getClass(t){return this._classes.findIndex(e=>t<=e)-1}_color(t,e=!1){let n;if(e)n=t;else{const e=this._min,s=this._max;if(this._classes&&this._classes.length>2){n=this._getClass(t)/(this._classes.length-2)}else n=s!==e?(t-e)/(s-e):1;this._correctLightness&&(n=this._tCorrectedLightness(n))}n=n**this._gamma;const s=n=y(n=(this._paddingLeft+n)/(1+this._paddingLeft+this._paddingRight),0,1),i=this._cache&&this._cache.get(s);if(i)return i;{let t;if(Array.isArray(this._colors))for(let e=0;e<this._pos.length;e++){const s=this._pos[e];if(n<=s){t=this._colors[e];break}if(n>=s&&e==this._pos.length-1){t=this._colors[e];break}if(n>s&&n<this._pos[e+1]){n=(n-s)/(this._pos[e+1]-s),t=N(this._colors[e],this._colors[e+1],n,this._mode);break}}else t=this._colors(n);return this._cache&&this._cache.set(s,t),t}}_tCorrectedLightness(t){const e=m(this._color(0,!0).lab()[0],this._color(1,!0).lab()[0],t);return function(t,e,n,s){let i=t(e);for(;s--;){const s=(e+n)/2,r=t(s);c(i)==c(r)?(e=s,i=r):n=s}return(e+n)/2}(t=>this._color(t,!0).lab()[0]-e,0,1,8)}_resetCache(){this._cache&&this._cache.clear()}}var Z;function Q(t,e){const n=E(t).luminance(),s=E(e).luminance();return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}function tt(t,e,n="lab"){const s=E(t)[n](),i=E(e)[n](),r=s.map((t,e)=>t-i[e]);return v(...r)}function et(t,e,n=1,o=1){const[a,l,h]=E(t).lab(),[u,c,d]=E(e).lab(),g=p(l*l+h*h),f=p(c*c+d*d),v=a<16?.511:.040975*a/(1+.01765*a),m=.0638*g/(1+.0131*g)+.638,y=lt(g<1e-6?0:i(h,l)*w),_=y>=164&&y<=345?.56+s(.2*r((y+168)*x)):.36+s(.4*r((y+35)*x)),b=g*g*g*g,z=p(b/(b+1900)),j=m*(z*_+1-z),S=g-f,A=l-c,k=h-d,O=(a-u)/(n*v),C=S/(o*m);return p(O*O+C*C+(A*A+k*k-S*S)/(j*j))}function nt(t){const e={min:1/0,max:-1/0,sum:0,values:[],count:0};return t.forEach(t=>(function(t){null==t||isNaN(t)||(e.values.push(t),e.sum+=t,t<e.min&&(e.min=t),t>e.max&&(e.max=t),e.count+=1)})(t)),e.domain=[e.min,e.max],e.limits=function(t,e){return st(this,t,e)},e}function st(t,e="e",n=7){const i=Array.isArray(t)?nt(t):t,{min:r,max:l,values:h}=i;if(h.sort((t,e)=>t-e),1==n)return[r,l];if(e.startsWith("c"))return[r,l];if(e.startsWith("e"))return Array.from({length:n+1},(t,e)=>m(r,l,e/n));if(e.startsWith("l")){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const t=Math.LOG10E*a(r),e=Math.LOG10E*a(l);return Array.from({length:n+1},(s,i)=>10**m(t,e,i/n))}if(e.startsWith("q"))return Array.from({length:n+1},(t,e)=>{const s=(h.length-1)*e/n,i=o(s);return i==s?h[i]:m(h[i],h[i+1],s-i)});if(e.startsWith("k")){const t=h.length,e=new Array(t),i=new Array(n);let o=!0,a=0,u=Array.from({length:n+1},(t,e)=>m(r,l,e/n));do{i.fill(0);for(let t=0;t<h.length;t++){const n=h[t],r=Bt(u,t=>-s(t-n));i[r]++,e[t]=r}const t=new Array(n).fill(0);for(let n=0;n<e.length;n++){t[e[n]]+=h[n]}for(let e=0;e<t.length;e++)t[e]/=i[e];o=t.some((t,e)=>t!=u[e]),u=t}while(a++<200&&o);const c=Array.from({length:n},()=>[]);for(let t=0;t<e.length;t++){c[e[t]].push(h[t])}const d=[];for(const t of c)d.push(t[0],t[t.length-1]);d.sort((t,e)=>t-e);const p=[];p.push(d[0]);for(let t=1;t<d.length;t+=2){const e=d[t];isNaN(e)||-1!=p.indexOf(e)||p.push(e)}return p}throw new Error("unknown mode")}!function(t){t.cool=function(){return X([B(180,1,.9),B(250,.7,.4)])},t.hot=function(){return X(["#000","#f00","#ff0","#fff"]).mode("rgb")}}(Z||(Z={}));const it={},rt={};function ot(t,e){if(Array.isArray(t[0])&&(t=t[0]),!e)if(1==t.length&&t[0]in k)e="name";else if(1==t.length&&"string"==typeof t[0])e="css";else if(3==t.length)e="rgb";else if(4==t.length&&"number"==typeof t[3]&&t[3]>=0&&t[3]<=1)e="rgb";else{if(!(1==t.length&&"number"==typeof t[0]&&t[0]>=0&&t[0]<=16777215))throw new Error("could not guess mode. args "+JSON.stringify(t));e="num"}const n=rt[e](...t);return new z(n[0],n[1],n[2],void 0!==n[3]?n[3]:1)}function at(t){let e;if(e=t.match(/^#?([A-F\d]{2})([A-F\d]{2})([A-F\d]{2})([A-F\d]{2})?$/i))return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?parseInt(e[4],16)/255:1];if(e=t.match(/^#?([A-F\d])([A-F\d])([A-F\d])([A-F\d])?$/i))return[17*parseInt(e[1],16),17*parseInt(e[2],16),17*parseInt(e[3],16),e[4]?17*parseInt(e[4],16)/255:1];throw new Error("invalid hex color: "+t)}function lt(t){return(t%360+360)%360}function ht(t){if(!("number"==typeof t&&t>=0&&t<=16777215))throw new Error("unknown num color: "+t);return[t>>16,t>>8&255,255&t,1]}it.xyz=it.rgb=it.lab=function(t,e,n,s){const i=t[s](),r=e[s]();return ot([m(i[0],r[0],n),m(i[1],r[1],n),m(i[2],r[2],n),m(t.alpha(),e.alpha(),n)],s)},it.num=function(t,e,n){return $(m(t.num(),e.num(),n))},it.lrgb=function(t,e,n){const[s,i,r,o]=t.rgba(!1,!1),[a,l,h,u]=e.rgba(!1,!1);return new z(p(s**2*(1-n)+a**2*n),p(i**2*(1-n)+l**2*n),p(r**2*(1-n)+h**2*n),m(o,u,n))},rt.lrgb=rt.rgb,rt.hex=at,rt.hsl=At,rt.hsv=function(t,e,n,i=1){t=lt(t);const r=n*e;return St(t,r,r*(1-s(t/60%2-1)),n-r,i)},rt.num=ht;const ut="\\s*",ct="([+-]?(?:\\d*\\.?)?\\d+(?:[eE][+-]?\\d+)?)",dt=new RegExp(["^rgba?\\(",ct,",",ct,",",ct,"(?:,",ct+"(%)?",")?\\)$"].join(ut),"i"),pt=new RegExp(["^rgba?\\(",ct,ct,ct,"(?:/",ct+"(%)?",")?\\)$"].join(ut),"i"),gt=new RegExp(["^rgba?\\(",ct+"%",",",ct+"%",",",ct+"%","(?:,",ct+"(%)?",")?\\)$"].join(ut),"i"),ft=new RegExp(["^rgba?\\(",ct+"%",ct+"%",ct+"%","(?:/",ct+"(%)?",")?\\)$"].join(ut),"i"),vt=new RegExp(["^hsla?\\(",ct+"(deg|rad|turn)?",",",ct+"%",",",ct+"%","(?:,",ct+"(%)?",")?\\)$"].join(ut),"i"),mt=new RegExp(["^hsla?\\(",ct+"(deg|rad|turn)?\\s+"+ct+"%",ct+"%","(?:/",ct+"(%)?",")?\\)$"].join(ut),"i");function yt(t){if(k&&k.hasOwnProperty(t))return ht(k[t.toLowerCase()]);let e;if(e=t.match(dt)||t.match(pt))return[y(+e[1],0,255),y(+e[2],0,255),y(+e[3],0,255),e[4]?y(e[5]?+e[4]/100:+e[4]):1];if(e=t.match(gt)||t.match(ft))return[255*y(+e[1]/100),255*y(+e[2]/100),255*y(+e[3]/100),e[4]?y(e[5]?+e[4]/100:+e[4]):1];if(e=t.match(vt)||t.match(mt)){const t={deg:1,rad:w,turn:360},n=e[2]?e[2].toLowerCase():"deg";return At((+e[1]*t[n]%360+360)%360,y(+e[3]/100),y(+e[4]/100),e[5]?y(e[6]?+e[5]/100:+e[5]):1)}return at(t)}function _t(t){return u(100*t)/100}function bt(t){const e=t/255;return e<=.04045?e/12.92:((e+.055)/1.055)**2.4}function xt(t){return t<=.0031308?12.92*t*255:255*(1.055*t**(1/2.4)-.055)}function wt(t){const e=t/100;let n,s,i;return e<66?(n=255,s=-155.25485562709179-.44596950469579133*(e-2)+104.49216199393888*a(e-2),i=e<20?0:.8274096064007395*(e-10)-254.76935184120902+115.67994401066147*a(e-10)):(n=351.97690566805693+.114206453784165*(e-55)-40.25366309332127*a(e-55),s=325.4494125711974+.07943456536662342*(e-50)-28.0852963507957*a(e-50),i=255),[n,s,i]}function Et(t){return function(e,n){const[s,i,r]=t(E(n).rgb(),E(e).rgb());return q(s,i,r)}}function zt(t){return function(e,n){return e.map((e,s)=>t(e,n[s]))}}function jt(t,e,n){const s=l(t,e,n),i=h(t,e,n),r=i-s;let o;return[60*(o=0==r?0:t==i?(e-n)/r+(e<n?6:0):e==i?2+(n-t)/r:4+(t-e)/r),s,i]}function St(t,e,n,s,i){const r=255*s,o=255*e+r,a=255*n+r;return t<60?[o,a,r,i]:t<120?[a,o,r,i]:t<180?[r,o,a,i]:t<240?[r,a,o,i]:t<300?[a,r,o,i]:[o,r,a,i]}function At(t,e,n,i=1){t=lt(t);const r=(1-s(2*n-1))*e;return St(t,r,r*(1-s(t/60%2-1)),n-r/2,i)}function kt(t,e,n,s=1){const[i,r,o]=function(t,e,n){function s(t){return t>Lt?t**3:Rt*(t-4/29)}return[Ct*s((t+16)/116+e/500),Mt*s((t+16)/116),Nt*s((t+16)/116-n/200)]}(t,e,n);return It(i,r,o,s)}rt.css=yt,rt.name=function(t){return ht(k[t])},rt.lch=function(t,e,n,s=1){const[,i,o]=function(t,e,n){return[t,r(n*x)*e,d(n*x)*e]}(t,e,n);return kt(t,i,o,s)},rt.cmyk=function(t,e,n,s,i=1){return 1==s?[0,0,0,i]:[255*(1-t)*(1-s),255*(1-e)*(1-s),255*(1-n)*(1-s),i]},rt.gl=function(t,e,n,s=1){return[255*t,255*e,255*n,s]},rt.rgb=((...t)=>t),rt.temperature=rt.kelvin=rt.K=wt,rt.hcg=function(t,e,n,i=1){const r=n*(1-e);return St(t=lt(t),e,e*(1-s(t/60%2-1)),r,i)};const Ot=18,Ct=.95047,Mt=1,Nt=1.08883,Lt=.206896552,Rt=.12841855,Pt=.008856452;function Ft(t,e,n){const[s,i,r]=Tt(t,e,n);return function(t,e,n){function s(t){return t>Pt?g(t):t/Rt+4/29}return[116*s(e/Mt)-16,500*(s(t/Ct)-s(e/Mt)),200*(s(e/Mt)-s(n/Nt))]}(s,i,r)}function Tt(t,e,n){const s=bt(t),i=bt(e),r=bt(n);return[.4124564*s+.3575761*i+.1804375*r,.2126729*s+.7151522*i+.072175*r,.0193339*s+.119192*i+.9503041*r]}function It(t,e,n,s=1){const i=-.969266*t+1.8760108*e+.041556*n,r=.0556434*t-.2040259*e+1.0572252*n;return[xt(3.2404542*t-1.5371385*e-.4985314*n),xt(i),xt(r),s]}function Bt(t,e){let n=-1/0,s=-1;for(let i=0;i<t.length;i++){const r=e(t[i]);r>n&&(n=r,s=i)}return s}rt.xyz=It,rt.lab=kt,rt.hsi=function(t,e,n,s=1){let i,o,a,l=t*x;return l<2*f/3?o=1-((a=(1-e)/3)+(i=(1+e*r(l)/r(f/3-l))/3)):l<4*f/3?a=1-((i=(1-e)/3)+(o=(1+e*r(l-=2*f/3)/r(f/3-l))/3)):i=1-((o=(1-e)/3)+(a=(1+e*r(l-=4*f/3)/r(f/3-l))/3)),[3*n*i*255,3*n*o*255,3*n*a*255,s]},it.hsv=it.hsl=it.hsi=it.lch=it.hcg=function(t,e,n,s){const[i,r,o]=t[s](),[a,l,h]=e[s]();function u(t,e,n){return t+n*(lt(e-t+180)-180)}return E(("h"==s.charAt(0)?u:m)(i,a,n),m(r,l,n),("h"==s.charAt(2)?u:m)(o,h,n),s)}},"./node_modules/define-properties/index.js":function(t,e,n){"use strict";var s=n("./node_modules/object-keys/index.js"),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,o=Array.prototype.concat,a=Object.defineProperty,l=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),h=function(t,e,n,s){var i;e in t&&("function"!=typeof(i=s)||"[object Function]"!==r.call(i)||!s())||(l?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},u=function(t,e){var n=arguments.length>2?arguments[2]:{},r=s(e);i&&(r=o.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)h(t,r[a],e[r[a]],n[r[a]])};u.supportsDescriptors=!!l,t.exports=u},"./node_modules/es-abstract/2020/RequireObjectCoercible.js":function(t,e,n){"use strict";t.exports=n("./node_modules/es-abstract/5/CheckObjectCoercible.js")},"./node_modules/es-abstract/2020/ToString.js":function(t,e,n){"use strict";var s=n("./node_modules/get-intrinsic/index.js"),i=s("%String%"),r=s("%TypeError%");t.exports=function(t){if("symbol"==typeof t)throw new r("Cannot convert a Symbol value to a string");return i(t)}},"./node_modules/es-abstract/5/CheckObjectCoercible.js":function(t,e,n){"use strict";var s=n("./node_modules/get-intrinsic/index.js")("%TypeError%");t.exports=function(t,e){if(null==t)throw new s(e||"Cannot call method on "+t);return t}},"./node_modules/for-each/index.js":function(t,e,n){"use strict";var s=n("./node_modules/is-callable/index.js"),i=Object.prototype.toString,r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===i.call(t)?function(t,e,n){for(var s=0,i=t.length;s<i;s++)r.call(t,s)&&(null==n?e(t[s],s,t):e.call(n,t[s],s,t))}(t,e,o):"string"==typeof t?function(t,e,n){for(var s=0,i=t.length;s<i;s++)null==n?e(t.charAt(s),s,t):e.call(n,t.charAt(s),s,t)}(t,e,o):function(t,e,n){for(var s in t)r.call(t,s)&&(null==n?e(t[s],s,t):e.call(n,t[s],s,t))}(t,e,o)}},"./node_modules/function-bind/implementation.js":function(t,e,n){"use strict";var s=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=s.call(arguments,1),o=Math.max(0,e.length-r.length),a=[],l=0;l<o;l++)a.push("$"+l);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var i=e.apply(this,r.concat(s.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(s.call(arguments)))}),e.prototype){var h=function(){};h.prototype=e.prototype,n.prototype=new h,h.prototype=null}return n}},"./node_modules/function-bind/index.js":function(t,e,n){"use strict";var s=n("./node_modules/function-bind/implementation.js");t.exports=Function.prototype.bind||s},"./node_modules/get-intrinsic/index.js":function(t,e,n){"use strict";var s=SyntaxError,i=Function,r=TypeError,o=function(t){try{return i('"use strict"; return ('+t+").constructor;")()}catch(t){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(t){a=null}var l=function(){throw new r},h=a?function(){try{return arguments.callee,l}catch(t){try{return a(arguments,"callee").get}catch(t){return l}}}():l,u=n("./node_modules/has-symbols/index.js")(),c=Object.getPrototypeOf||function(t){return t.__proto__},d={},p="undefined"==typeof Uint8Array?void 0:c(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":u?c([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?c(c([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?c((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?c((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?c(""[Symbol.iterator]()):void 0,"%Symbol%":u?Symbol:void 0,"%SyntaxError%":s,"%ThrowTypeError%":h,"%TypedArray%":p,"%TypeError%":r,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n("./node_modules/function-bind/index.js"),m=n("./node_modules/has/src/index.js"),y=v.call(Function.call,Array.prototype.concat),_=v.call(Function.apply,Array.prototype.splice),b=v.call(Function.call,String.prototype.replace),x=v.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,z=function(t,e){var n,i=t;if(m(f,i)&&(i="%"+(n=f[i])[0]+"%"),m(g,i)){var a=g[i];if(a===d&&(a=function t(e){var n;if("%AsyncFunction%"===e)n=o("async function () {}");else if("%GeneratorFunction%"===e)n=o("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=o("async function* () {}");else if("%AsyncGenerator%"===e){var s=t("%AsyncGeneratorFunction%");s&&(n=s.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=c(i.prototype))}return g[e]=n,n}(i)),void 0===a&&!e)throw new r("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new s("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new r('"allowMissing" argument must be a boolean');var n=function(t){var e=x(t,0,1),n=x(t,-1);if("%"===e&&"%"!==n)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new s("invalid intrinsic syntax, expected opening `%`");var i=[];return b(t,w,function(t,e,n,s){i[i.length]=n?b(s,E,"$1"):e||t}),i}(t),i=n.length>0?n[0]:"",o=z("%"+i+"%",e),l=o.name,h=o.value,u=!1,c=o.alias;c&&(i=c[0],_(n,y([0,1],c)));for(var d=1,p=!0;d<n.length;d+=1){var f=n[d],v=x(f,0,1),j=x(f,-1);if(('"'===v||"'"===v||"`"===v||'"'===j||"'"===j||"`"===j)&&v!==j)throw new s("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),m(g,l="%"+(i+="."+f)+"%"))h=g[l];else if(null!=h){if(!(f in h)){if(!e)throw new r("base intrinsic for "+t+" exists, but the property is not available.");return}if(a&&d+1>=n.length){var S=a(h,f);h=(p=!!S)&&"get"in S&&!("originalValue"in S.get)?S.get:h[f]}else p=m(h,f),h=h[f];p&&!u&&(g[l]=h)}}return h}},"./node_modules/has-symbols/index.js":function(t,e,n){"use strict";var s="undefined"!=typeof Symbol&&Symbol,i=n("./node_modules/has-symbols/shams.js");t.exports=function(){return"function"==typeof s&&("function"==typeof Symbol&&("symbol"==typeof s("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},"./node_modules/has-symbols/shams.js":function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var s=Object.getOwnPropertySymbols(t);if(1!==s.length||s[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},"./node_modules/has/src/index.js":function(t,e,n){"use strict";var s=n("./node_modules/function-bind/index.js");t.exports=s.call(Function.call,Object.prototype.hasOwnProperty)},"./node_modules/is-callable/index.js":function(t,e,n){"use strict";var s,i,r=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{s=Object.defineProperty({},"length",{get:function(){throw i}}),i={},o(function(){throw 42},null,s)}catch(t){t!==i&&(o=null)}else o=null;var a=/^\s*class\b/,l=function(t){try{var e=r.call(t);return a.test(e)}catch(t){return!1}},h=Object.prototype.toString,u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,c="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};t.exports=o?function(t){if(t===c)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{o(t,null,s)}catch(t){if(t!==i)return!1}return!l(t)}:function(t){if(t===c)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(u)return function(t){try{return!l(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(l(t))return!1;var e=h.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},"./node_modules/ngraph.events/index.js":function(t,e){t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,s,i){if("function"!=typeof s)throw new Error("callback is expected to be a function");var r=e[n];return r||(r=e[n]=[]),r.push({callback:s,ctx:i}),t},off:function(n,s){var i=void 0===n;if(i)return e=Object.create(null),t;if(e[n]){var r="function"!=typeof s;if(r)delete e[n];else for(var o=e[n],a=0;a<o.length;++a)o[a].callback===s&&o.splice(a,1)}return t},fire:function(n){var s,i=e[n];if(!i)return t;arguments.length>1&&(s=Array.prototype.splice.call(arguments,1));for(var r=0;r<i.length;++r){var o=i[r];o.callback.apply(o.ctx,s)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},"./node_modules/ngraph.graph/index.js":function(t,e,n){t.exports=function(t){"uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);if("function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=[],h={},u=0,c=t.multigraph?function(t,e,n){var s=l(t,e),i=h.hasOwnProperty(s);if(i||A(t,e)){i||(h[s]=0);var r="@"+ ++h[s];s=l(t+r,e+r)}return new a(t,e,n,s)}:function(t,e,n){var s=l(t,e);return new a(t,e,n,s)},d=[],p=k,g=k,f=k,v=k,m={addNode:x,addLink:function(t,e,s){f();var i=w(t)||x(t),r=w(e)||x(e),a=c(t,e,s);n.push(a),o(i,a),t!==e&&o(r,a);return p(a,"add"),v(),a},removeLink:S,removeNode:E,getNode:w,getNodeCount:z,getLinkCount:j,getLinksCount:j,getNodesCount:z,getLinks:function(t){var e=w(t);return e?e.links:null},forEachNode:M,forEachLinkedNode:function(t,n,s){var i=w(t);if(i&&i.links&&"function"==typeof n)return s?function(t,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(r.fromId===n&&s(e.get(r.toId),r))return!0}}(i.links,t,n):function(t,n,s){for(var i=0;i<t.length;++i){var r=t[i],o=r.fromId===n?r.toId:r.fromId;if(s(e.get(o),r))return!0}}(i.links,t,n)},forEachLink:function(t){var e,s;if("function"==typeof t)for(e=0,s=n.length;e<s;++e)t(n[e])},beginUpdate:f,endUpdate:v,clear:function(){f(),M(function(t){E(t.id)}),v()},hasLink:A,hasNode:w,getLink:A};return s(m),y=m.on,m.on=function(){return m.beginUpdate=f=O,m.endUpdate=v=C,p=_,g=b,m.on=y,y.apply(m,arguments)},m;var y;function _(t,e){d.push({link:t,changeType:e})}function b(t,e){d.push({node:t,changeType:e})}function x(t,n){if(void 0===t)throw new Error("Invalid node identifier");f();var s=w(t);return s?(s.data=n,g(s,"update")):(s=new r(t,n),g(s,"add")),e.set(t,s),v(),s}function w(t){return e.get(t)}function E(t){var n=w(t);if(!n)return!1;f();var s=n.links;if(s){n.links=null;for(var i=0;i<s.length;++i)S(s[i])}return e.delete(t),g(n,"remove"),v(),!0}function z(){return e.size}function j(){return n.length}function S(t){if(!t)return!1;var e=i(t,n);if(e<0)return!1;f(),n.splice(e,1);var s=w(t.fromId),r=w(t.toId);return s&&(e=i(t,s.links))>=0&&s.links.splice(e,1),r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),p(t,"remove"),v(),!0}function A(t,e){var n,s=w(t);if(!s||!s.links)return null;for(n=0;n<s.links.length;++n){var i=s.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function k(){}function O(){u+=1}function C(){0===(u-=1)&&d.length>0&&(m.fire("changed",d),d.length=0)}function M(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var n=e.values(),s=n.next();!s.done;){if(t(s.value))return!0;s=n.next()}}};var s=n("./node_modules/ngraph.events/index.js");function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,s=e.length;for(n=0;n<s;n+=1)if(e[n]===t)return n;return-1}function r(t,e){this.id=t,this.links=null,this.data=e}function o(t,e){t.links?t.links.push(e):t.links=[e]}function a(t,e,n,s){this.fromId=t,this.toId=e,this.data=n,this.id=s}function l(t,e){return t.toString()+"👉 "+e.toString()}},"./node_modules/ngraph.louvain/index.js":function(t,e,n){var s=n("./node_modules/ngraph.louvain/lib/createCommunityGraph.js"),i=n("./node_modules/ngraph.louvain/lib/createCommunity.js");t.exports=function(t,e){var n=s(t),r=i(n,e),o=r.modularity(),a=r.optimizeModularity(),l=r.modularity();return{canCoarse:function(){return a},originalModularity:o,newModularity:l,getClass:function(t){var e=n.getNodeIdFromNgraph(t);return r.getClass(e)}}}},"./node_modules/ngraph.louvain/lib/createCommunity.js":function(t,e,n){var s=n("./node_modules/ngraph.random/index.js"),i=s.randomIterator;t.exports=function(t,e){for(var n=t.weight,r=t.nodeCount,o=s.random(42),a=new Float32Array(r),l=new Float32Array(r),h=new Uint32Array(r),u=0;u<r;++u)h[u]=u,a[u]=t.getWeightedDegree(u),l[u]=t.getSelfLoopsCount(u);return{modularity:f,optimizeModularity:function(){e&&void 0!==e.seed&&(o=s.random(e.seed));var n,a,l=function(){for(var t=[],e=0;e<r;++e)t[e]=e;return i(t,o).shuffle(),t}(),u=f(),v=!1;do{a=0,n=u;for(var m=0;m<l.length;++m){var y=l[m],_=h[y],b=c(y),x=b.get(_);p(y,_,x);var w=t.getWeightedDegree(y),E=_,z=0;b.forEach(function(t,e){var n=d(t,e,w);n<=z||(E=e,z=n)});var j=b.get(E);g(y,E,j),E!==_&&(a+=1)}u=f(),a>0&&(v=!0)}while(a>0&&u-n>1e-6);return v},getClass:function(t){return h[t]}};function c(e){var n=new Map;return n.set(h[e],0),t.forEachNeigbour(e,function(t,e){var s=h[t],i=n.get(s)||0;n.set(s,i+e)}),n}function d(t,e,s){var i=a[e];return t-i*s/n}function p(e,n,s){a[n]-=t.getWeightedDegree(e),l[n]-=2*s+t.getSelfLoopsCount(e),h[e]=-1}function g(e,n,s){a[n]+=t.getWeightedDegree(e),l[n]+=2*s+t.getSelfLoopsCount(e),h[e]=n}function f(){for(var t=0,e=0;e<r;++e)if(a[e]>0){var s=a[e]/n;t+=l[e]/n-s*s}return t}}},"./node_modules/ngraph.louvain/lib/createCommunityGraph.js":function(t,e){t.exports=function(t){var e=t.getNodesCount(),n=0,s=[],i=new Map;return t.forEachNode(function(t){var e,n;e=t.id,n=s.length,i.set(e,n),s.push({selfLoopsCount:0,weightedDegree:0,neighbours:null})}),t.forEachLink(function(t){var e,n=r(t.fromId),i=r(t.toId),a=(e=t.data)?"number"==typeof e?e:"number"==typeof e.weight?e.weight:1:1,l=s[n],h=s[i];n===i?(l.selfLoopsCount+=a,l.weightedDegree+=a):(o(l,i,a),o(h,n,a),l.weightedDegree+=a,h.weightedDegree+=a)}),n=function(){for(var t=0,n=0;n<e;++n)t+=a(n);return t}(),{nodeCount:e,weight:n,forEachNeigbour:function(t,e){var n=l(t);if(n.neighbours)for(var s=0;s<n.neighbours.length;++s){var i=n.neighbours[s];e(i.id,i.weight)}},getWeightedDegree:a,getSelfLoopsCount:function(t){return l(t).selfLoopsCount},getNodeIdFromNgraph:r};function r(t){var e=i.get(t);if(void 0===e)throw new Error("Unknown node id: "+t);return e}function o(t,e,n){var s={id:e,weight:n};t.neighbours?t.neighbours.push(s):t.neighbours=[s]}function a(t){return l(t).weightedDegree}function l(t){var e=s[t];if(!e)throw new Error("cannot find node with id: "+t);return e}}},"./node_modules/ngraph.random/index.js":function(t,e){function n(t){var e="number"==typeof t?t:+new Date,n=function(){return(268435455&(e=4294967295&(3042594569^(e=(e=4294967295&((e=(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+374761393+(e<<5)&4294967295)+3550635116^e<<9))+4251993797+(e<<3)&4294967295)^e>>>16)))/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}t.exports={random:n,randomIterator:function(t,e){var s=e||n();if("function"!=typeof s.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var n,i,r;for(n=t.length-1;n>0;--n)i=s.next(n+1),r=t[i],t[i]=t[n],t[n]=r,e(r);t.length&&e(t[0])},shuffle:function(){var e,n,i;for(e=t.length-1;e>0;--e)n=s.next(e+1),i=t[n],t[n]=t[e],t[e]=i;return t}}}}},"./node_modules/node-polyglot/index.js":function(t,e,n){"use strict";var s=n("./node_modules/for-each/index.js"),i=n("./node_modules/node-polyglot/node_modules/warning/warning.js"),r=n("./node_modules/has/src/index.js"),o=n("./node_modules/string.prototype.trim/index.js"),a=function(t){i(!1,t)},l=String.prototype.replace,h=String.prototype.split,u="||||",c=function(t){var e=t%100,n=e%10;return 11!==e&&1===n?0:2<=n&&n<=4&&!(e>=12&&e<=14)?1:2},d={pluralTypes:{arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:c,chinese:function(){return 0},croatian:c,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:c,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function p(t,e){var n,i,r=(n=t.pluralTypeToLanguages,i={},s(n,function(t,e){s(t,function(t){i[t]=e})}),i);return r[e]||r[h.call(e,/-/,1)[0]]||r.en}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var f=/%\{(.*?)\}/g;function v(t,e,n,s,i){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var a=t,c=s||f,g=i||d,v="number"==typeof e?{smart_count:e}:e;if(null!=v.smart_count&&a){var m=h.call(a,u);a=o(m[function(t,e,n){return t.pluralTypes[p(t,e)](n)}(g,n||"en",v.smart_count)]||m[0])}return a=l.call(a,c,function(t,e){return r(v,e)&&null!=v[e]?v[e]:t})}function m(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?v:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||a,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",n=t&&t.suffix||"}";if(e===u||n===u)throw new RangeError('"'+u+'" token is reserved for pluralization');return new RegExp(g(e)+"(.*?)"+g(n),"g")}(e.interpolation),this.pluralRules=e.pluralRules||d}m.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},m.prototype.extend=function(t,e){s(t,function(t,n){var s=e?e+"."+n:n;"object"==typeof t?this.extend(t,s):this.phrases[s]=t},this)},m.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:s(t,function(t,n){var s=e?e+"."+n:n;"object"==typeof t?this.unset(t,s):delete this.phrases[s]},this)},m.prototype.clear=function(){this.phrases={}},m.prototype.replace=function(t){this.clear(),this.extend(t)},m.prototype.t=function(t,e){var n,s,i=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof i._)n=i._;else if(this.onMissingKey){s=(0,this.onMissingKey)(t,i,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+t+'"'),s=t;return"string"==typeof n&&(s=v(n,i,this.currentLocale,this.tokenRegex,this.pluralRules)),s},m.prototype.has=function(t){return r(this.phrases,t)},m.transformPhrase=function(t,e,n){return v(t,e,n)},t.exports=m},"./node_modules/node-polyglot/node_modules/warning/warning.js":function(t,e,n){"use strict";var s=function(){};s=function(t,e,n){var s=arguments.length;n=new Array(s>2?s-2:0);for(var i=2;i<s;i++)n[i-2]=arguments[i];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");t||function(t,e){var n=arguments.length;e=new Array(n>1?n-1:0);for(var s=1;s<n;s++)e[s-1]=arguments[s];var i=0,r="Warning: "+t.replace(/%s/g,function(){return e[i++]});"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(t){}}.apply(null,[e].concat(n))},t.exports=s},"./node_modules/object-keys/implementation.js":function(t,e,n){"use strict";var s;if(!Object.keys){var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=n("./node_modules/object-keys/isArguments.js"),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),h=a.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();s=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===r.call(t),s=o(t),a=e&&"[object String]"===r.call(t),d=[];if(!e&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var g=h&&n;if(a&&t.length>0&&!i.call(t,0))for(var f=0;f<t.length;++f)d.push(String(f));if(s&&t.length>0)for(var v=0;v<t.length;++v)d.push(String(v));else for(var m in t)g&&"prototype"===m||!i.call(t,m)||d.push(String(m));if(l)for(var y=function(t){if("undefined"==typeof window||!p)return c(t);try{return c(t)}catch(t){return!1}}(t),_=0;_<u.length;++_)y&&"constructor"===u[_]||!i.call(t,u[_])||d.push(u[_]);return d}}t.exports=s},"./node_modules/object-keys/index.js":function(t,e,n){"use strict";var s=Array.prototype.slice,i=n("./node_modules/object-keys/isArguments.js"),r=Object.keys,o=r?function(t){return r(t)}:n("./node_modules/object-keys/implementation.js"),a=Object.keys;o.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return i(t)?a(s.call(t)):a(t)}):Object.keys=o;return Object.keys||o},t.exports=o},"./node_modules/object-keys/isArguments.js":function(t,e,n){"use strict";var s=Object.prototype.toString;t.exports=function(t){var e=s.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===s.call(t.callee)),n}},"./node_modules/quadtree-lib/build/js/quadtree.min.js":function(t,e,n){var s,i,r;i=[],void 0===(r="function"==typeof(s=function(){return function(){function t(e){var n,s;if(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.maxElements=e.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!Number.isInteger(this.x)||!Number.isInteger(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");for(n in s=this,this.children={NW:{create:function(){return new t({x:s.x,y:s.y,width:Math.max(Math.floor(s.width/2),1),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},NE:{create:function(){return new t({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y,width:Math.ceil(s.width/2),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},SW:{create:function(){return new t({x:s.x,y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.max(Math.floor(s.width/2),1),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null},SE:{create:function(){return new t({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.ceil(s.width/2),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null}},this.children)this.children[n].get=function(){return null!=this.tree?this.tree:(this.tree=this.create(),this.tree)}}var e,n,s,i,r,o,a,l;return i=function(t){var e,n;return{x:Math.floor((null!=(e=t.width)?e:1)/2)+t.x,y:Math.floor((null!=(n=t.height)?n:1)/2)+t.y}},e=function(t,e){var n,s,i,r;return!(t.x>=e.x+(null!=(n=e.width)?n:1)||t.x+(null!=(s=t.width)?s:1)<=e.x||t.y>=e.y+(null!=(i=e.height)?i:1)||t.y+(null!=(r=t.height)?r:1)<=e.y)},n=function(t,e){var n;return n=i(e),t.x<n.x?t.y<n.y?"NW":"SW":t.y<n.y?"NE":"SE"},l=function(t){if("object"!=typeof t)throw new Error("Element must be an Object.");if(null==t.x||null==t.y)throw new Error("Coordinates properties are missing.");if((null!=t?t.width:void 0)<0||(null!=t?t.height:void 0)<0)throw new Error("Width and height must be positive integers.")},o=function(t){var e,n,s,i;return n=Math.max(Math.floor(t.width/2),1),s=Math.ceil(t.width/2),i=Math.max(Math.floor(t.height/2),1),e=Math.ceil(t.height/2),{NW:{x:t.x,y:t.y,width:n,height:i},NE:{x:t.x+n,y:t.y,width:s,height:i},SW:{x:t.x,y:t.y+i,width:n,height:e},SE:{x:t.x+n,y:t.y+i,width:s,height:e}}},s=function(t,n){var s,i,r,a;for(i in a=[],r=o(n))s=r[i],e(t,s)&&a.push(i);return a},r=function(t,e){var n;return(n=function(n){return t["_"+n]=t[n],Object.defineProperty(t,n,{set:function(t){return e.remove(this,!0),this["_"+n]=t,e.push(this)},get:function(){return this["_"+n]},configurable:!0})})("x"),n("y"),n("width"),n("height")},a=function(t){var e;return(e=function(e){if(null!=t["_"+e])return delete t[e],t[e]=t["_"+e],delete t["_"+e]})("x"),e("y"),e("width"),e("height")},t.prototype.clear=function(){var t,e;for(t in this.contents=[],this.oversized=[],this.size=0,e=[],this.children)e.push(this.children[t].tree=null);return e},t.prototype.push=function(t,e){return this.pushAll([t],e)},t.prototype.pushAll=function(t,e){var n,i,o,a,h,u,c,d,p,g,f,v,m,y,_,b,x,w,E,z;for(f=0,y=t.length;f<y;f++)g=t[f],l(g),e&&r(g,this);for(c=[{tree:this,elements:t}];c.length>0;){for(z=(x=c.shift()).tree,d={NW:null,NE:null,SW:null,SE:null},v=0,_=(u=x.elements).length;v<_;v++)if(h=u[v],z.size++,1!==(p=s(h,z)).length||1===z.width||1===z.height)z.oversized.push(h);else if(z.size-z.oversized.length<=z.maxElements)z.contents.push(h);else{for(a=p[0],E=z.children[a],null==d[a]&&(d[a]={tree:E.get(),elements:[]}),d[a].elements.push(h),m=0,b=(w=z.contents).length;m<b;m++)i=w[m],null==d[o=s(i,z)[0]]&&(d[o]={tree:z.children[o].get(),elements:[]}),d[o].elements.push(i);z.contents=[]}for(a in d)null!=(n=d[a])&&c.push(n)}return this},t.prototype.remove=function(t,e){var s,i;return l(t),(s=this.oversized.indexOf(t))>-1?(this.oversized.splice(s,1),this.size--,e||a(t),!0):(s=this.contents.indexOf(t))>-1?(this.contents.splice(s,1),this.size--,e||a(t),!0):!(null==(i=this.children[n(t,this)]).tree||!i.tree.remove(t,e)||(this.size--,0===i.tree.size&&(i.tree=null),0))},t.prototype.colliding=function(t,n){var i,r,o,a,h,u,c,d,p,g,f,v,m,y;for(null==n&&(n=e),l(t),h=[],o=[this];o.length>0;){for(u=0,p=(v=(y=o.shift()).oversized).length;u<p;u++)(r=v[u])!==t&&n(t,r)&&h.push(r);for(c=0,g=(m=y.contents).length;c<g;c++)(r=m[c])!==t&&n(t,r)&&h.push(r);for(0===(a=s(t,y)).length&&(a=[],t.x>=y.x+y.width&&a.push("NE"),t.y>=y.y+y.height&&a.push("SW"),a.length>0&&(1===a.length?a.push("SE"):a=["SE"])),d=0,f=a.length;d<f;d++)i=a[d],null!=y.children[i].tree&&o.push(y.children[i].tree)}return h},t.prototype.onCollision=function(t,n,i){var r,o,a,h,u,c,d,p,g,f,v,m,y;for(null==i&&(i=e),l(t),a=[this];a.length>0;){for(u=0,p=(v=(y=a.shift()).oversized).length;u<p;u++)(o=v[u])!==t&&i(t,o)&&n(o);for(c=0,g=(m=y.contents).length;c<g;c++)(o=m[c])!==t&&i(t,o)&&n(o);for(0===(h=s(t,y)).length&&(h=[],t.x>=y.x+y.width&&h.push("NE"),t.y>=y.y+y.height&&h.push("SW"),h.length>0&&(1===h.length?h.push("SE"):h=["SE"])),d=0,f=h.length;d<f;d++)r=h[d],null!=y.children[r].tree&&a.push(y.children[r].tree)}return null},t.prototype.get=function(t){return this.where(t)},t.prototype.where=function(t){var e,s,i,r,o,a,h,u,c,d,p,g,f;if("object"==typeof t&&(null==t.x||null==t.y))return this.find(function(e){var n,s;for(s in n=!0,t)t[s]!==e[s]&&(n=!1);return n});for(l(t),r=[],i=[this];i.length>0;){for(o=0,u=(d=(f=i.shift()).oversized).length;o<u;o++){for(h in s=d[o],e=!0,t)t[h]!==s[h]&&(e=!1);e&&r.push(s)}for(a=0,c=(p=f.contents).length;a<c;a++){for(h in s=p[a],e=!0,t)t[h]!==s[h]&&(e=!1);e&&r.push(s)}null!=(g=f.children[n(t,f)]).tree&&i.push(g.tree)}return r},t.prototype.each=function(t){var e,n,s,i,r,o,a,l,h,u;for(n=[this];n.length>0;){for(i=0,o=(l=(u=n.shift()).oversized).length;i<o;i++)s=l[i],"function"==typeof t&&t(s);for(r=0,a=(h=u.contents).length;r<a;r++)s=h[r],"function"==typeof t&&t(s);for(e in u.children)null!=u.children[e].tree&&n.push(u.children[e].tree)}return this},t.prototype.find=function(t){var e,n,s,i,r,o,a,l,h,u,c;for(n=[this],i=[];n.length>0;){for(r=0,a=(h=(c=n.shift()).oversized).length;r<a;r++)s=h[r],("function"==typeof t?t(s):void 0)&&i.push(s);for(o=0,l=(u=c.contents).length;o<l;o++)s=u[o],("function"==typeof t?t(s):void 0)&&i.push(s);for(e in c.children)null!=c.children[e].tree&&n.push(c.children[e].tree)}return i},t.prototype.filter=function(e){var n;return(n=function(s){var i,r,o,a,l,h,u,c,d,p,g;for(i in(r=new t({x:s.x,y:s.y,width:s.width,height:s.height,maxElements:s.maxElements})).size=0,s.children)null!=s.children[i].tree&&(r.children[i].tree=n(s.children[i].tree),r.size+=null!=(c=null!=(d=r.children[i].tree)?d.size:void 0)?c:0);for(a=0,h=(p=s.oversized).length;a<h;a++)o=p[a],(null==e||("function"==typeof e?e(o):void 0))&&r.oversized.push(o);for(l=0,u=(g=s.contents).length;l<u;l++)o=g[l],(null==e||("function"==typeof e?e(o):void 0))&&r.contents.push(o);return r.size+=r.oversized.length+r.contents.length,0===r.size?null:r})(this)},t.prototype.reject=function(t){return this.filter(function(e){return!("function"==typeof t?t(e):void 0)})},t.prototype.visit=function(t){var e,n,s;for(n=[this];n.length>0;)for(e in s=n.shift(),t.bind(s)(),s.children)null!=s.children[e].tree&&n.push(s.children[e].tree);return this},t.prototype.pretty=function(){var t,e,n,s,i,r,o;for(r="",n=function(t){var e,n,s;for(s="",e=n=t;n<=0?e<0:e>0;n<=0?++e:--e)s+="   ";return s},e=[{label:"ROOT",tree:this,level:0}];e.length>0;){for(t in r+=(s=n((o=e.shift()).level))+"| "+o.label+"\n"+s+"| ------------\n",o.tree.oversized.length>0&&(r+=s+"| * Oversized elements *\n"+s+"|   "+o.tree.oversized+"\n"),o.tree.contents.length>0&&(r+=s+"| * Leaf content *\n"+s+"|   "+o.tree.contents+"\n"),i=!1,o.tree.children)null!=o.tree.children[t].tree&&(i=!0,e.unshift({label:t,tree:o.tree.children[t].tree,level:o.level+1}));i&&(r+=s+"└──┐\n")}return r},t}()})?s.apply(e,i):s)||(t.exports=r)},"./node_modules/split.js/split.js":function(t,e,n){t.exports=function(){"use strict";var t=window,e=t.document,n="addEventListener",s="removeEventListener",i="getBoundingClientRect",r=function(){return!1},o=t.attachEvent&&!t[n],a=["","-webkit-","-moz-","-o-"].filter(function(t){var n=e.createElement("div");return n.style.cssText="width:"+t+"calc(9px)",!!n.style.length}).shift()+"calc",l=function(t){return"string"==typeof t||t instanceof String?e.querySelector(t):t};return function(h,u){var c,d,p,g;void 0===u&&(u={});var f=l(h[0]).parentNode,v=t.getComputedStyle(f).flexDirection,m=u.sizes||h.map(function(){return 100/h.length}),y=void 0!==u.minSize?u.minSize:100,_=Array.isArray(y)?y:h.map(function(){return y}),b=void 0!==u.gutterSize?u.gutterSize:10,x=void 0!==u.snapOffset?u.snapOffset:30,w=u.direction||"horizontal",E=u.cursor||("horizontal"===w?"ew-resize":"ns-resize"),z=u.gutter||function(t,n){var s=e.createElement("div");return s.className="gutter gutter-"+n,s},j=u.elementStyle||function(t,e,n){var s={};return"string"==typeof e||e instanceof String?s[t]=e:s[t]=o?e+"%":a+"("+e+"% - "+n+"px)",s},S=u.gutterStyle||function(t,e){return(n={})[t]=e+"px",n;var n};function A(t,e,n){var s=j(c,e,n);Object.keys(s).forEach(function(e){return t.style[e]=s[e]})}function k(t){var e=g[this.a],n=g[this.b],s=e.size+n.size;e.size=t/this.size*s,n.size=s-t/this.size*s,A(e.element,e.size,this.aGutterSize),A(n.element,n.size,this.bGutterSize)}function O(){var t=g[this.a].element,e=g[this.b].element;this.size=t[i]()[c]+e[i]()[c]+this.aGutterSize+this.bGutterSize,this.start=t[i]()[p]}function C(e){var i=g[this.a].element,o=g[this.b].element;!this.dragging&&u.onDragStart&&u.onDragStart(),e.preventDefault(),this.dragging=!0,this.move=function(t){var e;this.dragging&&((e="touches"in t?t.touches[0][d]-this.start:t[d]-this.start)<=g[this.a].minSize+x+this.aGutterSize?e=g[this.a].minSize+this.aGutterSize:e>=this.size-(g[this.b].minSize+x+this.bGutterSize)&&(e=this.size-(g[this.b].minSize+this.bGutterSize)),k.call(this,e),u.onDrag&&u.onDrag())}.bind(this),this.stop=function(){var e=g[this.a].element,n=g[this.b].element;this.dragging&&u.onDragEnd&&u.onDragEnd(),this.dragging=!1,t[s]("mouseup",this.stop),t[s]("touchend",this.stop),t[s]("touchcancel",this.stop),this.parent[s]("mousemove",this.move),this.parent[s]("touchmove",this.move),delete this.stop,delete this.move,e[s]("selectstart",r),e[s]("dragstart",r),n[s]("selectstart",r),n[s]("dragstart",r),e.style.userSelect="",e.style.webkitUserSelect="",e.style.MozUserSelect="",e.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor=""}.bind(this),t[n]("mouseup",this.stop),t[n]("touchend",this.stop),t[n]("touchcancel",this.stop),this.parent[n]("mousemove",this.move),this.parent[n]("touchmove",this.move),i[n]("selectstart",r),i[n]("dragstart",r),o[n]("selectstart",r),o[n]("dragstart",r),i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none",i.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",this.gutter.style.cursor=E,this.parent.style.cursor=E,O.call(this)}"horizontal"===w?(c="width",d="clientX",p="left"):"vertical"===w&&(c="height",d="clientY",p="top");var M=[];function N(t){t.forEach(function(e,n){if(n>0){var s=M[n-1],i=g[s.a],r=g[s.b];i.size=t[n-1],r.size=e,A(i.element,i.size,s.aGutterSize),A(r.element,r.size,s.bGutterSize)}})}function L(){M.forEach(function(t){t.parent.removeChild(t.gutter),g[t.a].element.style[c]="",g[t.b].element.style[c]=""})}return g=h.map(function(t,e){var s,r={element:l(t),size:m[e],minSize:_[e]};if(e>0&&((s={a:e-1,b:e,dragging:!1,isFirst:1===e,isLast:e===h.length-1,direction:w,parent:f}).aGutterSize=b,s.bGutterSize=b,s.isFirst&&(s.aGutterSize=b/2),s.isLast&&(s.bGutterSize=b/2),"row-reverse"===v||"column-reverse"===v)){var a=s.a;s.a=s.b,s.b=a}if(!o&&e>0){var u=z(e,w);!function(t,e){var n=S(c,e);Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}(u,b),u[n]("mousedown",C.bind(s)),u[n]("touchstart",C.bind(s)),f.insertBefore(u,r.element),s.gutter=u}0===e||e===h.length-1?A(r.element,r.size,b/2):A(r.element,r.size,b);var d=r.element[i]()[c];return d<r.minSize&&(r.minSize=d),e>0&&M.push(s),r}),o?{setSizes:N,destroy:L}:{setSizes:N,getSizes:function(){return g.map(function(t){return t.size})},collapse:function(t){if(t===M.length){var e=M[t-1];O.call(e),o||k.call(e,e.size-e.bGutterSize)}else{var n=M[t];O.call(n),o||k.call(n,n.aGutterSize)}},destroy:L}}}()},"./node_modules/string.prototype.trim/implementation.js":function(t,e,n){"use strict";var s=n("./node_modules/es-abstract/2020/RequireObjectCoercible.js"),i=n("./node_modules/es-abstract/2020/ToString.js"),r=n("./node_modules/call-bind/callBound.js")("String.prototype.replace"),o=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=i(s(this));return r(r(t,o,""),a,"")}},"./node_modules/string.prototype.trim/index.js":function(t,e,n){"use strict";var s=n("./node_modules/call-bind/index.js"),i=n("./node_modules/define-properties/index.js"),r=n("./node_modules/string.prototype.trim/implementation.js"),o=n("./node_modules/string.prototype.trim/polyfill.js"),a=n("./node_modules/string.prototype.trim/shim.js"),l=s(o());i(l,{getPolyfill:o,implementation:r,shim:a}),t.exports=l},"./node_modules/string.prototype.trim/polyfill.js":function(t,e,n){"use strict";var s=n("./node_modules/string.prototype.trim/implementation.js");t.exports=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:s}},"./node_modules/string.prototype.trim/shim.js":function(t,e,n){"use strict";var s=n("./node_modules/define-properties/index.js"),i=n("./node_modules/string.prototype.trim/polyfill.js");t.exports=function(){var t=i();return s(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},"./src/@types/GUI.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"id_prefix",function(){return s});const s="scivi_fsgraph"},"./src/@types/Graph.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"GraphControlling",function(){return s});var s,i=n("./node_modules/ngraph.louvain/index.js"),r=n.n(i);!function(t){t.getFirstState=function(t){return t[Object.keys(t)[0]]},t.clusterize=function(t){const e=r()(t),n=[];return t.forEachNode(function(t){const s=e.getClass(t.id);var i=n.indexOf(s);-1==i&&(n.push(s),i=n.length-1),t.data.group=i}),n.length}}(s||(s={}))},"./src/@types/GraphView.ts":function(t,e,n){"use strict";var s;n.r(e),n.d(e,"GraphView",function(){return s}),function(t){t.onNodesReplaced=function(){this.quad_tree.clear(),Object.keys(this.aabbs).forEach(t=>{const e=this.aabbs[t],n=e.scene_object;e.x=n.position.x-n.size,e.y=n.position.y-n.size,this.quad_tree.push(e)})}}(s||(s={}))},"./src/@types/LayoutBuilder.ts":function(t,e,n){"use strict";var s;n.r(e),n.d(e,"ParamType",function(){return s}),n.d(e,"Param",function(){return i}),n.d(e,"ScalarParam",function(){return r}),n.d(e,"BooleanParam",function(){return o}),function(t){t[t.UNKNONW=0]="UNKNONW",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN"}(s||(s={}));class i{Reset(){this.value=this.range.default}}class r extends i{constructor(t,e,n,i){super(),this.value=n||t,this.range={min:t,max:e,default:n||t,step:i||0},this.type=s.NUMBER}}class o extends i{constructor(t){super(),this.value=t||!1,this.range={min:!1,max:!0,default:t||!1},this.type=s.BOOLEAN}}},"./src/CanvasManager/CanvasManager.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"CanvasManager",function(){return c});var s=n("./node_modules/quadtree-lib/build/js/quadtree.min.js"),i=n("./src/@types/GraphView.ts"),r=n("./src/Math/vec2.ts"),o=n("./src/CanvasManager/InputManager.ts"),a=n("./src/CanvasManager/GraphRenderer.ts"),l=n("./src/CanvasManager/EventHandlers.ts"),h=n("./node_modules/chroma.ts/dist/index.es.js"),u=i.GraphView.onNodesReplaced;class c{constructor(t,e){this.node_weight_range={min:-1/0,max:1/0,default:0},this.link_weight_range={min:-1/0,max:1/0,default:0},this.graph_view=null,this.view_configuration=null,this.controller=e,this.toggled_node=null,this.canvas=t,this.inputManager=new o.InputManager,this.inputManager.bindCanvas(t,this.detectObjectsUnderCursor.bind(this)),this.renderer=new a.default(t)}bindGraph(t,e){if(this.view_configuration=e,!e)throw new DOMException("There's no view configuration for graph");const n=this.makeGraphView(t.graph,this.view_configuration);this.graph_view&&(Object.keys(n.nodes).forEach(t=>{if(this.graph_view.nodes.hasOwnProperty(t)){n.nodes[t].position=this.graph_view.nodes[t].position}}),n.onNodesReplaced()),this.graph_view=n,this.inputManager.bindScene(this.graph_view),this.renderer.bindGraphView(this.graph_view,this.view_configuration)}updateViewConfiguration(){Object.keys(this.graph_view.nodes).forEach(t=>{const e=this.graph_view.nodes[t],n=this.view_configuration.node_colors_per_group[e.group];e.base_color=h.color(n),e.color=h.color(n)})}update(){this.renderer.render()}layoutGraph(t){t.layout(this.graph_view,this.view_configuration.scene_size)}translateGraph(t){this.renderer.moveCamera(t)}zoomAt(t,e){this.renderer.scaleGraph(t,e)}translateNode(t,e){const n=this.graph_view.nodes[t.id],s=this.view_configuration.scene_size;n.position.x+=e.x*s/this.scaleFactor,n.position.y+=e.y*s/this.scaleFactor}HideNode(t){const e=t.id,n=this.graph_view.nodes[e];if(!n.is_hidden){const t=n.group;this.view_configuration.node_renderer_per_group[t].deleteObject(n),n.is_hidden=!0,this.graph_view.quad_tree.remove(this.graph_view.aabbs[e]),this.graph_view.graph_logic_model.getLinks(e).forEach(t=>{this.HideLink(t)})}}ShowNode(t){const e=t.id,n=this.graph_view.nodes[e];if(n.is_hidden&&(!t.data.weight||t.data.weight>=this.node_weight_range.min&&t.data.weight<=this.node_weight_range.max)){const t=n.group;this.view_configuration.node_renderer_per_group[t].addObject(n),n.is_hidden=!1,this.graph_view.quad_tree.push(this.graph_view.aabbs[e]),this.graph_view.graph_logic_model.getLinks(e).forEach(t=>{const e=this.graph_view.nodes[t.toId],n=this.graph_view.nodes[t.fromId];e.is_hidden||n.is_hidden||this.ShowLink(t)})}}ToggleNode(t){const e=this.graph_view.nodes[t.id];this.toggled_node&&t.id==this.toggled_node.node_logic_model.id?(this.toggled_node.is_toggled=!1,c.DeEmphasizeNode(this.toggled_node),this.DeselectAdjacentNodes(this.toggled_node),this.toggled_node=null,this.controller("OnToggleOffNode",{node:t})):(this.toggled_node&&(this.toggled_node.is_toggled=!1,c.DeEmphasizeNode(this.toggled_node),this.DeselectAdjacentNodes(this.toggled_node),this.controller("OnToggleOffNode",{node:t})),this.toggled_node=e,this.toggled_node.is_toggled=!0,c.EmphasizeNode(this.toggled_node),this.SelectAdjacentNodes(e),this.controller("OnToggleOnNode",{node:t}))}SelectNode(t){const e=t.id,n=this.graph_view.nodes[e];n.is_selected=!0,c.EmphasizeNode(n),this.SelectAdjacentNodes(n),this.controller("OnSelectNode",{node:t})}DeselectNode(t){const e=t.id,n=this.graph_view.nodes[e];n.is_selected=!1,c.DeEmphasizeNode(n),this.DeselectAdjacentNodes(n),this.controller("OnDeselectNode",{node:t})}HoverOnNode(t){const e=t.id,n=this.graph_view.nodes[e];n.is_hovered=!0,c.EmphasizeNode(n),this.SelectAdjacentNodes(n)}HoverOffNode(t){const e=t.id,n=this.graph_view.nodes[e];n.is_hovered=!1,c.DeEmphasizeNode(n),this.DeselectAdjacentNodes(n)}ShowLink(t){const e=this.graph_view.links[t.id];if(e.is_hidden&&(!t.data.weight||t.data.weight>=this.link_weight_range.min&&t.data.weight<=this.link_weight_range.max)){this.view_configuration.link_renderer.addObject(e),e.is_hidden=!1}}HideLink(t){const e=this.graph_view.links[t.id];if(!e.is_hidden){this.view_configuration.link_renderer.deleteObject(e),e.is_hidden=!0}}setNodeWeightFilter(t,e){this.node_weight_range.min=t,this.node_weight_range.max=e,this.graph_view.graph_logic_model.forEachNode(t=>(!t.data.weight||t.data.weight>=this.node_weight_range.min&&t.data.weight<=this.node_weight_range.max?this.ShowNode(t):this.HideNode(t),!1))}setLinkWeightFilter(t,e){this.link_weight_range.min=t,this.link_weight_range.max=e,this.graph_view.graph_logic_model.forEachLink(t=>{const e=this.graph_view.nodes[t.toId],n=this.graph_view.nodes[t.fromId],s=!t.data.weight||t.data.weight>=this.link_weight_range.min&&t.data.weight<=this.link_weight_range.max;return e.is_hidden||n.is_hidden||!s?this.HideLink(t):this.ShowLink(t),!1})}detectObjectsUnderCursor(t){this.renderer.CursorPos=t;const e=this.renderer.CursorPosAtScene,n={x:e.x,y:e.y,width:.05,height:.05};return this.graph_view.quad_tree.colliding(n)}get scaleFactor(){return this.renderer.scaleFactor}makeGraphView(t,e){const n={},i={},r={},o=[],a=new s({width:e.scene_size,height:e.scene_size,maxElements:2}),h={nodes:n,node_groups:i,links:o,node_links:r,graph_logic_model:t,quad_tree:a,aabbs:{},onDrag:l.onDragScene.bind(this),onDragEnd:null,onZoom:l.onZoom.bind(this)};return h.onNodesReplaced=u.bind(h),t.forEachNode(t=>{const s=t.data.group,o=e.node_colors_per_group[s],a=c.makeNodeView(t,h,o,e.node_sizer);return i[s]||(i[s]=[]),n[t.id]=a,i[s][t.id]=a,r[t.id]=[],!1}),t.forEachLink(n=>{const s=t.getNode(n.fromId),a=t.getNode(n.toId),l=s.data.group,h=a.data.group,u=i[l][s.id],d=i[h][a.id],p=c.makeLinkView(u,d,n,e.link_sizer,e.link_painter);return o[n.id]=p,r[n.fromId].push(p),!1}),h.quad_tree.clear(),Object.keys(h.nodes).forEach(t=>{const e=this.makeAABB(h.nodes[t]);h.aabbs[t]=e,h.quad_tree.push(e)}),h}static makeNodeView(t,e,n,s){const i=t.data.weight?t.data.weight:1;return{group:t.data.group,position:new r.default([120*Math.random()-60,120*Math.random()-60]),base_color:h.color(n),color:h.color(n),is_hovered:!1,is_selected:!1,is_toggled:!1,is_emphasized:!1,selected_adjacent_vertex_count:0,is_hidden:!1,size:s(i),label:t.data.label,node_logic_model:t,graph_view:e,zOrder:0}}static makeLinkView(t,e,n,s,i){const r=n.data.weight?n.data.weight:1;return{from:t,to:e,size:s(t.size,e.size,r),alpha:1,zOrder:0,is_emphasized:!1,is_hidden:!1,painter:i,link_logic_model:n}}makeAABB(t){return{x:t.position.x-t.size,y:t.position.y-t.size,width:2*t.size,height:2*t.size,scene_object:t,onClick:l.onClickNode.bind(this),onDrag:l.onDragNode.bind(this),onDragEnd:l.onDragEndNode.bind(this),onEnter:l.onEnterNode.bind(this),onLeave:l.onLeaveNode.bind(this)}}SelectAdjacentNodes(t){this.graph_view.node_links[t.node_logic_model.id].forEach(t=>{const e=t.to;e.selected_adjacent_vertex_count++,c.EmphasizeNode(e),c.EmphasizeLink(t)})}DeselectAdjacentNodes(t){this.graph_view.node_links[t.node_logic_model.id].forEach(t=>{const e=t.to;e.selected_adjacent_vertex_count--,c.DeEmphasizeNode(e),c.DeEmphasizeLink(t)})}static EmphasizeNode(t){!t.is_emphasized&&(t.is_hovered||t.is_selected||t.is_toggled||t.selected_adjacent_vertex_count>0)&&(t.color=t.color.set("hsl.l",.5).saturate(1),t.zOrder++,t.is_emphasized=!0)}static DeEmphasizeNode(t){!t.is_emphasized||t.is_toggled||t.is_selected||t.is_hovered||0!=t.selected_adjacent_vertex_count||(t.color=h.color(t.base_color.toString()),t.zOrder--,t.is_emphasized=!1)}static EmphasizeLink(t){const e=t.from;t.to;!t.is_emphasized&&(e.is_selected||e.is_hovered||e.is_toggled)&&(t.zOrder++,t.is_emphasized=!0)}static DeEmphasizeLink(t){const e=t.from;t.to;!t.is_emphasized||e.is_hovered||e.is_selected||e.is_toggled||(t.zOrder--,t.is_emphasized=!1)}}},"./src/CanvasManager/EventHandlers.ts":function(t,e,n){"use strict";async function s(t,e){this.translateGraph(e),this.update()}async function i(t,e,n){this.zoomAt(e,n),this.update()}async function r(t,e){const n=this,s=t.scene_object;e.shiftKey&&0==e.button?s.is_selected?n.DeselectNode(s.node_logic_model):n.SelectNode(s.node_logic_model):0==e.button?n.ToggleNode(s.node_logic_model):e.button,n.update()}async function o(t,e){const n=t.scene_object;this.translateNode(n.node_logic_model,e),this.update()}async function a(t){const e=t,n=e.scene_object,s=n.graph_view.quad_tree;s.remove(e),e.x=n.position.x-n.size,e.y=n.position.y-n.size,s.push(e)}async function l(t){const e=t.scene_object;this.HoverOnNode(e.node_logic_model),this.update()}async function h(t){const e=t.scene_object;this.HoverOffNode(e.node_logic_model),this.update()}n.r(e),n.d(e,"onDragScene",function(){return s}),n.d(e,"onZoom",function(){return i}),n.d(e,"onClickNode",function(){return r}),n.d(e,"onDragNode",function(){return o}),n.d(e,"onDragEndNode",function(){return a}),n.d(e,"onEnterNode",function(){return l}),n.d(e,"onLeaveNode",function(){return h})},"./src/CanvasManager/GraphRenderer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var s=n("./src/Math/mat3.ts"),i=n("./src/Math/vec2.ts"),r=n("./src/Renderers/_ShaderCompiler.ts"),o=n("./node_modules/chroma.ts/dist/index.es.js");class a{constructor(t){this.canvas=t,this.context2D=this.canvas.getContext("2d",{alpha:!1}),this.gl_canvas=document.createElement("canvas");try{this.gl=this.gl_canvas.getContext("webgl",{premultipliedAlpha:!1})}catch(t){this.gl=null,console.error("Can't create webgl context")}this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.ALWAYS),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND),this.gl.enable(this.gl.CULL_FACE),this.camera_pos=new i.default([0,0]),this.zoom_direction=new i.default([0,0]),this.cursor_pos_Scene=new i.default([0,0]),this.PV=s.default.identity.copy(),this.PV_inv=s.default.identity.copy(),this.P=s.default.identity.copy(),this.S=s.default.identity.copy()}bindGraphView(t,e){this.graph_view=t,this.view_configuration=e,e.scroll_value.Reset(),e.link_renderer.bindContext(this.gl,r.ShaderCompiler_default),Object.keys(e.node_renderer_per_group).forEach(t=>{e.node_renderer_per_group[t].bindContext(this.gl,r.ShaderCompiler_default)}),e.link_renderer.clearObjects(),Object.keys(e.node_renderer_per_group).forEach(t=>e.node_renderer_per_group[t].clearObjects()),Object.keys(this.graph_view.node_groups).forEach(t=>{this.graph_view.node_groups[t].forEach(n=>{e.node_renderer_per_group[t].addObject(n)})}),Object.keys(this.graph_view.links).forEach(t=>{e.link_renderer.addObject(this.graph_view.links[t])})}render(){const t={x:0,y:0,width:this.canvas.clientWidth,height:this.canvas.clientHeight},e=t.width/t.height,n=this.view_configuration;a.resizeCanvasFramebuffer(this.canvas,t.width,t.height),a.resizeCanvasFramebuffer(this.gl_canvas,t.width*a.samples_count,t.height*a.samples_count),this.gl.viewport(0,0,t.width*a.samples_count,t.height*a.samples_count);const i=1/e/n.scene_size,r=1/n.scene_size;let o=this.camera_pos.x*i,l=this.camera_pos.y*r;this.P.init([i,0,0,0,r,0,o,l,1]);const h=this.view_configuration.scroll_value.value,u=-this.zoom_direction.x*h+this.zoom_direction.x,c=-this.zoom_direction.y*h+this.zoom_direction.y;this.S.init([h,0,0,0,h,0,u,c,1]),s.default.product(this.P,this.S,this.PV),this.PV_inv.init(this.PV.all()),this.PV_inv.inverse(),this.drawn_nodes=Object.keys(this.graph_view.nodes).map(t=>this.graph_view.nodes[t]),this.drawn_links=Object.keys(this.graph_view.links).map(t=>this.graph_view.links[t]),this.context2D.fillStyle="white",this.context2D.fillRect(0,0,this.canvas.width,this.canvas.height),this.renderGraph(),this.drawLabels(),a.draw_aabb&&this.drawAABBs()}moveCamera(t){this.camera_pos.x+=t.x*this.view_configuration.scene_size,this.camera_pos.y+=t.y*this.view_configuration.scene_size}scaleGraph(t,e){t>0?this.view_configuration.scroll_value.value/=a.dScale:this.view_configuration.scroll_value.value*=a.dScale,this.view_configuration.scroll_value.value<1&&(this.view_configuration.scroll_value.value=1),this.zoom_direction.xy=this.cursor_pos_Scene.xy}rotateGraph(){}get scaleFactor(){return this.view_configuration.scroll_value.value}get CursorPosAtScene(){return this.cursor_pos_Scene}set CursorPos(t){this.cursor_pos_Scene.x=t.x,this.cursor_pos_Scene.y=t.y,this.ClientToScene(this.cursor_pos_Scene)}SceneToClient(t){this.PV.multiplyVec2(t,t),t.x=(t.x+1)*this.canvas.clientWidth/2,t.y=(1-t.y)*this.canvas.clientHeight/2}ClientToScene(t){const e=this.canvas.getBoundingClientRect();t.x=2*(t.x-e.left)/e.width-1,t.y=2*(t.y-e.top)/e.height-1,t.y*=-1,this.PV_inv.multiplyVec2(t,t)}renderGraph(){const t=this.view_configuration;this.drawn_nodes.forEach(e=>{t.node_renderer_per_group[e.group].updateObject(e)}),this.drawn_links.forEach(e=>{t.link_renderer.updateObject(e)}),t.link_renderer.sortObjects(),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),t.link_renderer.render(this.PV),Object.keys(t.node_renderer_per_group).forEach(e=>{t.node_renderer_per_group[e].render(this.PV)}),this.context2D.drawImage(this.gl_canvas,0,0,this.canvas.width,this.canvas.height)}drawLabels(){const t=this.view_configuration.label_font_size,e=(this.view_configuration.label_painter,new i.default),n=this.drawn_nodes.filter(t=>!t.is_hidden&&(t.is_toggled||t.is_selected||t.is_hovered||t.selected_adjacent_vertex_count>0));n.forEach(s=>{e.x=0,e.y=0,n.forEach(t=>{const n=t.position.x-s.position.x,i=t.position.y-s.position.y,r=Math.sqrt(n*n+i*i);r>0&&(e.x+=n/r,e.y+=i/r)});const i=e.y/e.x;e.x>0&&i>1||e.x<0&&i<-1?(e.x=0,e.y=1):i<=1&&i>-1?(e.y=0,e.x>0?e.x=1:e.x=-1):(e.x>0&&i<-1||e.x<0&&i>1)&&(e.x=0,e.y=-1);const r=-e.x,o=-e.y;e.y=s.position.y+o*s.size,e.x=s.position.x+r*s.size,this.SceneToClient(e);const a=this.context2D.measureText(s.label).width+10;e.x+=r*(a/2),e.y-=o*t,this.drawLabel(s.label,{x:e.x,y:e.y},"#000000",t,5,"#FFFFFF",!0)})}drawLabel(t,e,n,s,i,r,a){this.context2D.font=s+"px sans-serif";const l=this.context2D.measureText(t).width,h=l+2*i,u=s+2*i;this.context2D.fillStyle=o.color(r).css(),this.context2D.fillRect(e.x-h/2,e.y-u/2,h,u),this.context2D.fillStyle=o.color(n).css(),this.context2D.fillText(t,e.x-l/2,e.y+i),a&&this.context2D.strokeRect(e.x-h/2,e.y-u/2,h,u)}drawAABBs(){var t=new i.default,e=new i.default;this.graph_view.quad_tree.each(n=>{t.x=n.x,t.y=n.y,e.x=n.x+n.width,e.y=n.y+n.height,this.SceneToClient(t),this.SceneToClient(e),this.context2D.strokeRect(t.x,t.y,e.x-t.x,e.y-t.y)})}drawCursor(){var t=new i.default(this.cursor_pos_Scene.xy);this.SceneToClient(t),this.context2D.fillRect(t.x-2.5,t.y-2.5,5,5)}static resizeCanvasFramebuffer(t,e,n){t.width===e&&t.height===n||(t.width=e,t.height=n)}}a.dScale=1.25,a.samples_count=2,a.draw_aabb=!1},"./src/CanvasManager/InputManager.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"InputManager",function(){return i});var s=n("./src/Math/tsm.ts");class i{constructor(){this.hovered_objects=[],this.cursor_pos=new s.vec2([0,0]),this.old_cursor_pos=new s.vec2([0,0]),this.cursor_offset=new s.vec2([0,0])}bindCanvas(t,e){this.canvas=t,document.onmousedown=this.onMouseDown.bind(this),document.onmouseup=this.onMouseUp.bind(this),document.onmousemove=this.onMouseMove.bind(this),this.canvas.onwheel=this.onCanvasScroll.bind(this),this.canvas.ondblclick=this.onDblCLick.bind(this),this.object_detector=e}bindScene(t){this.scene=t}onMouseDown(t){const e=this.canvas.getBoundingClientRect();if(t.clientX>e.left&&t.clientX<e.right&&t.clientY>e.top&&t.clientY<e.bottom&&(this.old_cursor_pos.xy=[t.clientX,t.clientY],this.cursor_pos.xy=this.old_cursor_pos.xy,this.mouse_moved=!1,this.mouse_pressed=!0,this.hovered_objects.length>1)){this.hovered_objects=this.hovered_objects.reverse();for(let t=1;t<this.hovered_objects.length;t++)this.hovered_objects[t].onLeave&&this.hovered_objects[t].onLeave(this.hovered_objects[t]);this.hovered_objects.splice(1)}}onMouseUp(t){this.mouse_pressed&&!this.mouse_moved?this.hovered_objects.length>0&&this.hovered_objects[0].onClick&&this.hovered_objects[0].onClick(this.hovered_objects[0],t):this.mouse_pressed&&this.mouse_moved&&this.hovered_objects.length>0&&this.hovered_objects[0].onDragEnd&&(this.hovered_objects[0].onDragEnd(this.hovered_objects[0]),this.hovered_objects=this.object_detector(this.cursor_pos)),this.mouse_moved=!1,this.mouse_pressed=!1}onMouseMove(t){const e=this.canvas.width/this.canvas.height;if(this.cursor_pos.xy=[t.clientX,t.clientY],this.mouse_pressed)this.cursor_offset.x=2*(this.cursor_pos.x-this.old_cursor_pos.x)*i.mouse_sensitivity*e/this.canvas.width,this.cursor_offset.y=-2*(this.cursor_pos.y-this.old_cursor_pos.y)*i.mouse_sensitivity/this.canvas.height,this.hovered_objects.length>0&&this.hovered_objects[0].onDrag?this.hovered_objects[0].onDrag(this.hovered_objects[0],this.cursor_offset):0==this.hovered_objects.length&&this.scene.onDrag&&this.scene.onDrag(this.scene,this.cursor_offset),this.old_cursor_pos.x=this.cursor_pos.x,this.old_cursor_pos.y=this.cursor_pos.y,this.mouse_moved=!0;else{const t=this.object_detector(this.cursor_pos);this.hovered_objects.filter(e=>-1==t.indexOf(e)).forEach(t=>t.onLeave?t.onLeave(t):{}),t.filter(t=>-1==this.hovered_objects.indexOf(t)).forEach(t=>t.onEnter?t.onEnter(t):{}),this.hovered_objects=t}}onDblCLick(t){this.hovered_objects.length>0&&this.hovered_objects[0].onDblClick&&this.hovered_objects[0].onDblClick(this.hovered_objects[0],t)}onCanvasScroll(t){this.scene.onZoom&&this.scene.onZoom(this.scene,t.deltaY/100,this.cursor_pos)}}i.mouse_sensitivity=1},"./src/GUI.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"GUI",function(){return g});var s=n("./node_modules/split.js/split.js"),i=n("./src/CanvasManager/CanvasManager.ts"),r=n("./src/@types/Graph.ts"),o=n("./src/@types/GUI.ts"),a=n("./node_modules/chroma.ts/dist/index.es.js"),l=r.GraphControlling.getFirstState;const h=o.id_prefix+"_graph_view",u=o.id_prefix+"_canvas",c=o.id_prefix+"_rotate_bar",d=o.id_prefix+"_state_bar",p=o.id_prefix+"_tabs";class g{constructor(t){this.canvas_manager=null,this.out_controller=t}build(t,e,n){if(this.gui_configuration=e,this.translator=n,t.innerHTML=`\n        <aside id=${h} class="split split-horizontal">\n            <div id=${c} class="ui-slider-handle">\n                <div id=${c+"handle"} class="ui-slider-handle"></div>\n            </div>\n            <canvas id=${u} tabindex=0></canvas>\n             <div id=${d}>\n                <div id=${d+"handle"} class=ui-slider-handle"></div>\n             </div>\n            <div id=${d+"labels"}></div>\n        </aside>`,Object.keys(e).length>0){const i=document.createElement("aside");i.className="split split-horizontal",i.id=p;const r=document.createElement("ul");i.appendChild(r),Object.keys(e).forEach(t=>{const e=document.createElement("li"),s="#"+t;e.innerHTML=`<a id=${o.id_prefix+t+"_link"} href=${s}>${n.apply(s)}</a>`,r.appendChild(e)}),Object.keys(e).forEach(t=>{const e=document.createElement("div");e.id=t,i.appendChild(e)}),t.appendChild(i),s(["#"+h,"#"+p],{gutterSize:8,cursor:"col-resize",sizes:[55,45],onDrag:()=>this.canvas_manager.update()}),$("#"+p).tabs({heightStyle:"fill"})}this.initGraphViewPanel(),Object.keys(e).forEach(t=>{const s=document.getElementById(t);e[t].build(s,this.TabsController.bind(this),n)}),document.body.onresize=(()=>this.canvas_manager.update())}bindGraph(t,e){Object.keys(t).length>0&&(this.bound_graph=t,Object.keys(t).length>1&&this.fillStateBar(),this.view_configuration=e,this.setState(l(t).label))}initGraphViewPanel(){const t=document.getElementById(h);t.style.display="flex",t.style.flexDirection="column";const e=document.getElementById(c);e.style.marginTop="0.5rem",e.style.marginBottom="0.5rem",e.style.marginLeft="2rem",e.style.marginRight="2rem";const n=$("#"+c+"handle");$("#"+c).slider({min:-180,max:180,value:0,step:5,slide:(t,e)=>{const s=e.value||0;n.text(`${s}°`)},create:()=>n.text("0°")});const s=document.getElementById(u);s.style.border="solid white 1px",s.style.flex="1 1 auto",s.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation()},this.canvas_manager=new i.CanvasManager(s,this.CanvasManagerController.bind(this))}fillStateBar(){const t=Object.keys(this.bound_graph).length,e=100/t,n=document.getElementById(d);n.style.marginTop="0.5rem",n.style.marginRight=`${e/2}%`,n.style.marginLeft=`${e/2}%`;$("#"+d+"handle");$("#"+d).slider({min:0,max:t-1,value:0,step:1,slide:(t,e)=>{const n=Object.keys(this.bound_graph)[e.value||0];this.setState(n)}});const s=document.getElementById(d+"labels");Object.keys(this.bound_graph).forEach(t=>{const n=document.createElement("div");n.style.display="inline-block",n.style.textAlign="center",n.innerHTML=`<span>|</span><br /><label>${t}</label>`,n.classList.add("scivi_fsgraph_stateline_label"),n.style.width=`${e}%`,s.appendChild(n)})}async CanvasManagerController(t,e){switch(t){case"OnToggleOnNode":this.gui_configuration.node_info_tab&&this.gui_configuration.node_info_tab.fill({graph:this.active_state,node:e.node});break;case"OnToggleOffNode":this.gui_configuration.node_info_tab&&this.gui_configuration.node_info_tab.clear();break;case"OnSelectNode":this.gui_configuration.node_list_tab&&this.gui_configuration.node_list_tab.onSelectedNode(e.node);break;case"OnDeselectNode":this.gui_configuration.node_list_tab&&this.gui_configuration.node_list_tab.onDeselectedNode(e.node)}}async TabsController(t,e){switch(t){case"layout":this.canvas_manager.layoutGraph(e.builder);break;case"SelectNode":this.canvas_manager.SelectNode(e.node);break;case"DeselectNode":this.canvas_manager.DeselectNode(e.node);break;case"ShowNode":this.canvas_manager.ShowNode(e.node);break;case"HideNode":this.canvas_manager.HideNode(e.node);break;case"FilterNodes":this.canvas_manager.setNodeWeightFilter(e.min,e.max);break;case"FilterLinks":this.canvas_manager.setLinkWeightFilter(e.min,e.max);break;case"SetNodeAlpha":Object.keys(this.view_configuration.node_colors_per_group).forEach(t=>{const n=this.view_configuration.node_colors_per_group[t],s=a.color(n).alpha(e.alpha);this.view_configuration.node_colors_per_group[t]=s.hex("rgba")}),this.canvas_manager.updateViewConfiguration();break;case"GraphClusterized":{const t=e.count,n={},s={};for(let e=0;e<t;e++)n[e]=a.random(),s[e]=this.view_configuration.node_renderer_per_group[0];this.view_configuration.node_colors_per_group=n,this.view_configuration.node_renderer_per_group=s,this.setState(this.active_state.label)}}this.canvas_manager.update()}setState(t){this.canvas_manager.bindGraph(this.bound_graph[t],this.view_configuration),this.active_state=this.bound_graph[t],this.gui_configuration.node_list_tab&&this.gui_configuration.node_list_tab.fill(this.active_state),this.gui_configuration.filters_tab&&this.gui_configuration.filters_tab.fill(this.active_state),this.gui_configuration.settings_tab&&this.gui_configuration.settings_tab.fill(this.active_state),this.canvas_manager.update()}}},"./src/GraphSerializer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"GraphSerializer",function(){return r});var s=n("./node_modules/ngraph.graph/index.js"),i=n.n(s);class r{fromJSON(t){function e(t,e){t.beginUpdate();const n=e.nodes,s=e.edges;for(let e of n){const n=e.id;let s={label:e.label?e.label:"",group:e.group?e.group:0};Object.keys(e).forEach(t=>{"id"!=t&&"group"!=t&&"label"!=t&&(s[t]=e[t])}),t.addNode(n,s)}for(let e of s){const n=e.source,s=e.target;let i={};Object.keys(e).forEach(t=>{"source"!=t&&"target"!=t&&(i[t]=e[t])}),t.addLink(n,s,i)}t.endUpdate()}let n={};const s=t.states;if(null!=s)for(let t of s){const s=t.label;n[s]={label:s,graph:i()()},e(n[s].graph,t)}else n[0]={label:"0",graph:i()()},e(n[0].graph,t);return n}}r.default_group_index=0},"./src/LayoutBuilders/LayoutBuilder_Circle.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LayoutBuilder_Circle",function(){return s});class s{constructor(t){this.ranges=t}layout(t,e){const n=this.ranges.R.value,s=Object.keys(t.node_groups).sort((e,n)=>t.nodes[n].length-t.nodes[e].length),i=n/s.length;let r=n;return s.forEach(e=>{let n=0;const s=t.node_groups[e],o=Object.keys(s),a=2*Math.PI/o.length;o.forEach(t=>{const e=s[t];e.position.x=r*Math.cos(n),e.position.y=r*Math.sin(n),n+=a}),r-=i}),t.onNodesReplaced(),!0}getParamsNames(){return["R"]}setConfiguration(t){this.ranges=t}getConfiguration(){return this.ranges}}},"./src/LayoutBuilders/LayoutBuilder_FruchtermanReingold.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LayoutBuilder_FruchtermanReingold",function(){return i});var s=n("./src/Math/tsm.ts");class i{constructor(t){this.ranges=t}layout(t,e){const n=e+20,i=this.ranges.iterations_count.value,r=this.ranges.optimal_vertex_distance.value,o=this.ranges.is_bounding.value,a=Object.keys(t.nodes).length,l=r*Math.sqrt(n/a);let h=10*Math.sqrt(a);const u=(t,e,n)=>t*t/l,c=(t,e,n)=>l*l/t,d={};Object.keys(t.nodes).forEach(e=>{d[e]=new s.vec2([0,0]);const i=n,r=2*Math.PI/a;let o=0;Object.keys(t.nodes).forEach(e=>{t.nodes[e].position.x=i*Math.cos(o),t.nodes[e].position.y=i*Math.sin(o),o+=r})});const p=new s.vec2;for(let e=0;e<i&&h>1e-5;e++)Object.keys(t.nodes).forEach(e=>{const n=t.nodes[e];Object.keys(t.nodes).forEach(i=>{if(e!=i){const r=t.nodes[i];s.vec2.difference(n.position,r.position,p);let o=p.length();const a=c(o,n.size,r.size);d[i].x-=p.x/o*a,d[i].y-=p.y/o*a,d[e].x+=p.x/o*a,d[e].y+=p.y/o*a}})}),Object.keys(t.links).forEach(e=>{const n=t.links[e],i=n.from,r=n.to;s.vec2.difference(i.position,r.position,p);let o=p.length();const a=Math.min(u(o,i.size,r.size),o/2);d[r.node_logic_model.id].x+=p.x/o*a,d[r.node_logic_model.id].y+=p.y/o*a,d[i.node_logic_model.id].x-=p.x/o*a,d[i.node_logic_model.id].y-=p.y/o*a}),Object.keys(t.nodes).forEach(e=>{const s=t.nodes[e];let i=d[e].length();i>0&&(s.position.x+=d[e].x/i*Math.min(h,i),s.position.y+=d[e].y/i*Math.min(h,i),o&&(s.position.x=Math.min(n,Math.max(-n,s.position.x)),s.position.y=Math.min(n,Math.max(-n,s.position.y)))),d[e].xy=[0,0]}),h*=.9;return t.onNodesReplaced(),!0}getParamsNames(){return["iterations_count","optimal_vertex_distance","is_bounding"]}getConfiguration(){return this.ranges}setConfiguration(t){this.ranges=t}}},"./src/Math/constants.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"epsilon",function(){return s});const s=1e-5},"./src/Math/mat2.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return r});var s=n("./src/Math/vec2.ts"),i=n("./src/Math/constants.ts");class r{constructor(t){this.values=new Float32Array(4),void 0!==t&&this.init(t)}at(t){return this.values[t]}init(t){for(let e=0;e<4;e++)this.values[e]=t[e];return this}reset(){for(let t=0;t<4;t++)this.values[t]=0}copy(t){t||(t=new r);for(let e=0;e<4;e++)t.values[e]=this.values[e];return t}all(){const t=[];for(let e=0;e<4;e++)t[e]=this.values[e];return t}row(t){return[this.values[2*t+0],this.values[2*t+1]]}col(t){return[this.values[t],this.values[t+2]]}equals(t,e=i.epsilon){for(let n=0;n<4;n++)if(Math.abs(this.values[n]-t.at(n))>e)return!1;return!0}determinant(){return this.values[0]*this.values[3]-this.values[2]*this.values[1]}setIdentity(){return this.values[0]=1,this.values[1]=0,this.values[2]=0,this.values[3]=1,this}transpose(){const t=this.values[1];return this.values[1]=this.values[2],this.values[2]=t,this}inverse(){let t=this.determinant();if(!t)return null;t=1/t;const e=this.values[0];return this.values[0]=t*this.values[3],this.values[1]=t*-this.values[1],this.values[2]=t*-this.values[2],this.values[3]=t*e,this}multiply(t){const e=this.values[0],n=this.values[1],s=this.values[2],i=this.values[3];return this.values[0]=e*t.at(0)+n*t.at(2),this.values[1]=e*t.at(1)+n*t.at(3),this.values[2]=s*t.at(0)+i*t.at(2),this.values[3]=s*t.at(1)+i*t.at(3),this}rotate(t){const e=this.values[0],n=this.values[1],s=this.values[2],i=this.values[3],r=Math.sin(t),o=Math.cos(t);return this.values[0]=e*o+n*r,this.values[1]=e*-r+n*o,this.values[2]=s*o+i*r,this.values[3]=s*-r+i*o,this}multiplyVec2(t,e){const n=t.x,i=t.y;return e?(e.xy=[n*this.values[0]+i*this.values[1],n*this.values[2]+i*this.values[3]],e):new s.default([n*this.values[0]+i*this.values[1],n*this.values[2]+i*this.values[3]])}scale(t){const e=this.values[0],n=this.values[1],s=this.values[2],i=this.values[3],r=t.x,o=t.y;return this.values[0]=e*r,this.values[1]=n*o,this.values[2]=s*r,this.values[3]=i*o,this}static product(t,e,n){const s=t.at(0),i=t.at(1),o=t.at(2),a=t.at(3);return n?(n.init([s*e.at(0)+i*e.at(2),s*e.at(1)+i*e.at(3),o*e.at(0)+a*e.at(2),o*e.at(1)+a*e.at(3)]),n):new r([s*e.at(0)+i*e.at(2),s*e.at(1)+i*e.at(3),o*e.at(0)+a*e.at(2),o*e.at(1)+a*e.at(3)])}}r.identity=(new r).setIdentity()},"./src/Math/mat3.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return l});var s=n("./src/Math/mat4.ts"),i=n("./src/Math/quat.ts"),r=n("./src/Math/vec2.ts"),o=n("./src/Math/vec3.ts"),a=n("./src/Math/constants.ts");class l{constructor(t){this.values=new Float32Array(9),void 0!==t&&this.init(t)}at(t){return this.values[t]}init(t){for(let e=0;e<9;e++)this.values[e]=t[e];return this}reset(){for(let t=0;t<9;t++)this.values[t]=0}copy(t){t||(t=new l);for(let e=0;e<9;e++)t.values[e]=this.values[e];return t}all(){const t=[];for(let e=0;e<9;e++)t[e]=this.values[e];return t}row(t){return[this.values[3*t+0],this.values[3*t+1],this.values[3*t+2]]}col(t){return[this.values[t],this.values[t+3],this.values[t+6]]}equals(t,e=a.epsilon){for(let n=0;n<9;n++)if(Math.abs(this.values[n]-t.at(n))>e)return!1;return!0}determinant(){const t=this.values[0],e=this.values[1],n=this.values[2],s=this.values[3],i=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8];return t*(l*i-r*a)+e*(-l*s+r*o)+n*(a*s-i*o)}setIdentity(){return this.values[0]=1,this.values[1]=0,this.values[2]=0,this.values[3]=0,this.values[4]=1,this.values[5]=0,this.values[6]=0,this.values[7]=0,this.values[8]=1,this}transpose(){const t=this.values[1],e=this.values[2],n=this.values[5];return this.values[1]=this.values[3],this.values[2]=this.values[6],this.values[3]=t,this.values[5]=this.values[7],this.values[6]=e,this.values[7]=n,this}inverse(){const t=this.values[0],e=this.values[1],n=this.values[2],s=this.values[3],i=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8],h=l*i-r*a,u=-l*s+r*o,c=a*s-i*o;let d=t*h+e*u+n*c;return d?(d=1/d,this.values[0]=h*d,this.values[1]=(-l*e+n*a)*d,this.values[2]=(r*e-n*i)*d,this.values[3]=u*d,this.values[4]=(l*t-n*o)*d,this.values[5]=(-r*t+n*s)*d,this.values[6]=c*d,this.values[7]=(-a*t+e*o)*d,this.values[8]=(i*t-e*s)*d,this):null}multiply(t){const e=this.values[0],n=this.values[1],s=this.values[2],i=this.values[3],r=this.values[4],o=this.values[5],a=this.values[6],l=this.values[7],h=this.values[8],u=t.at(0),c=t.at(1),d=t.at(2),p=t.at(3),g=t.at(4),f=t.at(5),v=t.at(6),m=t.at(7),y=t.at(8);return this.values[0]=u*e+c*i+d*a,this.values[1]=u*n+c*r+d*l,this.values[2]=u*s+c*o+d*h,this.values[3]=p*e+g*i+f*a,this.values[4]=p*n+g*r+f*l,this.values[5]=p*s+g*o+f*h,this.values[6]=v*e+m*i+y*a,this.values[7]=v*n+m*r+y*l,this.values[8]=v*s+m*o+y*h,this}multiplyVec2(t,e){const n=t.x,s=t.y;return e?(e.xy=[n*this.values[0]+s*this.values[3]+this.values[6],n*this.values[1]+s*this.values[4]+this.values[7]],e):new r.default([n*this.values[0]+s*this.values[3]+this.values[6],n*this.values[1]+s*this.values[4]+this.values[7]])}multiplyVec3(t,e){const n=t.x,s=t.y,i=t.z;return e?(e.xyz=[n*this.values[0]+s*this.values[3]+i*this.values[6],n*this.values[1]+s*this.values[4]+i*this.values[7],n*this.values[2]+s*this.values[5]+i*this.values[8]],e):new o.default([n*this.values[0]+s*this.values[3]+i*this.values[6],n*this.values[1]+s*this.values[4]+i*this.values[7],n*this.values[2]+s*this.values[5]+i*this.values[8]])}toMat4(t){return t?(t.init([this.values[0],this.values[1],this.values[2],0,this.values[3],this.values[4],this.values[5],0,this.values[6],this.values[7],this.values[8],0,0,0,0,1]),t):new s.default([this.values[0],this.values[1],this.values[2],0,this.values[3],this.values[4],this.values[5],0,this.values[6],this.values[7],this.values[8],0,0,0,0,1])}toQuat(){const t=this.values[0],e=this.values[1],n=this.values[2],s=this.values[3],r=this.values[4],o=this.values[5],a=this.values[6],l=this.values[7],h=this.values[8],u=t-r-h,c=r-t-h,d=h-t-r;let p=0,g=t+r+h;u>g&&(g=u,p=1),c>g&&(g=c,p=2),d>g&&(g=d,p=3);const f=.5*Math.sqrt(g+1),v=.25/f,m=new i.default;switch(p){case 0:m.w=f,m.x=(o-l)*v,m.y=(a-n)*v,m.z=(e-s)*v;break;case 1:m.w=(o-l)*v,m.x=f,m.y=(e+s)*v,m.z=(a+n)*v;break;case 2:m.w=(a-n)*v,m.x=(e+s)*v,m.y=f,m.z=(o+l)*v;break;case 3:m.w=(e-s)*v,m.x=(a+n)*v,m.y=(o+l)*v,m.z=f}return m}rotate(t,e){let n=e.x,s=e.y,i=e.z,r=Math.sqrt(n*n+s*s+i*i);if(!r)return null;1!==r&&(n*=r=1/r,s*=r,i*=r);const o=Math.sin(t),a=Math.cos(t),l=1-a,h=this.values[0],u=this.values[1],c=this.values[2],d=this.values[4],p=this.values[5],g=this.values[6],f=this.values[8],v=this.values[9],m=this.values[10],y=n*n*l+a,_=s*n*l+i*o,b=i*n*l-s*o,x=n*s*l-i*o,w=s*s*l+a,E=i*s*l+n*o,z=n*i*l+s*o,j=s*i*l-n*o,S=i*i*l+a;return this.values[0]=h*y+d*_+f*b,this.values[1]=u*y+p*_+v*b,this.values[2]=c*y+g*_+m*b,this.values[3]=h*x+d*w+f*E,this.values[4]=u*x+p*w+v*E,this.values[5]=c*x+g*w+m*E,this.values[6]=h*z+d*j+f*S,this.values[7]=u*z+p*j+v*S,this.values[8]=c*z+g*j+m*S,this}static product(t,e,n){const s=t.at(0),i=t.at(1),r=t.at(2),o=t.at(3),a=t.at(4),h=t.at(5),u=t.at(6),c=t.at(7),d=t.at(8),p=e.at(0),g=e.at(1),f=e.at(2),v=e.at(3),m=e.at(4),y=e.at(5),_=e.at(6),b=e.at(7),x=e.at(8);return n?(n.init([p*s+g*o+f*u,p*i+g*a+f*c,p*r+g*h+f*d,v*s+m*o+y*u,v*i+m*a+y*c,v*r+m*h+y*d,_*s+b*o+x*u,_*i+b*a+x*c,_*r+b*h+x*d]),n):new l([p*s+g*o+f*u,p*i+g*a+f*c,p*r+g*h+f*d,v*s+m*o+y*u,v*i+m*a+y*c,v*r+m*h+y*d,_*s+b*o+x*u,_*i+b*a+x*c,_*r+b*h+x*d])}}l.identity=(new l).setIdentity()},"./src/Math/mat4.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var s=n("./src/Math/mat3.ts"),i=n("./src/Math/vec3.ts"),r=n("./src/Math/vec4.ts"),o=n("./src/Math/constants.ts");class a{constructor(t){this.values=new Float32Array(16),void 0!==t&&this.init(t)}at(t){return this.values[t]}init(t){for(let e=0;e<16;e++)this.values[e]=t[e];return this}reset(){for(let t=0;t<16;t++)this.values[t]=0}copy(t){t||(t=new a);for(let e=0;e<16;e++)t.values[e]=this.values[e];return t}all(){const t=[];for(let e=0;e<16;e++)t[e]=this.values[e];return t}row(t){return[this.values[4*t+0],this.values[4*t+1],this.values[4*t+2],this.values[4*t+3]]}col(t){return[this.values[t],this.values[t+4],this.values[t+8],this.values[t+12]]}equals(t,e=o.epsilon){for(let n=0;n<16;n++)if(Math.abs(this.values[n]-t.at(n))>e)return!1;return!0}determinant(){const t=this.values[0],e=this.values[1],n=this.values[2],s=this.values[3],i=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8],h=this.values[9],u=this.values[10],c=this.values[11],d=this.values[12],p=this.values[13],g=this.values[14],f=this.values[15];return(t*r-e*i)*(u*f-c*g)-(t*o-n*i)*(h*f-c*p)+(t*a-s*i)*(h*g-u*p)+(e*o-n*r)*(l*f-c*d)-(e*a-s*r)*(l*g-u*d)+(n*a-s*o)*(l*p-h*d)}setIdentity(){return this.values[0]=1,this.values[1]=0,this.values[2]=0,this.values[3]=0,this.values[4]=0,this.values[5]=1,this.values[6]=0,this.values[7]=0,this.values[8]=0,this.values[9]=0,this.values[10]=1,this.values[11]=0,this.values[12]=0,this.values[13]=0,this.values[14]=0,this.values[15]=1,this}transpose(){const t=this.values[1],e=this.values[2],n=this.values[3],s=this.values[6],i=this.values[7],r=this.values[11];return this.values[1]=this.values[4],this.values[2]=this.values[8],this.values[3]=this.values[12],this.values[4]=t,this.values[6]=this.values[9],this.values[7]=this.values[13],this.values[8]=e,this.values[9]=s,this.values[11]=this.values[14],this.values[12]=n,this.values[13]=i,this.values[14]=r,this}inverse(){const t=this.values[0],e=this.values[1],n=this.values[2],s=this.values[3],i=this.values[4],r=this.values[5],o=this.values[6],a=this.values[7],l=this.values[8],h=this.values[9],u=this.values[10],c=this.values[11],d=this.values[12],p=this.values[13],g=this.values[14],f=this.values[15],v=t*r-e*i,m=t*o-n*i,y=t*a-s*i,_=e*o-n*r,b=e*a-s*r,x=n*a-s*o,w=l*p-h*d,E=l*g-u*d,z=l*f-c*d,j=h*g-u*p,S=h*f-c*p,A=u*f-c*g;let k=v*A-m*S+y*j+_*z-b*E+x*w;return k?(k=1/k,this.values[0]=(r*A-o*S+a*j)*k,this.values[1]=(-e*A+n*S-s*j)*k,this.values[2]=(p*x-g*b+f*_)*k,this.values[3]=(-h*x+u*b-c*_)*k,this.values[4]=(-i*A+o*z-a*E)*k,this.values[5]=(t*A-n*z+s*E)*k,this.values[6]=(-d*x+g*y-f*m)*k,this.values[7]=(l*x-u*y+c*m)*k,this.values[8]=(i*S-r*z+a*w)*k,this.values[9]=(-t*S+e*z-s*w)*k,this.values[10]=(d*b-p*y+f*v)*k,this.values[11]=(-l*b+h*y-c*v)*k,this.values[12]=(-i*j+r*E-o*w)*k,this.values[13]=(t*j-e*E+n*w)*k,this.values[14]=(-d*_+p*m-g*v)*k,this.values[15]=(l*_-h*m+u*v)*k,this):null}multiply(t){const e=this.values[0],n=this.values[1],s=this.values[2],i=this.values[3],r=this.values[4],o=this.values[5],a=this.values[6],l=this.values[7],h=this.values[8],u=this.values[9],c=this.values[10],d=this.values[11],p=this.values[12],g=this.values[13],f=this.values[14],v=this.values[15];let m=t.at(0),y=t.at(1),_=t.at(2),b=t.at(3);return this.values[0]=m*e+y*r+_*h+b*p,this.values[1]=m*n+y*o+_*u+b*g,this.values[2]=m*s+y*a+_*c+b*f,this.values[3]=m*i+y*l+_*d+b*v,m=t.at(4),y=t.at(5),_=t.at(6),b=t.at(7),this.values[4]=m*e+y*r+_*h+b*p,this.values[5]=m*n+y*o+_*u+b*g,this.values[6]=m*s+y*a+_*c+b*f,this.values[7]=m*i+y*l+_*d+b*v,m=t.at(8),y=t.at(9),_=t.at(10),b=t.at(11),this.values[8]=m*e+y*r+_*h+b*p,this.values[9]=m*n+y*o+_*u+b*g,this.values[10]=m*s+y*a+_*c+b*f,this.values[11]=m*i+y*l+_*d+b*v,m=t.at(12),y=t.at(13),_=t.at(14),b=t.at(15),this.values[12]=m*e+y*r+_*h+b*p,this.values[13]=m*n+y*o+_*u+b*g,this.values[14]=m*s+y*a+_*c+b*f,this.values[15]=m*i+y*l+_*d+b*v,this}multiplyVec3(t){const e=t.x,n=t.y,s=t.z;return new i.default([this.values[0]*e+this.values[4]*n+this.values[8]*s+this.values[12],this.values[1]*e+this.values[5]*n+this.values[9]*s+this.values[13],this.values[2]*e+this.values[6]*n+this.values[10]*s+this.values[14]])}multiplyVec4(t,e){e||(e=new r.default);const n=t.x,s=t.y,i=t.z,o=t.w;return e.x=this.values[0]*n+this.values[4]*s+this.values[8]*i+this.values[12]*o,e.y=this.values[1]*n+this.values[5]*s+this.values[9]*i+this.values[13]*o,e.z=this.values[2]*n+this.values[6]*s+this.values[10]*i+this.values[14]*o,e.w=this.values[3]*n+this.values[7]*s+this.values[11]*i+this.values[15]*o,e}toMat3(){return new s.default([this.values[0],this.values[1],this.values[2],this.values[4],this.values[5],this.values[6],this.values[8],this.values[9],this.values[10]])}toInverseMat3(){const t=this.values[0],e=this.values[1],n=this.values[2],i=this.values[4],r=this.values[5],o=this.values[6],a=this.values[8],l=this.values[9],h=this.values[10],u=h*r-o*l,c=-h*i+o*a,d=l*i-r*a;let p=t*u+e*c+n*d;return p?(p=1/p,new s.default([u*p,(-h*e+n*l)*p,(o*e-n*r)*p,c*p,(h*t-n*a)*p,(-o*t+n*i)*p,d*p,(-l*t+e*a)*p,(r*t-e*i)*p])):null}translate(t){const e=t.x,n=t.y,s=t.z;return this.values[12]+=this.values[0]*e+this.values[4]*n+this.values[8]*s,this.values[13]+=this.values[1]*e+this.values[5]*n+this.values[9]*s,this.values[14]+=this.values[2]*e+this.values[6]*n+this.values[10]*s,this.values[15]+=this.values[3]*e+this.values[7]*n+this.values[11]*s,this}scale(t){const e=t.x,n=t.y,s=t.z;return this.values[0]*=e,this.values[1]*=e,this.values[2]*=e,this.values[3]*=e,this.values[4]*=n,this.values[5]*=n,this.values[6]*=n,this.values[7]*=n,this.values[8]*=s,this.values[9]*=s,this.values[10]*=s,this.values[11]*=s,this}rotate(t,e){let n=e.x,s=e.y,i=e.z,r=Math.sqrt(n*n+s*s+i*i);if(!r)return null;1!==r&&(n*=r=1/r,s*=r,i*=r);const o=Math.sin(t),a=Math.cos(t),l=1-a,h=this.values[0],u=this.values[1],c=this.values[2],d=this.values[3],p=this.values[4],g=this.values[5],f=this.values[6],v=this.values[7],m=this.values[8],y=this.values[9],_=this.values[10],b=this.values[11],x=n*n*l+a,w=s*n*l+i*o,E=i*n*l-s*o,z=n*s*l-i*o,j=s*s*l+a,S=i*s*l+n*o,A=n*i*l+s*o,k=s*i*l-n*o,O=i*i*l+a;return this.values[0]=h*x+p*w+m*E,this.values[1]=u*x+g*w+y*E,this.values[2]=c*x+f*w+_*E,this.values[3]=d*x+v*w+b*E,this.values[4]=h*z+p*j+m*S,this.values[5]=u*z+g*j+y*S,this.values[6]=c*z+f*j+_*S,this.values[7]=d*z+v*j+b*S,this.values[8]=h*A+p*k+m*O,this.values[9]=u*A+g*k+y*O,this.values[10]=c*A+f*k+_*O,this.values[11]=d*A+v*k+b*O,this}static frustum(t,e,n,s,i,r){const o=e-t,l=s-n,h=r-i;return new a([2*i/o,0,0,0,0,2*i/l,0,0,(e+t)/o,(s+n)/l,-(r+i)/h,-1,0,0,-r*i*2/h,0])}static perspective(t,e,n,s){const i=n*Math.tan(t*Math.PI/360),r=i*e;return a.frustum(-r,r,-i,i,n,s)}static orthographic(t,e,n,s,i,r){const o=e-t,l=s-n,h=r-i;return new a([2/o,0,0,0,0,2/l,0,0,0,0,-2/h,0,-(t+e)/o,-(s+n)/l,-(r+i)/h,1])}static lookAt(t,e,n=i.default.up){if(t.equals(e))return this.identity;const s=i.default.difference(t,e).normalize(),r=i.default.cross(n,s).normalize(),o=i.default.cross(s,r).normalize();return new a([r.x,o.x,s.x,0,r.y,o.y,s.y,0,r.z,o.z,s.z,0,-i.default.dot(r,t),-i.default.dot(o,t),-i.default.dot(s,t),1])}static product(t,e,n){const s=t.at(0),i=t.at(1),r=t.at(2),o=t.at(3),l=t.at(4),h=t.at(5),u=t.at(6),c=t.at(7),d=t.at(8),p=t.at(9),g=t.at(10),f=t.at(11),v=t.at(12),m=t.at(13),y=t.at(14),_=t.at(15),b=e.at(0),x=e.at(1),w=e.at(2),E=e.at(3),z=e.at(4),j=e.at(5),S=e.at(6),A=e.at(7),k=e.at(8),O=e.at(9),C=e.at(10),M=e.at(11),N=e.at(12),L=e.at(13),R=e.at(14),P=e.at(15);return n?(n.init([b*s+x*l+w*d+E*v,b*i+x*h+w*p+E*m,b*r+x*u+w*g+E*y,b*o+x*c+w*f+E*_,z*s+j*l+S*d+A*v,z*i+j*h+S*p+A*m,z*r+j*u+S*g+A*y,z*o+j*c+S*f+A*_,k*s+O*l+C*d+M*v,k*i+O*h+C*p+M*m,k*r+O*u+C*g+M*y,k*o+O*c+C*f+M*_,N*s+L*l+R*d+P*v,N*i+L*h+R*p+P*m,N*r+L*u+R*g+P*y,N*o+L*c+R*f+P*_]),n):new a([b*s+x*l+w*d+E*v,b*i+x*h+w*p+E*m,b*r+x*u+w*g+E*y,b*o+x*c+w*f+E*_,z*s+j*l+S*d+A*v,z*i+j*h+S*p+A*m,z*r+j*u+S*g+A*y,z*o+j*c+S*f+A*_,k*s+O*l+C*d+M*v,k*i+O*h+C*p+M*m,k*r+O*u+C*g+M*y,k*o+O*c+C*f+M*_,N*s+L*l+R*d+P*v,N*i+L*h+R*p+P*m,N*r+L*u+R*g+P*y,N*o+L*c+R*f+P*_])}}a.identity=(new a).setIdentity()},"./src/Math/quat.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var s=n("./src/Math/mat3.ts"),i=n("./src/Math/mat4.ts"),r=n("./src/Math/vec3.ts"),o=n("./src/Math/constants.ts");class a{constructor(t){this.values=new Float32Array(4),void 0!==t&&(this.xyzw=t)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}get w(){return this.values[3]}get xy(){return[this.values[0],this.values[1]]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}get xyzw(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set z(t){this.values[2]=t}set w(t){this.values[3]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}set xyz(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}set xyzw(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3]}at(t){return this.values[t]}reset(){for(let t=0;t<4;t++)this.values[t]=0}copy(t){t||(t=new a);for(let e=0;e<4;e++)t.values[e]=this.values[e];return t}roll(){const t=this.x,e=this.y,n=this.z,s=this.w;return Math.atan2(2*(t*e+s*n),s*s+t*t-e*e-n*n)}pitch(){const t=this.x,e=this.y,n=this.z,s=this.w;return Math.atan2(2*(e*n+s*t),s*s-t*t-e*e+n*n)}yaw(){return Math.asin(2*(this.x*this.z-this.w*this.y))}equals(t,e=o.epsilon){for(let n=0;n<4;n++)if(Math.abs(this.values[n]-t.at(n))>e)return!1;return!0}setIdentity(){return this.x=0,this.y=0,this.z=0,this.w=1,this}calculateW(){const t=this.x,e=this.y,n=this.z;return this.w=-Math.sqrt(Math.abs(1-t*t-e*e-n*n)),this}inverse(){const t=a.dot(this,this);if(!t)return this.xyzw=[0,0,0,0],this;const e=t?1/t:0;return this.x*=-e,this.y*=-e,this.z*=-e,this.w*=e,this}conjugate(){return this.values[0]*=-1,this.values[1]*=-1,this.values[2]*=-1,this}length(){const t=this.x,e=this.y,n=this.z,s=this.w;return Math.sqrt(t*t+e*e+n*n+s*s)}normalize(t){t||(t=this);const e=this.x,n=this.y,s=this.z,i=this.w;let r=Math.sqrt(e*e+n*n+s*s+i*i);return r?(r=1/r,t.x=e*r,t.y=n*r,t.z=s*r,t.w=i*r,t):(t.x=0,t.y=0,t.z=0,t.w=0,t)}add(t){for(let e=0;e<4;e++)this.values[e]+=t.at(e);return this}multiply(t){const e=this.values[0],n=this.values[1],s=this.values[2],i=this.values[3],r=t.x,o=t.y,a=t.z,l=t.w;return this.x=e*l+i*r+n*a-s*o,this.y=n*l+i*o+s*r-e*a,this.z=s*l+i*a+e*o-n*r,this.w=i*l-e*r-n*o-s*a,this}multiplyVec3(t,e){e||(e=new r.default);const n=t.x,s=t.y,i=t.z,o=this.x,a=this.y,l=this.z,h=this.w,u=h*n+a*i-l*s,c=h*s+l*n-o*i,d=h*i+o*s-a*n,p=-o*n-a*s-l*i;return e.x=u*h+p*-o+c*-l-d*-a,e.y=c*h+p*-a+d*-o-u*-l,e.z=d*h+p*-l+u*-a-c*-o,e}toMat3(t){t||(t=new s.default);const e=this.x,n=this.y,i=this.z,r=this.w,o=e+e,a=n+n,l=i+i,h=e*o,u=e*a,c=e*l,d=n*a,p=n*l,g=i*l,f=r*o,v=r*a,m=r*l;return t.init([1-(d+g),u+m,c-v,u-m,1-(h+g),p+f,c+v,p-f,1-(h+d)]),t}toMat4(t){t||(t=new i.default);const e=this.x,n=this.y,s=this.z,r=this.w,o=e+e,a=n+n,l=s+s,h=e*o,u=e*a,c=e*l,d=n*a,p=n*l,g=s*l,f=r*o,v=r*a,m=r*l;return t.init([1-(d+g),u+m,c-v,0,u-m,1-(h+g),p+f,0,c+v,p-f,1-(h+d),0,0,0,0,1]),t}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}static sum(t,e,n){return n||(n=new a),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n}static product(t,e,n){n||(n=new a);const s=t.x,i=t.y,r=t.z,o=t.w,l=e.x,h=e.y,u=e.z,c=e.w;return n.x=s*c+o*l+i*u-r*h,n.y=i*c+o*h+r*l-s*u,n.z=r*c+o*u+s*h-i*l,n.w=o*c-s*l-i*h-r*u,n}static cross(t,e,n){n||(n=new a);const s=t.x,i=t.y,r=t.z,o=t.w,l=e.x,h=e.y,u=e.z,c=e.w;return n.x=o*u+r*c+s*h-i*l,n.y=o*c-s*l-i*h-r*u,n.z=o*l+s*c+i*u-r*h,n.w=o*h+i*c+r*l-s*u,n}static shortMix(t,e,n,s){if(s||(s=new a),n<=0)return s.xyzw=t.xyzw,s;if(n>=1)return s.xyzw=e.xyzw,s;let i=a.dot(t,e);const r=e.copy();let o,l;if(i<0&&(r.inverse(),i=-i),i>.9999)o=1-n,l=0+n;else{const t=Math.sqrt(1-i*i),e=Math.atan2(t,i),s=1/t;o=Math.sin((1-n)*e)*s,l=Math.sin((0+n)*e)*s}return s.x=o*t.x+l*r.x,s.y=o*t.y+l*r.y,s.z=o*t.z+l*r.z,s.w=o*t.w+l*r.w,s}static mix(t,e,n,s){s||(s=new a);const i=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w;if(Math.abs(i)>=1)return s.xyzw=t.xyzw,s;const r=Math.acos(i),o=Math.sqrt(1-i*i);if(Math.abs(o)<.001)return s.x=.5*t.x+.5*e.x,s.y=.5*t.y+.5*e.y,s.z=.5*t.z+.5*e.z,s.w=.5*t.w+.5*e.w,s;const l=Math.sin((1-n)*r)/o,h=Math.sin(n*r)/o;return s.x=t.x*l+e.x*h,s.y=t.y*l+e.y*h,s.z=t.z*l+e.z*h,s.w=t.w*l+e.w*h,s}static fromAxisAngle(t,e,n){n||(n=new a),e*=.5;const s=Math.sin(e);return n.x=t.x*s,n.y=t.y*s,n.z=t.z*s,n.w=Math.cos(e),n}}a.identity=(new a).setIdentity()},"./src/Math/tsm.ts":function(t,e,n){"use strict";n.r(e);var s=n("./src/Math/mat2.ts");n.d(e,"mat2",function(){return s.default});var i=n("./src/Math/mat3.ts");n.d(e,"mat3",function(){return i.default});var r=n("./src/Math/mat4.ts");n.d(e,"mat4",function(){return r.default});var o=n("./src/Math/quat.ts");n.d(e,"quat",function(){return o.default});var a=n("./src/Math/vec2.ts");n.d(e,"vec2",function(){return a.default});var l=n("./src/Math/vec3.ts");n.d(e,"vec3",function(){return l.default});var h=n("./src/Math/vec4.ts");n.d(e,"vec4",function(){return h.default})},"./src/Math/vec2.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return r});var s=n("./src/Math/vec3.ts"),i=n("./src/Math/constants.ts");class r{constructor(t){this.values=new Float32Array(2),void 0!==t&&(this.xy=t)}get x(){return this.values[0]}get y(){return this.values[1]}get xy(){return[this.values[0],this.values[1]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}at(t){return this.values[t]}reset(){this.x=0,this.y=0}copy(t){return t||(t=new r),t.x=this.x,t.y=this.y,t}negate(t){return t||(t=this),t.x=-this.x,t.y=-this.y,t}equals(t,e=i.epsilon){return!(Math.abs(this.x-t.x)>e)&&!(Math.abs(this.y-t.y)>e)}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.x,e=this.y;return t*t+e*e}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}divide(t){return this.x/=t.x,this.y/=t.y,this}scale(t,e){return e||(e=this),e.x*=t,e.y*=t,e}normalize(t){t||(t=this);let e=this.length();return 1===e?this:0===e?(t.x=0,t.y=0,t):(e=1/e,t.x*=e,t.y*=e,t)}multiplyMat2(t,e){return e||(e=this),t.multiplyVec2(this,e)}multiplyMat3(t,e){return e||(e=this),t.multiplyVec2(this,e)}static cross(t,e,n){n||(n=new s.default);const i=t.x,r=t.y,o=e.x,a=i*e.y-r*o;return n.x=0,n.y=0,n.z=a,n}static dot(t,e){return t.x*e.x+t.y*e.y}static distance(t,e){return Math.sqrt(this.squaredDistance(t,e))}static squaredDistance(t,e){const n=e.x-t.x,s=e.y-t.y;return n*n+s*s}static direction(t,e,n){n||(n=new r);const s=t.x-e.x,i=t.y-e.y;let o=Math.sqrt(s*s+i*i);return 0===o?(n.x=0,n.y=0,n):(o=1/o,n.x=s*o,n.y=i*o,n)}static mix(t,e,n,s){s||(s=new r);const i=t.x,o=t.y,a=e.x,l=e.y;return s.x=i+n*(a-i),s.y=o+n*(l-o),s}static sum(t,e,n){return n||(n=new r),n.x=t.x+e.x,n.y=t.y+e.y,n}static difference(t,e,n){return n||(n=new r),n.x=t.x-e.x,n.y=t.y-e.y,n}static product(t,e,n){return n||(n=new r),n.x=t.x*e.x,n.y=t.y*e.y,n}static quotient(t,e,n){return n||(n=new r),n.x=t.x/e.x,n.y=t.y/e.y,n}}r.zero=new r([0,0]),r.one=new r([1,1])},"./src/Math/vec3.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return r});var s=n("./src/Math/quat.ts"),i=n("./src/Math/constants.ts");class r{constructor(t){this.values=new Float32Array(3),void 0!==t&&(this.xyz=t)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}get xy(){return[this.values[0],this.values[1]]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set z(t){this.values[2]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}set xyz(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}at(t){return this.values[t]}reset(){this.x=0,this.y=0,this.z=0}copy(t){return t||(t=new r),t.x=this.x,t.y=this.y,t.z=this.z,t}negate(t){return t||(t=this),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}equals(t,e=i.epsilon){return!(Math.abs(this.x-t.x)>e)&&(!(Math.abs(this.y-t.y)>e)&&!(Math.abs(this.z-t.z)>e))}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.x,e=this.y,n=this.z;return t*t+e*e+n*n}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}scale(t,e){return e||(e=this),e.x*=t,e.y*=t,e.z*=t,e}normalize(t){t||(t=this);let e=this.length();return 1===e?this:0===e?(t.x=0,t.y=0,t.z=0,t):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t)}multiplyByMat3(t,e){return e||(e=this),t.multiplyVec3(this,e)}multiplyByQuat(t,e){return e||(e=this),t.multiplyVec3(this,e)}toQuat(t){t||(t=new s.default);const e=new r,n=new r;return e.x=Math.cos(.5*this.x),n.x=Math.sin(.5*this.x),e.y=Math.cos(.5*this.y),n.y=Math.sin(.5*this.y),e.z=Math.cos(.5*this.z),n.z=Math.sin(.5*this.z),t.x=n.x*e.y*e.z-e.x*n.y*n.z,t.y=e.x*n.y*e.z+n.x*e.y*n.z,t.z=e.x*e.y*n.z-n.x*n.y*e.z,t.w=e.x*e.y*e.z+n.x*n.y*n.z,t}static cross(t,e,n){n||(n=new r);const s=t.x,i=t.y,o=t.z,a=e.x,l=e.y,h=e.z;return n.x=i*h-o*l,n.y=o*a-s*h,n.z=s*l-i*a,n}static dot(t,e){const n=t.x,s=t.y,i=t.z;return n*e.x+s*e.y+i*e.z}static distance(t,e){e.x,t.x,e.y,t.y,e.z,t.z;return Math.sqrt(this.squaredDistance(t,e))}static squaredDistance(t,e){const n=e.x-t.x,s=e.y-t.y,i=e.z-t.z;return n*n+s*s+i*i}static direction(t,e,n){n||(n=new r);const s=t.x-e.x,i=t.y-e.y,o=t.z-e.z;let a=Math.sqrt(s*s+i*i+o*o);return 0===a?(n.x=0,n.y=0,n.z=0,n):(a=1/a,n.x=s*a,n.y=i*a,n.z=o*a,n)}static mix(t,e,n,s){return s||(s=new r),s.x=t.x+n*(e.x-t.x),s.y=t.y+n*(e.y-t.y),s.z=t.z+n*(e.z-t.z),s}static sum(t,e,n){return n||(n=new r),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n}static difference(t,e,n){return n||(n=new r),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n}static product(t,e,n){return n||(n=new r),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n}static quotient(t,e,n){return n||(n=new r),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n}}r.zero=new r([0,0,0]),r.one=new r([1,1,1]),r.up=new r([0,1,0]),r.right=new r([1,0,0]),r.forward=new r([0,0,1])},"./src/Math/vec4.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return i});var s=n("./src/Math/constants.ts");class i{constructor(t){this.values=new Float32Array(4),void 0!==t&&(this.xyzw=t)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}get w(){return this.values[3]}get xy(){return[this.values[0],this.values[1]]}get xyz(){return[this.values[0],this.values[1],this.values[2]]}get xyzw(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set x(t){this.values[0]=t}set y(t){this.values[1]=t}set z(t){this.values[2]=t}set w(t){this.values[3]=t}set xy(t){this.values[0]=t[0],this.values[1]=t[1]}set xyz(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}set xyzw(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3]}get r(){return this.values[0]}get g(){return this.values[1]}get b(){return this.values[2]}get a(){return this.values[3]}get rg(){return[this.values[0],this.values[1]]}get rgb(){return[this.values[0],this.values[1],this.values[2]]}get rgba(){return[this.values[0],this.values[1],this.values[2],this.values[3]]}set r(t){this.values[0]=t}set g(t){this.values[1]=t}set b(t){this.values[2]=t}set a(t){this.values[3]=t}set rg(t){this.values[0]=t[0],this.values[1]=t[1]}set rgb(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]}set rgba(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3]}at(t){return this.values[t]}reset(){this.x=0,this.y=0,this.z=0,this.w=0}copy(t){return t||(t=new i),t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,t}negate(t){return t||(t=this),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=-this.w,t}equals(t,e=s.epsilon){return!(Math.abs(this.x-t.x)>e)&&(!(Math.abs(this.y-t.y)>e)&&(!(Math.abs(this.z-t.z)>e)&&!(Math.abs(this.w-t.w)>e)))}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.x,e=this.y,n=this.z,s=this.w;return t*t+e*e+n*n+s*s}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}scale(t,e){return e||(e=this),e.x*=t,e.y*=t,e.z*=t,e.w*=t,e}normalize(t){t||(t=this);let e=this.length();return 1===e?this:0===e?(t.x*=0,t.y*=0,t.z*=0,t.w*=0,t):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e,t)}multiplyMat4(t,e){return e||(e=this),t.multiplyVec4(this,e)}static mix(t,e,n,s){return s||(s=new i),s.x=t.x+n*(e.x-t.x),s.y=t.y+n*(e.y-t.y),s.z=t.z+n*(e.z-t.z),s.w=t.w+n*(e.w-t.w),s}static sum(t,e,n){return n||(n=new i),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n}static difference(t,e,n){return n||(n=new i),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n}static product(t,e,n){return n||(n=new i),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n.w=t.w*e.w,n}static quotient(t,e,n){return n||(n=new i),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n.w=t.w/e.w,n}}i.zero=new i([0,0,0,1]),i.one=new i([1,1,1,1])},"./src/Renderers/CircleNodeRenderer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"CircleNodeRenderer",function(){return o});var s=n("./src/Renderers/_Utils.ts");const i=8*Float32Array.BYTES_PER_ELEMENT,r=Uint16Array.BYTES_PER_ELEMENT;class o{constructor(){this.default_max_objects_count=64,this.vertex_shader_source="\n        attribute vec2 a_vertexPos;    \n        attribute vec2 a_uv;     \n        attribute vec4 a_color;\n        uniform mat3 u_pv;\n        varying vec2 v_uv;\n        varying vec4 v_color;\n\n        void main(void)\n        {\n            v_color = a_color;\n            v_uv = a_uv;\n            gl_Position = vec4(u_pv * vec3(a_vertexPos, 1), 1);\n        }",this.fragment_shader_source="\n        precision mediump float;\n        varying vec2 v_uv;\n        varying vec4 v_color;\n        const float inEdgeBorderR = 0.85;\n        const float outEdgeBorderR = 0.95;\n        const float maxR = 1.0;\n\n        void main(void) {\n            float d = length(v_uv);\n            vec4 borderColor = vec4(0, 0, 0, 1);\n            if (d < inEdgeBorderR)\n                gl_FragColor = v_color;\n            else if (d < outEdgeBorderR)\n            {\n                float coeff = smoothstep(inEdgeBorderR, outEdgeBorderR, d);\n                gl_FragColor = mix(v_color, borderColor, coeff);\n            }\n            else if (d < maxR)\n            {\n                gl_FragColor = borderColor;\n            }\n            else discard;         \n        }",this.shader_source={vertex_shader:this.vertex_shader_source,fragment_shader:this.fragment_shader_source,attributes:["a_vertexPos","a_color","a_uv"],uniforms:["u_pv"]},this.geometry={vertices:new Float32Array(4*i*this.default_max_objects_count),indices:new Uint16Array(6*r*this.default_max_objects_count),objects_count:0,max_objects_count:this.default_max_objects_count},this.offsets=new Map,this.gl=null,this.program=null,this.objects=[]}render(t){this.gl.useProgram(this.program.program),this.gl.uniformMatrix3fv(this.program.uniforms.u_pv,!1,t.all()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.geometry.vertices,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.vertexAttribPointer(this.program.attributes.a_vertexPos,2,this.gl.FLOAT,!1,i,0),this.gl.enableVertexAttribArray(this.program.attributes.a_uv),this.gl.vertexAttribPointer(this.program.attributes.a_uv,2,this.gl.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(this.program.attributes.a_color),this.gl.vertexAttribPointer(this.program.attributes.a_color,4,this.gl.FLOAT,!1,i,4*Float32Array.BYTES_PER_ELEMENT),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.geometry.indices,this.gl.DYNAMIC_DRAW),this.gl.drawElements(this.gl.TRIANGLES,6*this.geometry.objects_count,this.gl.UNSIGNED_SHORT,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.disableVertexAttribArray(this.program.attributes.a_uv),this.gl.disableVertexAttribArray(this.program.attributes.a_color)}bindContext(t,e){this.program&&(this.gl.deleteProgram(this.program.program),this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo)),this.gl=t,this.ibo=t.createBuffer(),this.vbo=t.createBuffer(),this.program=e.compile(t,this.shader_source)}addObject(t){if(this.geometry.objects_count==this.geometry.max_objects_count){const t=this.geometry;t.vertices=Object(s.resizeFloat32Array)(2*t.vertices.length,t.vertices),t.indices=Object(s.resizeUint16Array)(2*t.indices.length,t.indices),t.max_objects_count*=2}const e=t;if(!this.offsets.has(e)){const n=this.geometry.objects_count;this.offsets.set(e,n);const s=o.makeVerticesArray(e),i=o.makeIndicesArray(4*n);this.geometry.vertices.set(s,32*n),this.geometry.indices.set(i,6*n),this.objects.push(t),this.geometry.objects_count++}}clearObjects(){this.offsets.clear(),this.geometry.objects_count=0,this.objects=[]}deleteObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),n=this.geometry.objects_count-1;if(t!=n&&(this.offsets.set(this.objects[n],t),this.objects[t]=this.objects[n],this.geometry.vertices.copyWithin(32*t,32*n,32*n+32)),this.offsets.delete(e),this.objects.pop(),this.geometry.objects_count--,this.geometry.objects_count>this.default_max_objects_count&&this.geometry.objects_count<=this.geometry.max_objects_count/2){const t=this.geometry;t.vertices=Object(s.resizeFloat32Array)(t.vertices.length/2,t.vertices),t.indices=Object(s.resizeUint16Array)(t.indices.length/2,t.indices),t.max_objects_count/=2}}}updateObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),n=o.makeVerticesArray(e);this.geometry.vertices.set(n,32*t)}}sortObjects(){}static makeVerticesArray(t){const e=t.color.gl();return[t.position.x-t.size,t.position.y-t.size,-1,-1,e[0],e[1],e[2],e[3],t.position.x+t.size,t.position.y-t.size,1,-1,e[0],e[1],e[2],e[3],t.position.x+t.size,t.position.y+t.size,1,1,e[0],e[1],e[2],e[3],t.position.x-t.size,t.position.y+t.size,-1,1,e[0],e[1],e[2],e[3]]}static makeIndicesArray(t){return[t,1+t,2+t,t,2+t,3+t]}}},"./src/Renderers/OrientedStraightLinkRenderer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"OrientedStraightLinkRenderer",function(){return o});var s=n("./src/Renderers/_Utils.ts");const i=6*Float32Array.BYTES_PER_ELEMENT,r=Uint16Array.BYTES_PER_ELEMENT;class o{constructor(){this.default_max_objects_count=64,this.vertex_shader_source="\n        attribute vec2 a_vertexPos;\n        attribute vec4 a_color;\n        uniform mat3 u_pv;\n        varying vec4 v_color;\n\n        void main(void)\n        {\n            v_color = a_color;\n            gl_Position = vec4(u_pv * vec3(a_vertexPos, 1), 1);\n        }",this.fragment_shader_source="\n        precision mediump float;\n        varying vec4 v_color;\n\n        void main(void) {\n            gl_FragColor = v_color;\n        }",this.shader_source={vertex_shader:this.vertex_shader_source,fragment_shader:this.fragment_shader_source,attributes:["a_vertexPos","a_color"],uniforms:["u_pv"]},this.geometry={vertices:new Float32Array(7*i*this.default_max_objects_count),indices:new Uint16Array(9*r*this.default_max_objects_count),objects_count:0,max_objects_count:this.default_max_objects_count},this.offsets=new Map,this.objects=[]}bindContext(t,e){this.program&&(this.gl.deleteProgram(this.program.program),this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo)),this.gl=t,this.ibo=t.createBuffer(),this.vbo=t.createBuffer(),this.program=e.compile(t,this.shader_source)}render(t){this.gl.enableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.enableVertexAttribArray(this.program.attributes.a_color),this.gl.useProgram(this.program.program),this.gl.uniformMatrix3fv(this.program.uniforms.u_pv,!1,t.all()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.geometry.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.geometry.indices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.program.attributes.a_vertexPos,2,this.gl.FLOAT,!1,i,0),this.gl.vertexAttribPointer(this.program.attributes.a_color,4,this.gl.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),this.gl.drawElements(this.gl.TRIANGLES,9*this.geometry.objects_count,this.gl.UNSIGNED_SHORT,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.disableVertexAttribArray(this.program.attributes.a_color)}addObject(t){if(this.geometry.objects_count==this.geometry.max_objects_count){const t=this.geometry;t.vertices=Object(s.resizeFloat32Array)(2*t.vertices.length,t.vertices),t.indices=Object(s.resizeUint16Array)(2*t.indices.length,t.indices),t.max_objects_count*=2}const e=t,n=this.geometry.objects_count;this.offsets.set(e,n),this.objects.push(e);const i=o.makeVerticesArray(e),r=o.makeIndicesArray(7*n);this.geometry.vertices.set(i,42*n),this.geometry.indices.set(r,9*n),this.geometry.objects_count++}clearObjects(){this.offsets.clear(),this.geometry.objects_count=0,this.objects=[]}deleteObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),n=this.geometry.objects_count-1;if(t!=n&&(this.offsets.set(this.objects[n],t),this.objects[t]=this.objects[n],this.geometry.vertices.copyWithin(42*t,42*n,42*n+42)),this.offsets.delete(e),this.objects.pop(),this.geometry.objects_count--,this.geometry.objects_count>this.default_max_objects_count&&this.geometry.objects_count<=this.geometry.max_objects_count/2){const t=this.geometry;t.vertices=Object(s.resizeFloat32Array)(t.vertices.length/2,t.vertices),t.indices=Object(s.resizeUint16Array)(t.indices.length/2,t.indices),t.max_objects_count/=2}}}updateObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),n=o.makeVerticesArray(e);this.geometry.vertices.set(n,42*t)}}sortObjects(){const t=[...this.objects];t.sort((t,e)=>t.zOrder-e.zOrder);const e=new Float32Array(this.geometry.vertices);for(let n=0;n<this.objects.length;n++){const s=t[n],i=this.offsets.get(s);for(let t=0;t<42;t++)e[42*n+t]=this.geometry.vertices[42*i+t];this.offsets.set(s,n)}this.geometry.vertices=e,this.objects=t}static makeVerticesArray(t){const e=t.from,n=t.to,s=n.position.y-e.position.y,i=n.position.x-e.position.x,r=Math.sqrt(s*s+i*i),o=i/r,a=s/r,l=o*t.size,h=a*t.size;let u=t.painter(e.color.gl()),c=t.painter(n.color.gl());t.is_emphasized&&(u[3]=1,c[3]=1);const d=n.size+5*t.size;return[e.position.x+e.size*o-h,e.position.y+e.size*a+l,u[0],u[1],u[2],u[3],e.position.x+e.size*o+h,e.position.y+e.size*a-l,u[0],u[1],u[2],u[3],n.position.x-d*o+h,n.position.y-d*a-l,c[0],c[1],c[2],c[3],n.position.x-d*o-h,n.position.y-d*a+l,c[0],c[1],c[2],c[3],n.position.x-n.size*o,n.position.y-n.size*a,c[0],c[1],c[2],c[3],n.position.x-d*o-4*h,n.position.y-d*a+4*l,c[0],c[1],c[2],c[3],n.position.x-d*o+4*h,n.position.y-d*a-4*l,c[0],c[1],c[2],c[3]]}static makeIndicesArray(t){return[t,1+t,2+t,t,2+t,3+t,t+4,t+5,t+6]}}},"./src/Renderers/StraightLinkRenderer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"StraightLinkRenderer",function(){return o});var s=n("./src/Renderers/_Utils.ts");const i=6*Float32Array.BYTES_PER_ELEMENT,r=Uint16Array.BYTES_PER_ELEMENT;class o{constructor(){this.default_max_objects_count=64,this.vertex_shader_source="\n        attribute vec2 a_vertexPos;\n        attribute vec4 a_color;\n        uniform mat3 u_pv;\n        varying vec4 v_color;\n\n        void main(void)\n        {\n            v_color = a_color;\n            gl_Position = vec4(u_pv * vec3(a_vertexPos, 1), 1);\n        }",this.fragment_shader_source="\n        precision mediump float;\n        varying vec4 v_color;\n\n        void main(void) {\n            gl_FragColor = v_color;\n        }",this.shader_source={vertex_shader:this.vertex_shader_source,fragment_shader:this.fragment_shader_source,attributes:["a_vertexPos","a_color"],uniforms:["u_pv"]},this.geometry={vertices:new Float32Array(4*i*this.default_max_objects_count),indices:new Uint16Array(6*r*this.default_max_objects_count),objects_count:0,max_objects_count:this.default_max_objects_count},this.offsets=new Map,this.geometry.vertices.fill(0),this.objects=[]}bindContext(t,e){this.program&&(this.gl.deleteProgram(this.program.program),this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo)),this.gl=t,this.ibo=t.createBuffer(),this.vbo=t.createBuffer(),this.program=e.compile(t,this.shader_source)}render(t){this.gl.enableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.enableVertexAttribArray(this.program.attributes.a_color),this.gl.useProgram(this.program.program),this.gl.uniformMatrix3fv(this.program.uniforms.u_pv,!1,t.all()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.geometry.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.geometry.indices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.program.attributes.a_vertexPos,2,this.gl.FLOAT,!1,i,0),this.gl.vertexAttribPointer(this.program.attributes.a_color,4,this.gl.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),this.gl.drawElements(this.gl.TRIANGLES,6*this.geometry.objects_count,this.gl.UNSIGNED_SHORT,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(this.program.attributes.a_vertexPos),this.gl.disableVertexAttribArray(this.program.attributes.a_color)}addObject(t){if(this.geometry.objects_count==this.geometry.max_objects_count){const t=this.geometry;t.vertices=Object(s.resizeFloat32Array)(2*t.vertices.length,t.vertices),t.indices=Object(s.resizeUint16Array)(2*t.indices.length,t.indices),t.max_objects_count*=2}const e=t,n=this.geometry.objects_count;this.offsets.set(e,n);const i=o.makeVerticesArray(e),r=o.makeIndicesArray(4*n);this.geometry.vertices.set(i,24*n),this.geometry.indices.set(r,6*n),this.geometry.objects_count=this.objects.push(e)}clearObjects(){this.offsets.clear(),this.geometry.objects_count=0,this.objects=[]}deleteObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),n=this.geometry.objects_count-1;if(t!=n&&(this.offsets.set(this.objects[n],t),this.objects[t]=this.objects[n],this.geometry.vertices.copyWithin(24*t,24*n,24*n+24)),this.offsets.delete(e),this.objects.pop(),this.geometry.objects_count--,this.geometry.objects_count>this.default_max_objects_count&&this.geometry.objects_count<=this.geometry.max_objects_count/2){const t=this.geometry;t.vertices=Object(s.resizeFloat32Array)(t.vertices.length/2,t.vertices),t.indices=Object(s.resizeUint16Array)(t.indices.length/2,t.indices),t.max_objects_count/=2}}}updateObject(t){const e=t;if(this.offsets.has(e)){const t=this.offsets.get(e),n=o.makeVerticesArray(e);this.geometry.vertices.set(n,24*t)}}sortObjects(){const t=[...this.objects];t.sort((t,e)=>t.zOrder-e.zOrder);const e=new Float32Array(this.geometry.vertices);for(let n=0;n<this.objects.length;n++){const s=t[n],i=this.offsets.get(s);for(let t=0;t<24;t++)e[24*n+t]=this.geometry.vertices[24*i+t];this.offsets.set(s,n)}this.geometry.vertices=e,this.objects=t}static makeVerticesArray(t){const e=t.from,n=t.to,s=n.position.y-e.position.y,i=n.position.x-e.position.x,r=Math.sqrt(s*s+i*i),o=s/r,a=i/r*t.size,l=o*t.size;let h=t.painter(e.color.gl()),u=t.painter(n.color.gl());return t.is_emphasized&&(h[3]=1,u[3]=1),[e.position.x-l,e.position.y+a,h[0],h[1],h[2],h[3],e.position.x+l,e.position.y-a,h[0],h[1],h[2],h[3],n.position.x+l,n.position.y-a,u[0],u[1],u[2],u[3],n.position.x-l,n.position.y+a,u[0],u[1],u[2],u[3]]}static makeIndicesArray(t){return[t,1+t,2+t,t,2+t,3+t]}}},"./src/Renderers/_ShaderCompiler.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"ShaderCompiler_default",function(){return i});class s{compile(t,e){const n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertex_shader),t.compileShader(n);let i=t.getShaderParameter(n,t.COMPILE_STATUS);if(!i)return alert(t.getShaderInfoLog(n)),null;const r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e.fragment_shader),t.compileShader(r),!(i=t.getShaderParameter(r,t.COMPILE_STATUS)))return t.deleteShader(n),alert(t.getShaderInfoLog(r)),null;const o=t.createProgram();return t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),(i=t.getProgramParameter(o,t.LINK_STATUS))?{program:o,attributes:s.getAttributeLocations(t,o,e.attributes),uniforms:s.getUniformLocations(t,o,e.uniforms)}:null}static getAttributeLocations(t,e,n){let s={};for(let i=0;i<n.length;++i){let r=n[i],o=-1;if(-1===(o=t.getAttribLocation(e,r)))throw new Error("Program doesn't have required attribute: "+r);s[n[i]]=o}return s}static getUniformLocations(t,e,n){let s={};for(let i=0;i<n.length;++i){let r=n[i];{let o=t.getUniformLocation(e,r);if(null===o)throw new Error("Program doesn't have required uniform: "+r);s[n[i]]=o}}return s}}const i=new s},"./src/Renderers/_Utils.ts":function(t,e,n){"use strict";function s(t,e){let n=new Float32Array(t);if(t>e.length)n.set(e,0);else for(let s=0;s<t;++s)n[s]=e[s];return n}function i(t,e){let n=new Uint16Array(t);if(t>e.length)n.set(e,0);else for(let s=0;s<t;++s)n[s]=e[s];return n}n.r(e),n.d(e,"resizeFloat32Array",function(){return s}),n.d(e,"resizeUint16Array",function(){return i})},"./src/Tabs/FiltersTab.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"FiltersTab",function(){return c});var s=n("./src/@types/GUI.ts"),i=n("./src/@types/LayoutBuilder.ts");const r=s.id_prefix+"_filters_tab_node_threshold_max",o=s.id_prefix+"_filters_tab_node_threshold_min",a=s.id_prefix+"_filters_tab_node_threshold_slider",l=s.id_prefix+"_filters_tab_link_threshold_max",h=s.id_prefix+"_filters_tab_link_threshold_min",u=s.id_prefix+"_filters_tab_link_threshold_slider";class c{constructor(t){this.container=null,this.controller=null,this.translator=null,this.min_node_weight=new i.ScalarParam(0,1),this.max_node_weight=new i.ScalarParam(0,1),this.min_link_weight=new i.ScalarParam(0,1),this.max_link_weight=new i.ScalarParam(0,1)}build(t,e,n){this.container=t,this.controller=e,this.translator=n,this.container.style.height="100%";{const t=document.createElement("div");{const e=document.createElement("p");e.innerHTML=`${n.apply("LOC_NODE_THRESHOLD")}\n                               <input type="number" id="${o}" size="10" onkeydown="size=value.length||10">\n                                —\n                                <input type="number" id="${r}" size="10" onkeydown="size=value.length||10">`,t.appendChild(e)}const e=document.createElement("div");e.id=a,t.appendChild(e),this.container.appendChild(t)}{const t=document.createElement("div");{const e=document.createElement("p");e.innerHTML=`${n.apply("LOC_LINK_THRESHOLD")}\n                               <input type="number" id="${h}">\n                                —\n                                <input type="number" id="${l}">`,t.appendChild(e)}const e=document.createElement("div");e.id=u,t.appendChild(e),this.container.appendChild(t)}}clear(){this.min_node_weight=new i.ScalarParam(0,1),this.max_node_weight=new i.ScalarParam(0,1),this.min_link_weight=new i.ScalarParam(0,1),this.max_link_weight=new i.ScalarParam(0,1),this.UpdateRanges()}fill(t){const e=t;{const t={min:1/0,max:-1/0,step:0};e.graph.forEachNode(e=>{const n=e.data.weight;return n&&(n>t.max&&(t.max=n),n<t.min&&(t.min=n)),!1}),t.min!=t.max?t.step=(t.max-t.min)/e.graph.getNodesCount():t.step=-1,this.min_node_weight=new i.ScalarParam(t.min,t.max,t.min,t.step),this.max_node_weight=new i.ScalarParam(t.min,t.max,t.max,t.step)}{const t={min:1/0,max:-1/0,step:0};e.graph.forEachLink(e=>{const n=e.data.weight;return n&&(n>t.max&&(t.max=n),n<t.min&&(t.min=n)),!1}),t.min!=t.max?t.step=(t.max-t.min)/e.graph.getLinksCount():t.step=-1,this.min_link_weight=new i.ScalarParam(t.min,t.max,t.min,t.step),this.max_link_weight=new i.ScalarParam(t.min,t.max,t.max,t.step)}this.UpdateRanges()}UpdateRanges(){{const t=document.getElementById(o);this.min_node_weight.range.step>=0?(t.min=String(this.min_node_weight.range.min),t.max=String(this.min_node_weight.range.max),t.step=String(this.min_node_weight.range.step),t.value=String(this.min_node_weight.value)):t.disabled=!0;const e=document.getElementById(r);this.max_node_weight.range.step>=0?(e.min=String(this.max_node_weight.range.min),e.max=String(this.max_node_weight.range.max),e.step=String(this.max_node_weight.range.step),e.value=String(this.max_node_weight.value)):e.disabled=!0;const n=$("#"+a);t.onchange=(()=>{this.min_node_weight.value=parseFloat(t.value),n.slider({values:[this.min_node_weight.value,this.max_node_weight.value]}),this.controller("FilterNodes",{min:this.min_node_weight.value,max:this.max_node_weight.value})}),e.onchange=(()=>{this.max_node_weight.value=parseFloat(e.value),n.slider({values:[this.min_node_weight.value,this.max_node_weight.value]}),this.controller("FilterNodes",{min:this.min_node_weight.value,max:this.max_node_weight.value})}),this.min_node_weight.range.step>=0&&n.slider({range:!0,min:this.min_node_weight.range.min,max:this.max_node_weight.range.max,step:this.min_node_weight.range.step,values:[this.min_node_weight.value,this.max_node_weight.value],slide:(n,s)=>{this.min_node_weight.value=s.values[0],this.max_node_weight.value=s.values[1],t.value=String(this.min_node_weight.value),e.value=String(this.max_node_weight.value),this.controller("FilterNodes",{min:this.min_node_weight.value,max:this.max_node_weight.value})}})}{const t=document.getElementById(h);this.min_link_weight.range.step>=0?(t.min=String(this.min_link_weight.range.min),t.max=String(this.min_link_weight.range.max),t.step=String(this.min_link_weight.range.step),t.value=String(this.min_link_weight.value)):t.disabled=!0;const e=document.getElementById(l);this.max_link_weight.range.step>=0?(e.min=String(this.max_link_weight.range.min),e.max=String(this.max_link_weight.range.max),e.step=String(this.max_link_weight.range.step),e.value=String(this.max_link_weight.value)):e.disabled=!0;const n=$("#"+u);t.onchange=(()=>{this.min_link_weight.value=parseFloat(t.value),n.slider({values:[this.min_link_weight.value,this.max_link_weight.value]}),this.controller("FilterLinks",{min:this.min_link_weight.value,max:this.max_link_weight.value})}),e.onchange=(()=>{this.max_link_weight.value=parseFloat(e.value),n.slider({values:[this.min_link_weight.value,this.max_link_weight.value]}),this.controller("FilterLinks",{min:this.min_link_weight.value,max:this.max_link_weight.value})}),this.min_link_weight.range.step>=0&&n.slider({range:!0,min:this.min_link_weight.range.min,max:this.max_link_weight.range.max,step:this.min_link_weight.range.step,values:[this.min_link_weight.value,this.max_link_weight.value],slide:(n,s)=>{this.min_link_weight.value=s.values[0],this.max_link_weight.value=s.values[1],t.value=String(this.min_link_weight.value),e.value=String(this.max_link_weight.value),this.controller("FilterLinks",{min:this.min_link_weight.value,max:this.max_link_weight.value})}})}}}},"./src/Tabs/NodeInfoTab.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"NodeInfoTab",function(){return s});class s{constructor(t){this.container=null,this.controller=null,this.translator=null}build(t,e,n){this.container=t,this.controller=e,this.translator=n,this.container.style.height="100%",this.clear()}clear(){this.container.innerHTML=`<p>${this.translator.apply("LOC_NO_SELECTED_NODE")}</p>`}fill(t){const e=t.graph,n=t.node;this.container.innerHTML="";const s=document.createElement("div");{const t=document.createElement("input");t.type="text",t.style.fontWeight="bold",t.style.width="300px",t.style.marginRight="5px";const e=document.createElement("button");e.className="scivi_button",e.innerText=this.translator.apply("LOC_CHANGE"),e.onclick=(e=>this.controller("ChangeNodeName",{node_id:n.id,new_name:t.value})),s.appendChild(t),s.appendChild(e)}{const t=document.createElement("ul");t.style.listStyleType="disc",n.data&&Object.keys(n.data).forEach(e=>{const s=document.createElement("li");s.innerText=`${e}: ${n.data[e]}`,t.appendChild(s)}),s.appendChild(t)}const i=document.createElement("div");i.innerHTML=`<label>${this.translator.apply("#out_links_text")}</label>`;{const t=document.createElement("ul");t.style.listStyleType="disc",n.links.filter(t=>t.fromId==n.id).forEach(n=>{const s=document.createElement("li");s.innerText=`${e.graph.getNode(n.toId).data.label}`,t.appendChild(s)}),i.appendChild(t)}this.container.appendChild(s),this.container.appendChild(i)}}},"./src/Tabs/NodeListTab.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"NodeListTab",function(){return l});var s,i=n("./src/@types/GUI.ts");!function(t){t[t.NoFilter=0]="NoFilter",t[t.SubstringFilter=1]="SubstringFilter",t[t.StringFilter=2]="StringFilter",t[t.RegExpFilter=3]="RegExpFilter"}(s||(s={}));const r=i.id_prefix+"_node_list_tab_filter_panel",o=i.id_prefix+"_node_list_tab_header",a=i.id_prefix+"_node_list_tab_content";class l{constructor(t){this.container=null,this.controller=null,this.translator=null,this.bound_graph=null,this.filter_string=""}build(t,e,n){this.container=t,this.controller=e,this.translator=n,this.container.style.height="100%";const s=document.createElement("div");s.id=r;{const t=document.createElement("button");t.className="scivi_button",t.innerText=n.apply("LOC_NOT"),t.onclick=(()=>{this.m_not=!this.m_not,this.m_not?t.classList.add("pushed"):t.classList.remove("pushed"),this.updateList()}),s.appendChild(t)}{const t=document.createElement("input");t.type="text",t.style.marginRight="5px",t.width=200,t.oninput=(()=>{this.filter_string=t.value,this.updateList()}),s.appendChild(t)}{const t=document.createElement("button");t.className="scivi_button",t.innerText=n.apply("LOC_FINDSTRING"),t.onclick=(()=>{}),s.appendChild(t)}{const t=document.createElement("button");t.className="scivi_button",t.innerText=n.apply("LOC_FINDREGEXP"),t.onclick=(()=>{}),s.appendChild(t)}this.container.appendChild(s);const i=document.createElement("div");i.id=o,i.style.marginTop="5px";{const t=document.createElement("div"),e=document.createElement("span");e.innerText=n.apply("LOC_VISIBLE"),e.style.textAlign="center",e.style.width="auto",e.style.display="inline-block";const s=document.createElement("span");s.innerText=n.apply("LOC_SELECTED"),s.style.textAlign="center",s.style.width="auto",s.style.display="inline-block",s.style.marginLeft="10px",t.appendChild(e),t.appendChild(s),i.appendChild(t)}{const t=document.createElement("button");t.innerText=this.translator.apply("LOC_ALL"),t.className="scivi_button",t.style.width="auto",t.style.textAlign="center",t.onclick=this.ShowAllFilteredNodes;const e=document.createElement("button");e.innerText=this.translator.apply("LOC_NONE"),e.className="scivi_button",e.style.width="auto",e.style.textAlign="center",e.onclick=this.HideAllFilteredNodes,i.appendChild(t),i.appendChild(e)}{const t=document.createElement("button");t.innerText=this.translator.apply("LOC_ALL"),t.className="scivi_button",t.style.width="auto",t.style.textAlign="center",t.style.marginLeft="17px",t.onclick=this.SelectAllFilteredNodes;const e=document.createElement("button");e.innerText=this.translator.apply("LOC_NONE"),e.className="scivi_button",e.style.width="auto",e.style.textAlign="center",e.onclick=this.DeselectAllFilteredNodes,i.appendChild(t),i.appendChild(e)}this.container.appendChild(i);const l=document.createElement("div");l.id=a,this.container.appendChild(l),this.clear()}clear(){document.getElementById(a).innerHTML=`<p>${this.translator.apply("LOC_NO_GRAPH")}</p>`,this.bound_graph=null}fill(t){this.bound_graph=t,this.updateList()}onSelectedNode(t){document.getElementById("node_info"+t.id).getElementsByTagName("input")[1].checked=!0}onDeselectedNode(t){document.getElementById("node_info"+t.id).getElementsByTagName("input")[1].checked=!1}updateList(){if(this.bound_graph){const t=document.getElementById(a);t.innerHTML="";const e=this.filter_string.length>0;this.bound_graph.graph.forEachNode(n=>(e&&!this.matchStr(n.data.label,this.filter_string,s.SubstringFilter)||this.postNodeInfo(t,n),!1))}}matchStr(t,e,n){if(null===e||0===e.length)return!0;switch(n){case s.NoFilter:return!0;case s.SubstringFilter:return this.m_not?-1===t.indexOf(e):-1!==t.indexOf(e);case s.StringFilter:return this.m_not?t!==e:t===e;case s.RegExpFilter:return this.m_not?null===t.match(e):null!==t.match(e)}return!1}postNodeInfo(t,e){const n=document.createElement("li");n.id="node_info"+e.id,n.style.listStyleType="none";const s=document.createElement("input");s.type="checkbox",s.style.marginLeft="18px",s.checked=!0,s.onclick=(()=>{s.checked?this.controller("ShowNode",{node:e}):this.controller("HideNode",{node:e})});const i=document.createElement("input");i.type="checkbox",i.style.marginLeft="55px",i.style.marginRight="18px",i.onclick=(()=>{i.checked?this.controller("SelectNode",{node:e}):this.controller("DeselectNode",{node:e})});const r=document.createElement("span");return r.style.fontWeight="normal",r.innerText=e.data.label,n.appendChild(s),n.appendChild(i),n.appendChild(r),t.appendChild(n),!1}ShowAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[0];e.checked=!0,e.onclick.apply(e)})}HideAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[0];e.checked=!1,e.onclick.apply(e)})}SelectAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[1];e.checked=!0,e.onclick.apply(e)})}DeselectAllFilteredNodes(){const t=document.getElementById(a);[].forEach.call(t.children,t=>{const e=t.getElementsByTagName("input")[1];e.checked=!1,e.onclick.apply(e)})}}},"./src/Tabs/SettingsTab.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingsTab",function(){return x});var s=n("./src/@types/GUI.ts"),i=n("./src/@types/LayoutBuilder.ts"),r=n("./src/@types/Graph.ts").GraphControlling.clusterize;const o=s.id_prefix+"_settings_tab_node_alpha_label",a=s.id_prefix+"_settings_tab_node_alpha_slider",l=s.id_prefix+"_settings_tab_link_alpha_label",h=s.id_prefix+"_settings_tab_link_alpha_slider",u=s.id_prefix+"_settings_tab_node_size_label",c=s.id_prefix+"_settings_tab_node_size_slider",d=s.id_prefix+"_settings_tab_link_size_label",p=s.id_prefix+"_settings_tab_link_size_slider",g=s.id_prefix+"_settings_tab_node_font_size_input",f=s.id_prefix+"_settings_tab_layout_builder_selector",v=s.id_prefix+"_settings_tab_layout_builder_configuration",m=s.id_prefix+"_settings_tab_build_layout_button",y=s.id_prefix+"_settings_tab_fit_to_screen_button",_=s.id_prefix+"_settings_tab_calc_modularity_button",b=s.id_prefix+"_settings_tab_graph_export_button";class x{constructor(t){this.container=null,this.controller=null,this.translator=null,this.layouts=t?t.Layouts:{}}build(t,e,n){this.container=t,this.controller=e,this.translator=n,this.container.style.height="100%";const s=document.createElement("div");{const t=document.createElement("div");{const e=document.createElement("div");e.innerHTML=`${n.apply("LOC_PASSIVETEXTALPHA")}`;const s=document.createElement("span");s.id=o,e.appendChild(s);const i=document.createElement("div");i.id=a,i.style.margin="10px",t.appendChild(e),t.appendChild(i)}const e=document.createElement("div");{const t=document.createElement("div");t.innerHTML=`${n.apply("LOC_PASSIVEEDGEALPHA")}`;const s=document.createElement("span");s.id=l,t.appendChild(s);const i=document.createElement("div");i.id=h,i.style.margin="10px",e.appendChild(t),e.appendChild(i)}s.appendChild(t),s.appendChild(e)}this.container.appendChild(s),w(this.container),$("#"+a).slider({min:0,max:1,step:.01,value:1,slide:(t,n)=>{const s=n.value||0;document.getElementById(o).innerText=String(s),e("SetNodeAlpha",{alpha:s})},create:()=>document.getElementById(o).innerText="1"}),$("#"+h).slider({min:0,max:1,step:.01,value:1,slide:(t,n)=>{const s=n.value||0;document.getElementById(l).innerText=String(s),e("SetLinkAlpha",{alpha:s})},create:()=>document.getElementById(l).innerText="1"});const r=document.createElement("div");{const t=document.createElement("div");{const e=document.createElement("div");e.innerHTML=`${n.apply("LOC_NODE_SIZE_TEXT")}`;const s=document.createElement("span");s.id=u,e.appendChild(s);const i=document.createElement("div");i.id=c,i.style.margin="10px",t.appendChild(e),t.appendChild(i)}const e=document.createElement("div");{const t=document.createElement("div");t.innerHTML=`${n.apply("LOC_LINK_SIZE_TEXT")}`;const s=document.createElement("span");s.id=d,t.appendChild(s);const i=document.createElement("div");i.id=p,i.style.margin="10px",e.appendChild(t),e.appendChild(i)}r.appendChild(t),r.appendChild(e)}this.container.appendChild(r),w(this.container),$("#"+c).slider({range:!0,min:0,max:1,step:.01,values:[0,1],slide:(t,e)=>{const n=e.values[0],s=e.values[1];document.getElementById(u).innerText=`[${n};${s}]`},create:()=>{document.getElementById(u).innerText="[0;1]"}}),$("#"+p).slider({range:!0,min:0,max:1,step:.01,values:[0,1],slide:(t,e)=>{const n=e.values[0],s=e.values[1];document.getElementById(d).innerText=`[${n};${s}]`},create:()=>{document.getElementById(d).innerText="[0;1]"}});const x=document.createElement("div");x.style.display="flex",x.style.alignItems="center";{const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.flex="1";{const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="space-between";const s=document.createElement("span");s.innerText=n.apply("LOC_NODEFONT");const i=document.createElement("input");i.id=g,i.style.width="70px",i.type="number",i.min="5",i.max="50",i.value="24",i.required=!0,e.appendChild(s),e.appendChild(i),t.appendChild(e)}const e=document.createElement("button");e.className="scivi_button",e.innerText=n.apply("LOC_APPLY"),e.style.marginLeft="10px",x.appendChild(t),x.appendChild(e)}if(this.container.appendChild(x),w(this.container),Object.keys(this.layouts).length>0){const t=document.createElement("div");{const e=document.createElement("select");e.id=f,e.name=f;const s=document.createElement("ul");s.id=v,s.style.margin="10px 10px",e.onchange=(()=>{s.innerHTML="";const t=this.layouts[e.value].getConfiguration();t&&Object.keys(t).forEach(e=>{const n=t[e],r=n.range,o=document.createElement("li");o.style.listStyleType="none",o.innerHTML=`${this.translator.apply("#"+e+"_text")}: `;const a=document.createElement("input");a.className="layout_input",a.id=e,n instanceof i.BooleanParam?(a.type="checkbox",a.checked=n.value):(a.type="number",a.max=String(r.max),a.min=String(r.min),a.step=String(r.step),a.value=String(r.default)),o.appendChild(a),s.appendChild(o)})});const r=document.createElement("button");r.id=m,r.innerText=n.apply("LOC_BUILD_LAYOUT"),r.className="scivi_button",r.onclick=(()=>{const t=this.layouts[e.value].getConfiguration();Object.keys(t).forEach(e=>{const n=document.getElementById(e);switch(t[e].type){case i.ParamType.NUMBER:t[e].value=parseFloat(n.value);break;case i.ParamType.BOOLEAN:t[e].value=n.checked}}),this.controller("layout",{builder:this.layouts[e.value]})}),t.appendChild(e),t.appendChild(s),t.appendChild(r)}this.container.appendChild(t),w(this.container),this.fillLayouts()}const E=document.createElement("div");{const t=document.createElement("button");t.className="scivi_button",t.innerText=n.apply("LOC_FIT_TO_SCREEN"),t.id=y;const e=document.createElement("button");e.className="scivi_button",e.innerText=n.apply("LOC_CALC_MODULARITY"),e.id=_;const s=document.createElement("button");s.className="scivi_button",s.innerText=n.apply("LOC_SAVE_GRAPH"),s.id=b,E.appendChild(t),E.appendChild(e),E.appendChild(s)}this.container.appendChild(E),w(this.container);const z=document.createElement("button");z.className="scivi_button",z.innerText=n.apply("LOC_HELP"),this.container.appendChild(z)}clear(){}fill(t){const e=t;document.getElementById(_).onclick=(()=>{const t=r(e.graph);this.controller("GraphClusterized",{count:t})})}fillLayouts(){const t=document.getElementById(f);document.getElementById(v);Object.keys(this.layouts).forEach(e=>{const n=document.createElement("option");n.value=e,n.innerText=this.translator.apply("#"+e),e==Object.keys(this.layouts)[0]&&(n.selected=!0),t.appendChild(n)})}}function w(t){t.appendChild(document.createElement("br")),t.appendChild(document.createElement("hr")),t.appendChild(document.createElement("br"))}},"./src/Translator.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"Translator",function(){return i}),n.d(e,"getOrCreateTranslatorInstance",function(){return o});var s=n("./node_modules/node-polyglot/index.js");class i{constructor(t="ru"){this._locale=t,this._instance=new s({allowMissing:!1,locale:t})}extend(t){return this._instance.extend(t[this._locale]),this}apply(t){return this._instance.t(t)}}let r;function o(t=""){return r||(r=new i(t)),r}},"./src/index.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"getParameterByName",function(){return v});var s=n("./src/Translator.ts");n.d(e,"Translator",function(){return s.Translator}),n.d(e,"getOrCreateTranslatorInstance",function(){return s.getOrCreateTranslatorInstance});var i=n("./src/GUI.ts");n.d(e,"GUI",function(){return i.GUI});var r=n("./src/GraphSerializer.ts");n.d(e,"GraphSerializer",function(){return r.GraphSerializer});var o=n("./src/Renderers/CircleNodeRenderer.ts");n.d(e,"CircleNodeRenderer",function(){return o.CircleNodeRenderer});var a=n("./src/Renderers/OrientedStraightLinkRenderer.ts");n.d(e,"OrientedStraightLinkRenderer",function(){return a.OrientedStraightLinkRenderer});var l=n("./src/Renderers/StraightLinkRenderer.ts");n.d(e,"StraightLinkRenderer",function(){return l.StraightLinkRenderer});var h=n("./src/LayoutBuilders/LayoutBuilder_Circle.ts");n.d(e,"LayoutBuilder_Circle",function(){return h.LayoutBuilder_Circle});var u=n("./src/LayoutBuilders/LayoutBuilder_FruchtermanReingold.ts");n.d(e,"LayoutBuilder_FruchtermanReingold",function(){return u.LayoutBuilder_FruchtermanReingold});var c=n("./src/Tabs/NodeInfoTab.ts");n.d(e,"NodeInfoTab",function(){return c.NodeInfoTab});var d=n("./src/Tabs/NodeListTab.ts");n.d(e,"NodeListTab",function(){return d.NodeListTab});var p=n("./src/Tabs/SettingsTab.ts");n.d(e,"SettingsTab",function(){return p.SettingsTab});var g=n("./src/Tabs/FiltersTab.ts");n.d(e,"FiltersTab",function(){return g.FiltersTab});var f=n("./src/@types/LayoutBuilder.ts");function v(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp(`[?&]${t}(=([^&#]*)|&|#|$)`).exec(e);if(n)return n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):""}n.d(e,"ParamType",function(){return f.ParamType}),n.d(e,"Param",function(){return f.Param}),n.d(e,"ScalarParam",function(){return f.ScalarParam}),n.d(e,"BooleanParam",function(){return f.BooleanParam})}});